import{b as Oe,d as Te,o,c as l,a as r,t as h,h as d,u as t,f as D,n as N,F as ce,p as we,e as x,A as Ve,_ as It,r as s,g as q,w as F,y as pe,K as dt,s as xt,i as ke,P as Ot,Q as Et,E as rt,x as Xe,j as jt,T as Je,l as Qe,v as ot,L as et,G as zt,H as Ht,z as Ue,O as je,k as Ne,R as wt,J as Bt,D as Ft,C as Wt,m as ft}from"./app-d40c9d6a.js";import{_ as Nt}from"./CreatorPageLayout-3185b8e6.js";import{_ as At,t as it}from"./tabTypes-5ca03920.js";import{_ as Re}from"./ImageElement-ed789870.js";import{h as i,r as tt}from"./BaseLayout-0fcc572e.js";import{_ as Zt,a as Ct}from"./PostTile-cce55882.js";import{_ as Gt}from"./LightBox-05393012.js";import{A as Ge}from"./AppLink-ddadbef1.js";import{s as Se}from"./shareUrls-f7902302.js";import{A as ye}from"./Button-2c917323.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";import{d as qt}from"./dateFormatHelper-ea9b4af8.js";import{_ as Yt}from"./OneTimePaymentWidget-0237c1d2.js";import{_ as Kt,a as Xt}from"./MembershipHeader-649c7e9a.js";import{E as $t,_ as Qt,a as Jt}from"./ExtraModalV1-5e60b8bc.js";/* empty css                 */import{_ as kt}from"./Tooltip-e0698a96.js";import{a as ut,b as ea,_ as ta}from"./OneTimePaymentModal-85d0ee43.js";import{_ as aa,a as ra}from"./MembershipPaymentModal-67a6f758.js";import{a as Mt,I as oa}from"./Footer.vue_vue_type_style_index_0_scoped_81179876_lang-e0a0beb9.js";import{_ as Tt}from"./DropDown-dc8cb0e8.js";import{m as Ee,_ as Ae,V as lt}from"./EmojiPicker-4d7c0ecd.js";import{A as Be,_ as St}from"./ModalClose-2063d60b.js";import{C as la}from"./CircularLoader-2d4c80f0.js";import{_ as Fe}from"./XIcon-b2093b77.js";import{_ as ct}from"./Instagram-c0b00f53.js";import{d as at}from"./defaultCoffeeTags-aaf78074.js";import{C as st}from"./CopyIcon-8274ae14.js";import{_ as sa}from"./ShimmerLoader-64b11701.js";import{_ as Pt}from"./Arrow-aaaea9ab.js";import{_ as na}from"./PageLoader-78baabbe.js";import{i as pt}from"./stripePayment-8cc2c9a2.js";import{_ as ht}from"./Close-1fe14a47.js";import{_ as ia}from"./ExtrasContent-05abca04.js";import{f as da}from"./featureTypes-fe0181f1.js";import{_ as vt}from"./Input-cacd5edf.js";import{_ as gt}from"./InputError-99689522.js";import"./Footer-178bca39.js";import"./userTypes-7c3f4db0.js";import"./themeHelper-8f3ed930.js";import"./AppHead-73150d05.js";import"./CopyLink-1ed35030.js";import"./Facebook-879da995.js";import"./appConfetti-35e1f47a.js";import"./postTypes-1efa31d5.js";import"./membershipHelper-29f236fc.js";import"./BlurHashDecoder-a6374cea.js";import"./SecondaryTooltip-59c7e5d5.js";import"./ArrowWithTail-bf4fc629.js";import"./Twitter-cf966a8f.js";import"./PaymentModalLayout-4a7b21f7.js";import"./PaymentLoader-5dd6f02f.js";import"./CheckBox-7438c0fe.js";import"./Tooltip-bd96b57e.js";/* empty css                                                                     */import"./StripeElementsWrapper-2d2a54f5.js";import"./StripePaymentRequestButton-c2495b7d.js";import"./VisibleCaptcha-192542a6.js";import"./ReCaptcha-7dc4e6be.js";import"./StripePaymentElements-23974d22.js";import"./Info-b5f8095f.js";import"./HeaderDropdownWrap-c307f107.js";import"./DefaultUserAvatar-b62ac2e6.js";import"./ArrowThin-f8541032.js";import"./lodash-20792176.js";import"./Search-6a97a43e.js";import"./File-d66afa11.js";import"./CheckedCircle-c3aaf9c9.js";import"./DeleteCurved-bfad5677.js";const ua=["aria-label"],ca={class:"flex justify-between font-cr-medium text-dark"},ma={class:"text-md xs:pr-4"},fa=["innerHTML"],pa={key:0,class:"max-h-75 mb-4 my-0 mx-auto rounded-xl overflow-hidden xs:h-auto"},ha={key:0,class:"video-responsive"},va=["src"],ga=["innerHTML"],_a={__name:"BioSection",props:["creator_data"],emits:["triggerEditModal"],setup(e,{emit:c}){return Oe(()=>{Te.IsBrowser&&i.removeUnWantedPTags(".bioSectionWrapper p")}),(a,n)=>e.creator_data.data.featured_image||e.creator_data.data.featured_video.url||e.creator_data.data.description||e.creator_data.data.links.length>0?(o(),l("div",{key:0,tabindex:"0",role:"region","aria-label":a.$t("lang.common.about")+" "+e.creator_data.data.name},[r("div",ca,[r("div",ma,h(a.$t("lang.common.about")+" "+e.creator_data.data.name),1),e.creator_data.data.own_page?(o(),l("div",{key:0,onClick:n[0]||(n[0]=u=>a.$emit("triggerEditModal")),class:"text-[14px] underline cursor-pointer hover:no-underline"},h(a.$t("lang.common.edit")),1)):d("",!0)]),r("div",{class:"font-cr-medium text-md text-grey71 leading-5 mt-1 mb-5",innerHTML:t(i).sanitizeHtml(e.creator_data.data.work)},null,8,fa),e.creator_data.data.featured_image||e.creator_data.data.featured_video.url?(o(),l("div",pa,[e.creator_data.data.featured_video.url?(o(),l("div",ha,[r("iframe",{src:t(i).getSrcForUrl(e.creator_data.data.featured_video.url),style:{width:"100%",border:"0px"},allowfullscreen:""},null,8,va)])):e.creator_data.data.featured_image?(o(),D(Re,{key:1,src:e.creator_data.data.featured_image,alt:e.creator_data.data.name,width:600,height:300,cropWidth:[480,600,900],cropSize:[500,800,1e3],intrinsicSize:1200,imageClass:"w-full h-75 xs:h-50"},null,8,["src","alt"])):d("",!0)])):d("",!0),r("div",null,[t(i).linkify(t(i).sanitizeHtml(e.creator_data.data.description))!==void 0?(o(),l("div",{key:0,class:"whitespace-pre-wrap text-sm leading-6 font-cr-regular text-dark break-words colorTheLinks bioSectionWrapper xs:mt-4",innerHTML:t(i).linkify(t(i).sanitizeHtml(e.creator_data.data.description))},null,8,ga)):d("",!0),e.creator_data.data.links?(o(),l("div",{key:1,class:N(["flex flex-wrap items-center gap-x-4 gap-y-3",t(i).linkify(t(i).sanitizeHtml(e.creator_data.data.description))!==void 0?"mt-4":"pt-8"])},[(o(!0),l(ce,null,we(e.creator_data.data.links,(u,m)=>(o(),l("div",{key:m},[x(At,{link:t(i).checkAndAddHttpsToLink(t(i).getLowerCase(u)),rawLink:t(i).checkAndAddHttpsToLink(u),fromPage:"biosection"},null,8,["link","rawLink"])]))),128))],2)):d("",!0)])],8,ua)):d("",!0)}},ya={__name:"ProgressBar",props:["width","height","noAnimation"],setup(e){const c=e;let a="bg-pageTheme h-full left-0 top-0 rounded-full";const n=u=>{u.el.style.width=0,setTimeout(()=>{u.el.style.width=`${c.width}%`,u.el.style.transition="width 0.5s linear"},100)};return(u,m)=>(o(),l("div",{style:Ve(["height:"+e.height+"px"]),class:"w-full overflow-hidden relative h-2 bg-pageTheme1 rounded-full my-3 xs:h-1.5 xs:my-2"},[e.noAnimation?(o(),l("div",{key:0,style:Ve({width:`${e.width}%`}),class:N(t(a))},null,6)):(o(),l("div",{key:1,onVnodeMounted:m[0]||(m[0]=f=>n(f)),class:N(t(a))},null,2))],4))}},Rt={async fixedWidget(e,c){if(window.innerWidth<1200)return;const a=await It(()=>import("./float-sidebar-a64b40c4.js").then(m=>m.f),["assets/float-sidebar-a64b40c4.js","assets/app-d40c9d6a.js","assets/app-a0e644f4.css"]),n=document.querySelector(e),u=document.querySelector(c);a.default({sidebar:n,relative:u,topSpacing:95,bottomSpacing:40})}},ba={class:"w-full mt-3 tw-feature-box mx-auto !p-10 smallDevice:w-117 xs:mt-4 xs:!p-4"},xa={class:"font-cr-medium text-lg leading-7 mb-3"},wa={class:"text-base font-cr-medium text-dark mb-3"},Ca={class:"text-sm text-dark font-cr-regular break-words leading-6"},$a=["innerHTML"],ka={class:"inline-block text-grey71 text-sm font-cr-regular cursor-pointer underline ml-1 lowercase"},Ma=["innerHTML"],_t={__name:"GoalSection",props:["goal","creatorData","current_user_data"],setup(e){const c=e;let a=c.goal.goal_amount_start>0?c.goal.goal_amount_start:0,n=(a+Math.abs(c.goal.goal_counter))/c.goal.goal_amount*100,u=s(!0);const m=()=>{u.value=!1,i.checkIsTab()||Rt.fixedWidget(".tw-payment-widget",".tw-page-content-sidebar")};return(f,k)=>(o(),l("div",ba,[r("p",xa,h(f.$t("lang.home.goals")),1),r("p",wa,h(t(i).numberFormatWithdecimals(t(n),"max",2))+"% of "+h(t(i).userCurrency()+t(i).numberFormat(e.goal.goal_amount))+" "+h(e.goal.goal_type=="membership"?" per month":""),1),x(ya,{width:t(n),height:10,noAnimation:!1},null,8,["width"]),r("p",Ca,[t(u)?(o(),l(ce,{key:0},[r("span",{innerHTML:t(i).sanitizeHtml(e.goal.goal_description.slice(0,150))},null,8,$a),e.goal.goal_description.length>150?(o(),l("span",{key:0,onClick:m},[q("... "),r("span",ka,h(f.$t("lang.common.see_more")),1)])):d("",!0)],64)):(o(),l("span",{key:1,innerHTML:t(i).sanitizeHtml(e.goal.goal_description)},null,8,Ma))])]))}},Ta=["aria-label"],Sa={class:"font-cr-medium text-lg leading-7 mb-3 ml-2"},Pa={__name:"FeaturedPost",props:["creatorData","current_user_data","featured_posts"],emits:["openImageFullView","openPaymentModal"],setup(e,{emit:c}){let a=s(!1),n=s(-1),u=s({});const m=(k,p)=>{n.value=k,u.value=p,a.value=!0},f=(k,p)=>{c("openPaymentModal",k,p,"posts")};return(k,p)=>(o(),l("div",{tabindex:"0",role:"region","aria-label":k.$t("lang.tab.posts"),class:"tw-feature-box !pt-4 xs:mb-4"},[r("div",Sa,h(k.$t("lang.tab.posts")),1),(o(!0),l(ce,null,we(e.featured_posts,$=>(o(),D(Zt,{post:$,currentUser:e.current_user_data,creatorData:e.creatorData.data,fromPage:"home",onOpenImageFullView:m,onTriggerPayment:f,class:"mb-3"},null,8,["post","currentUser","creatorData"]))),256)),x(Ge,{href:t(Se).postsPage(),class:"w-full tw-grey-line-border-rounded-full text-dark text-sm font-cr-medium relative cursor-pointer h-12 px-4 py-1.5 mt-6",btnType:"primary"},{default:F(()=>[r("span",null,h(k.$t("lang.post.view_all_posts")),1)]),_:1},8,["href"]),t(a)?(o(),D(Gt,{key:0,currentImageIndex:t(n),images:t(u),onClose:p[0]||(p[0]=$=>pe(a)?a.value=!1:a=!1)},null,8,["currentImageIndex","images"])):d("",!0)],8,Ta))}},Ra={width:"16px",height:"15px",viewBox:"0 0 16 15",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Da={id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ua={class:"fill-path",id:"widget",transform:"translate(-182.000000, -1284.000000)"},Va={id:"Group-27",transform:"translate(182.000000, 1282.000000)"},La={id:"Group-9",transform:"translate(0.000000, 2.000000)"},Ia={__name:"Members",props:{fillClass:{default:"fill-black"}},setup(e){return(c,a)=>(o(),l("svg",Ra,[r("g",Da,[r("g",Ua,[r("g",Va,[r("g",La,[r("path",{class:N(e.fillClass),d:"M10.2569733,5.07758342 C10.5665168,5.20510893 10.9054162,5.27594323 11.2610139,5.27594323 C11.6165522,5.27594323 11.9554515,5.20510893 12.264995,5.07758342 C13.2238134,4.68258711 13.898938,3.73927862 13.898938,2.63795973 C13.898938,1.18110256 12.7178711,3.565485e-05 11.2610139,3.565485e-05 C9.8040973,3.565485e-05 8.62303039,1.18110256 8.62303039,2.63795973 C8.62303039,3.73927862 9.2982144,4.68258711 10.2569733,5.07758342",id:"Fill-1"},null,2),q(),r("path",{class:N(e.fillClass),d:"M11.2609842,5.93140417 C10.2450587,5.93140417 9.3068607,6.26299427 8.54753125,6.82307254 C9.58086823,7.84684214 10.2219424,9.26578632 10.2219424,10.8318662 C10.2219424,12.0834108 9.80983179,12.9478033 9.29069717,13.540684 C9.88744051,13.6734983 10.5554936,13.7276342 11.2609842,13.7276342 C13.7883188,13.7276342 15.8371059,13.0349199 15.8371059,10.5075853 C15.8371059,7.9802507 13.7883188,5.93140417 11.2609842,5.93140417",id:"Fill-3"},null,2),q(),r("path",{class:N(e.fillClass),d:"M4.57613955,6.25569097 C2.04880493,6.25569097 1.7827425e-05,8.3045375 1.7827425e-05,10.8318721 C1.7827425e-05,13.3592067 2.04880493,14.051921 4.57613955,14.051921 C6.03186765,14.051921 7.3278026,13.8211747 8.16592927,13.1433166 C8.78293645,12.644327 9.15226127,11.9034786 9.15226127,10.8318721 C9.15226127,9.54597996 8.62118228,8.38476092 7.76730805,7.55346809 C6.94290849,6.75081799 5.81764143,6.25569097 4.57613955,6.25569097",id:"Fill-5"},null,2),q(),r("path",{class:N(e.fillClass),d:"M3.38108406,5.31377303 C3.44342062,5.34550585 3.50706453,5.37503995 3.57213463,5.40184051 C3.88167815,5.52942545 4.2205775,5.60020032 4.57611578,5.60020032 C4.93171348,5.60020032 5.27061283,5.52942545 5.58015636,5.40184051 C5.64522646,5.37503995 5.70887037,5.34550585 5.77120693,5.31377303 C6.6273393,4.87783306 7.21409928,3.9888388 7.21409928,2.96227625 C7.21409928,1.50535965 6.03303238,0.324292746 4.57611578,0.324292746 C3.11925861,0.324292746 1.9381917,1.50535965 1.9381917,2.96227625 C1.9381917,3.9888388 2.52495169,4.87783306 3.38108406,5.31377303",id:"Fill-7"},null,2)])])])])]))}},Oa={},Ea={style:{"margin-top":"2px"},width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ja=r("path",{d:"M12.1152 5.04883L9.00993 7.549C8.42227 8.00973 7.59848 8.00973 7.01083 7.549L3.87891 5.04883",stroke:"#222222","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),za=r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.5584 1H11.422C12.4116 1.0111 13.3535 1.42947 14.0284 2.15768C14.7032 2.88588 15.0521 3.86035 14.9937 4.85414V9.60647C15.0521 10.6003 14.7032 11.5747 14.0284 12.3029C13.3535 13.0311 12.4116 13.4495 11.422 13.4606H4.5584C2.43269 13.4606 1 11.7313 1 9.60647V4.85414C1 2.72934 2.43269 1 4.5584 1Z",stroke:"#222222","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ha=[ja,za];function Ba(e,c){return o(),l("svg",Ea,Ha)}const Fa=Le(Oa,[["render",Ba]]),Wa={class:"flex flex-wrap gap-x-3 gap-y-2 items-center"},Na={class:"ml-2"},Aa={__name:"CanMsgOptionOrMemberSince",props:["subscription","isMember","name","isSupporter","projectId"],setup(e){const c=e;let a="flex items-center mx-auto mt-0 w-full text-dark font-cr-regular text-md",n=s(!1);const u=async()=>{n.value=!0;try{const m=await tt.startMessageWithProject(c.projectId);Te.IsBrowser&&(window.location=`${Te.mainUrl}/messages/${m.data.data.id}`)}catch{n.value=!1}};return(m,f)=>(o(),l("div",null,[e.isSupporter?(o(),l("div",{key:0,class:N([t(a),{"pb-4":e.isMember}])},[r("div",Wa,[r("div",null,h(m.$t("lang.common.you_are_a_supp_of_ctr",{name:e.name})),1),x(ye,{onClick:u,disabled:t(n),btnType:"white",class:"w-max px-3 font-cr-medium text-dark tw-grey-color-rounded-full h-10 xs:px-1 xs:text-sm xs:w-28 flex-shrink-0"},{default:F(()=>[x(Fa,{class:"mr-2"}),q(" "+h(m.$t("lang.common.message")),1)]),_:1},8,["disabled"])])],2)):d("",!0),e.isMember?(o(),l("div",{key:1,class:N([t(a),{"border-t border-greyD9 pt-4":e.isSupporter}])},[x(Ia,{fillClass:"fill-dark"}),r("span",Na,h(m.$t("lang.payment.membership.member_since_date",{date:t(qt).timestampDateFormat(e.subscription.started_at,"MMMM YYYY")})),1)],2)):d("",!0)]))}},Za=["aria-label"],Ga={class:"text-2xl text-dark font-cr-bold xs:text-[22px]"},qa={class:"mt-4 pt-4 border-t border-greyDD/80"},Ya={__name:"MembershipPaymentWidget",props:["creatorData","currentUser","membershipLevels","fromPage","membershipSettings"],emits:["openMemPaymentModal"],setup(e,{emit:c}){return(a,n)=>(o(),l("div",{tabindex:"0",role:"region","aria-label":a.$t("lang.membership.become_a_member"),class:N([e.fromPage!="homeWidget"?"pb-8":""])},[r("h1",Ga,h(a.$t("lang.membership.become_a_member")),1),x(Kt,{membershipSettings:e.membershipSettings,class:"!mt-2 pb-2 !justify-start"},null,8,["membershipSettings"]),r("div",qa,[(o(!0),l(ce,null,we(e.membershipLevels,(u,m)=>(o(),D(Xt,{key:m,level:u,tabindex:"0","aria-label":a.$t("lang.a11y.membership.membership_level",{name:u.title}),fromPage:"homeWidget",class:"border-b border-solid border-greyDD/80 pb-3 mb-6 last:border-none last:pb-0 first:pt-0",onOpenMembershipPaymentModal:f=>a.$emit("openMemPaymentModal",u)},null,8,["level","aria-label","onOpenMembershipPaymentModal"]))),128))])],10,Za))}},Ka={class:"grid grid-cols-2 gap-x-1 mt-3 relative w-full extrasSlider xs:gap-x-0 xs:gap-y-1 xxs:grid-cols-1 xs:mt-1 xs:pb-2"},yt={__name:"FeaturedExtrasSlider",props:["extras","creatorData","current_user_data","rewardIds"],emits:["openExtraSingleModal","addToCart"],setup(e,{emit:c}){s(),s(2),s(2),s(!1),s(!0);const a=u=>{c("openExtraSingleModal",u)},n=(u,m,f)=>{c("addToCart",u,m,f)};return(u,m)=>(o(),l("div",Ka,[(o(!0),l(ce,null,we(e.extras.slice(0,2),(f,k)=>(o(),l("div",{key:k,class:"xs:mx-4 xxs:!border-b xxs:!border-greyE5 xxs:last:border-none"},[x($t,{extra:f,creatorData:e.creatorData.data,current_user_data:e.current_user_data,totalExtrasCount:e.extras.length,fromPage:"home",rewardIds:e.rewardIds,onOpenSingleModal:a,onAddToCart:n,class:"cursor-pointer relative group/extraTile xs:pb-2"},null,8,["extra","creatorData","current_user_data","totalExtrasCount","rewardIds"])]))),128))]))}};const Xa=["aria-label"],Qa={class:"grid grid-cols-2 xs-sm:grid-cols-1 gap-3 mt-4 xs:hidden"},Ja={key:1},er={class:"group/extraTile relative cursor-pointer mt-2 xs:mt-0"},tr=["onClick"],ar={class:"relative w-full minxs:w-[200px] h-[200px] xs:h-[311px] flex-shrink-0"},rr={key:0,class:"h-full"},or={key:1,class:"text-xl leading-10 font-cr-medium text-pageTheme w-full h-full relative bg-pageTheme05 flex justify-center items-center p-4 text-center rounded-2xl"},lr=["innerHTML"],sr={class:"p-4 flex flex-col justify-between xs:px-0 xs:pb-0"},nr=["innerHTML"],ir=["innerHTML"],dr={class:"flex flex-wrap items-center mt-3"},ur={class:"flex flex-col"},cr={class:"text-base text-dark font-cr-medium mb-0 relative rounded mr-3 px-0"},mr={key:0},fr={key:0,class:"relative group"},pr={class:"text-xs text-pageTheme font-cr-medium flex items-center"},hr=xt('<svg class="ml-0.5" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0_100_22" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="18"><rect width="18" height="18" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_100_22)"><path d="M8.51219 12.4102H9.48779V8.09737H8.51219V12.4102ZM8.99999 6.97237C9.14999 6.97237 9.27509 6.91927 9.37529 6.81307C9.47489 6.70687 9.52469 6.57877 9.52469 6.42877C9.52469 6.29137 9.47489 6.16957 9.37529 6.06337C9.27509 5.95657 9.14999 5.90317 8.99999 5.90317C8.84999 5.90317 8.72489 5.95327 8.62469 6.05347C8.52509 6.15367 8.47529 6.27877 8.47529 6.42877C8.47529 6.57877 8.52509 6.70687 8.62469 6.81307C8.72489 6.91927 8.84999 6.97237 8.99999 6.97237ZM8.99999 15.8221C8.06279 15.8221 7.17839 15.6442 6.34679 15.2884C5.51579 14.932 4.79069 14.4445 4.17149 13.8259C3.55289 13.2067 3.06539 12.4816 2.70899 11.6506C2.35319 10.819 2.17529 9.93457 2.17529 8.99737C2.17529 8.04757 2.35319 7.16017 2.70899 6.33517C3.06539 5.51017 3.55289 4.78807 4.17149 4.16887C4.79069 3.55027 5.51579 3.06277 6.34679 2.70637C7.17839 2.35057 8.06279 2.17267 8.99999 2.17267C9.94979 2.17267 10.8372 2.35057 11.6622 2.70637C12.4872 3.06277 13.2093 3.55027 13.8285 4.16887C14.4471 4.78807 14.9346 5.51317 15.291 6.34417C15.6468 7.17577 15.8247 8.06017 15.8247 8.99737C15.8247 9.93457 15.6468 10.819 15.291 11.6506C14.9346 12.4816 14.4471 13.2067 13.8285 13.8259C13.2093 14.4445 12.4842 14.932 11.6532 15.2884C10.8216 15.6442 9.93719 15.8221 8.99999 15.8221ZM8.99999 14.8474C10.6248 14.8474 12.006 14.2786 13.1436 13.141C14.2812 12.0034 14.85 10.6222 14.85 8.99737C14.85 7.37257 14.2812 5.99137 13.1436 4.85377C12.006 3.71617 10.6248 3.14737 8.99999 3.14737C7.37519 3.14737 5.99399 3.71617 4.85639 4.85377C3.71879 5.99137 3.14999 7.37257 3.14999 8.99737C3.14999 10.6222 3.71879 12.0034 4.85639 13.141C5.99399 14.2786 7.37519 14.8474 8.99999 14.8474Z" class="fill-pageTheme" fill="#873260"></path></g></svg>',1),vr={key:1},gr={class:"text-xs text-pageTheme font-cr-medium flex items-center"},_r={key:0},yr={key:1},br={key:0,class:"ml-auto font-cr-regular text-sm flex items-center text-dark"},xr=r("svg",{class:"stroke-primary cursor-pointer text-primary",width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M7.99959 11.4193L4.39542 14.1693C4.27042 14.2665 4.14542 14.3082 4.02042 14.2943C3.89542 14.2804 3.77736 14.2387 3.66625 14.1693C3.55514 14.0998 3.47528 14.0061 3.42667 13.888C3.37806 13.77 3.37459 13.6345 3.41625 13.4818L4.79125 9.0026L1.24959 6.46094C1.12459 6.3776 1.04472 6.26996 1.01 6.13802C0.97528 6.00608 0.978752 5.88455 1.02042 5.77344C1.06209 5.66233 1.13153 5.56163 1.22875 5.47135C1.32597 5.38108 1.45097 5.33594 1.60375 5.33594H5.99959L7.39542 0.669271C7.43709 0.516493 7.51695 0.40191 7.635 0.325521C7.75306 0.249132 7.87459 0.210938 7.99959 0.210938C8.12459 0.210938 8.24611 0.249132 8.36417 0.325521C8.48222 0.40191 8.56209 0.516493 8.60375 0.669271L9.99959 5.33594H14.3954C14.5482 5.33594 14.6732 5.38108 14.7704 5.47135C14.8676 5.56163 14.9371 5.66233 14.9788 5.77344C15.0204 5.88455 15.0239 6.00608 14.9892 6.13802C14.9544 6.26996 14.8746 6.3776 14.7496 6.46094L11.2079 9.0026L12.5829 13.4818C12.6246 13.6345 12.6211 13.77 12.5725 13.888C12.5239 14.0061 12.444 14.0998 12.3329 14.1693C12.2218 14.2387 12.1038 14.2804 11.9788 14.2943C11.8538 14.3082 11.7288 14.2665 11.6038 14.1693L7.99959 11.4193Z",fill:"currentColor"})],-1),wr={class:"mx-1"},Cr={class:"rating-info-count"},$r={key:2},kr={class:"xs:p-6 mt-6 xs:mt-0"},Mr={__name:"FeaturedExtras",props:["extras","creatorData","current_user_data","rewardIds"],emits:["hideFloatingButtonOnMobile","triggerOpenExtraModal","triggerAddToCart"],setup(e,{emit:c}){let{display_ratings:a}=dt().props.shop_details.data,n=dt().props.creator_tab_data.data;const u=f=>{c("triggerOpenExtraModal",f,!0)},m=(f,k,p)=>{c("triggerAddToCart",f,k,p)};return(f,k)=>(o(),l("div",{tabindex:"0",role:"region","aria-label":f.$t(`lang.tab.${t(n)[4].name.toLowerCase()}`)},[r("p",{class:N(["font-cr-bold text-2xl leading-7 pl-1.5 xs:pl-4",{" pl-3 xs:pl-6":e.extras.data.length>1}])},h(f.$t(`lang.tab.${t(n)[4].name.toLowerCase()}`)),3),e.extras.data.length==2?(o(),l(ce,{key:0},[r("div",Qa,[(o(!0),l(ce,null,we(e.extras.data,(p,$)=>(o(),D($t,{key:$,extra:p,creatorData:e.creatorData.data,current_user_data:e.current_user_data,totalExtrasCount:e.extras.data.length,fromPage:"home",rewardIds:e.rewardIds,onOpenSingleModal:u,onAddToCart:m,class:"cursor-pointer relative group/extraTile"},null,8,["extra","creatorData","current_user_data","totalExtrasCount","rewardIds"]))),128))]),x(yt,{class:"minxs:hidden",extras:e.extras.data,creatorData:e.creatorData,current_user_data:e.current_user_data,rewardIds:e.rewardIds,onOpenExtraSingleModal:u,onAddToCart:m},null,8,["extras","creatorData","current_user_data","rewardIds"])],64)):e.extras.data.length==1?(o(),l("div",Ja,[r("div",er,[(o(!0),l(ce,null,we(e.extras.data,(p,$)=>(o(),l("div",{key:$,class:"p-2 rounded-2xl relative top-0 transition-all duration-200 ease-out h-full hover:shadow-hover-box xs:hover-none xs:p-4"},[r("div",{class:"minxs:flex",onClick:S=>u(p)},[r("div",ar,[p.featured_media!=""?(o(),l("div",rr,[x(Re,{src:p.featured_media[0].path,alt:p.title,width:250,height:300,cropWidth:[500],cropSize:[400],intrinsicSize:500,class:"h-full",imageClass:"w-full rounded-2xl minxs:w-[200px] h-full xs:rounded-2xl"},null,8,["src","alt"])])):(o(),l("div",or,[r("span",{class:"tw-limit-text-line-3 w-11/12",innerHTML:p.reward_title},null,8,lr)]))]),r("div",sr,[r("div",null,[r("h4",{class:N(["text-left leading-7 text-dark m-0 word-break text-base tw-limit-text-line-2",e.extras.data.length===1?"font-cr-medium":"font-cr-regular"]),innerHTML:p.reward_title},null,10,nr),p.reward_description?(o(),l("p",{key:0,class:N(["mt-2 font-cr-regular text-sm leading-6 text-dark break-words tw-limit-text-line-2 colorTheLinks xs:hidden",t(i).checkHttpExits(p.reward_description)?"break-all":""]),innerHTML:t(i).linkify(t(i).sanitizeHtml(p.reward_description))},null,10,ir)):d("",!0)]),r("div",dr,[r("div",ur,[r("p",cr,h(p.reward_has_membership_pricing===1&&e.current_user_data&&e.creatorData.data.membership_enabled&&e.creatorData.data.subscribed?p.reward_member_price_converted>0?t(i).userCurrencyConverted()+t(i).numberFormat(p.reward_member_price_converted):f.$t("lang.common.free"):p.reward_coffee_price_converted>0?t(i).userCurrencyConverted()+t(i).numberFormat(p.reward_coffee_price_converted):f.$t("lang.common.free")),1),p.reward_has_membership_pricing===1&&e.creatorData.data.membership_enabled?(o(),l("div",mr,[e.current_user_data&&e.creatorData.data.subscribed?(o(),l("div",fr,[x(kt,{class:"w-[200px] py-3 right-[-106px] top-[-92px] mr-0",tooltipText:f.$t("lang.extras.members_discount",{currency:t(i).userCurrencyConverted(),amount:t(i).numberFormat(p.reward_coffee_price_converted*p.reward_coffee_count)}),arrowPosition:"center"},null,8,["tooltipText"]),r("div",pr,[q(h(f.$t("lang.extras.discount_applied"))+" ",1),hr])])):(o(),l("div",vr,[r("div",gr,[t(i).numberFormat(p.reward_member_price_converted)>0?(o(),l("span",_r,h(f.$t("lang.extras.price_for_members",{currency:t(i).userCurrencyConverted(),amount:t(i).numberFormat(p.reward_member_price_converted)})),1)):(o(),l("span",yr,h(f.$t("lang.extras.price_for_members_free")),1))])]))])):d("",!0)]),t(a)==1&&p.rating&&p.rating.count>0?(o(),l("div",br,[xr,r("span",wr,h(t(i).numberFormatWithdecimals(p.rating.ratings,"max",1)),1),q("("),r("span",Cr,h(p.rating.count),1),q(") ")])):d("",!0)])])],8,tr)]))),128))])])):(o(),l("div",$r,[x(yt,{extras:e.extras.data,creatorData:e.creatorData,current_user_data:e.current_user_data,rewardIds:e.rewardIds,onOpenExtraSingleModal:u,onAddToCart:m},null,8,["extras","creatorData","current_user_data","rewardIds"])])),r("div",kr,[x(Ge,{href:`/${e.creatorData.data.slug}/extras`,class:"w-full tw-grey-line-border-rounded-full text-dark text-sm font-cr-medium relative cursor-pointer h-12 px-4 py-1.5",btnType:"primary"},{default:F(()=>[r("span",null,h(f.$t(`lang.extras.${t(n)[4].name.toLowerCase()=="extras"?"view_all_extras":"view_all_shop_items"}`)),1)]),_:1},8,["href"])])],8,Xa))}},Tr={class:"w-full xxs-xs:w-117 xs-sm:w-[380px] mx-auto flex flex-col gap-y-3 xs:gap-y-4 xxs:w-full"},Sr={__name:"PaymentWidget",props:["creatorData","currentUserData","membershipLevels","subscription","featuredExtras","membershipSettings","rewardIds","goal","recordedVideoData"],emits:["openPaymentModal","hideFloatingButtonOnMobile","triggerOpenExtraModal","triggerAddToCart","toggleVideoRecorderModal","removeVideo","openVideoPlayModal","chosenMonthlySupportValue"],setup(e,{emit:c}){const a=e;let n=i.jsonDecode(a.creatorData.data.tab_order);const u=S=>{c("openPaymentModal","support",S,"homeWidget")},m=S=>{c("openPaymentModal","membership",S,"homeWidget")},f=S=>{c("chosenMonthlySupportValue",S)},k=ke(()=>a.creatorData.data.membership_enabled&&a.creatorData.data.subscribed),p=ke(()=>a.creatorData.data.can_message&&a.creatorData.data.supporter),$=ke(()=>{const S=[{component:Yt,props:{class:"tw-feature-box !px-10 !py-8 xs:!p-6",styleOrder:n[it.ONE_TIME_SUPPORT],creatorData:a.creatorData,currentUser:a.currentUserData,fromPage:"homeWidget",recordedVideoData:a.recordedVideoData,goal:a.goal},events:{removeVideo:()=>c("removeVideo"),toggleVideoRecorderModal:()=>c("toggleVideoRecorderModal"),openVideoPlayModal:()=>c("openVideoPlayModal"),openOnetimePaymentModal:w=>u(w),chosenMonthlySupport:w=>f(w)}}];return a.creatorData.data.membership_enabled&&!a.creatorData.data.subscribed&&S.push({component:Ya,props:{class:"tw-feature-box !px-10 !py-8 xs:!p-6",styleOrder:n[it.MEMBERSHIP],creatorData:a.creatorData,currentUser:a.currentUserData,fromPage:"homeWidget",membershipLevels:a.membershipLevels.data,membershipSettings:a.membershipSettings.data},events:{openMemPaymentModal:w=>m(w)}}),a.featuredExtras.data.length&&S.push({component:Mr,props:{class:"tw-feature-box !pt-6 xs:!px-0 xs:!pt-4 xs:!pb-0",styleOrder:n[it.EXTRA],extras:a.featuredExtras,creatorData:a.creatorData,currentUserData:a.currentUserData,rewardIds:a.rewardIds},events:{triggerAddToCart:(w,T,y)=>c("triggerAddToCart",w,T,y),triggerOpenExtraModal:(w,T)=>c("triggerOpenExtraModal",w,T),hideFloatingButtonOnMobile:()=>c("hideFloatingButtonOnMobile")}}),S.sort((w,T)=>(w.props.styleOrder??0)-(T.props.styleOrder??0))});return(S,w)=>(o(),l("div",Tr,[k.value||p.value?(o(),D(Aa,{key:0,isMember:k.value,isSupporter:p.value,projectId:e.creatorData.data.project_id,name:e.creatorData.data.name,subscription:e.subscription,class:"tw-feature-box !p-8 w-full xs:!p-6"},null,8,["isMember","isSupporter","projectId","name","subscription"])):d("",!0),(o(!0),l(ce,null,we($.value,(T,y)=>(o(),D(rt(T.component),Ot({key:y},T.props,Et(T.events)),null,16))),128))]))}},Pr={class:"flex mt-3 relative"},Rr={class:"bg-white h-6 flex items-center flex-shrink-0 z-10 relative"},Dr={class:"ml-3"},Ur=["innerHTML"],Vr=["aria-label"],Lr=["poster"],Ir=["src"],Or=["aria-label"],Er=r("rect",{width:"40",height:"40",rx:"20",fill:"black","fill-opacity":"0.4"},null,-1),jr=r("path",{d:"M14.6667 10.6667V29.3334L29.3334 20L14.6667 10.6667Z",fill:"white"},null,-1),zr={__name:"Reply_v1",props:["currentUserData","comm","trans","creator_data"],emits:["openReplyForm","deleteReply","openVideoPlayModal"],setup(e,{emit:c}){const a=e,n=ke(()=>a.comm.fk_user_id==a.trans.fk_user_id?!1:(a.comm.fk_project_id==a.trans.fk_project_id||a.comm.fk_user_id)!=null?!0:"");let u=a.trans.supporter_role_is_creator||n.value?Se.homePage(a.comm.commented_project_slug):"";return(m,f)=>{var k,p;return o(),l("div",Pr,[r("div",Rr,[t(u)?(o(),D(t(Xe),{key:0,"aria-label":"$t('lang.a11y.to_supporter_profile')",class:"absolute w-full h-full left-0 top-0 z-10",href:t(u)},null,8,["href"])):d("",!0),x(Re,{src:n.value?e.creator_data.dp:e.trans.profile_picture_url,alt:e.comm.profile.profile_full_name,width:20,height:20,intrinsicSize:100,imageClass:"w-5 h-5 rounded-full relative z-1"},null,8,["src","alt"])]),r("div",Dr,[t(i).sanitizeHtml(e.comm.message)?(o(),l("p",{key:0,class:"text-dark font-cr-regular minxs:text-sm tw-break-word mt-[2px]",innerHTML:t(i).sanitizeHtml(e.comm.message)},null,8,Ur)):d("",!0),((k=e.comm.video_url)==null?void 0:k.length)!=0?(o(),l("div",{key:1,"aria-label":m.$t("lang.a11y.reply_video"),role:"button",tabindex:"0",onClick:f[0]||(f[0]=$=>m.$emit("openVideoPlayModal")),class:N([{"mt-2":t(i).sanitizeHtml(e.comm.message)},"w-30 h-44 mb-1 rounded-xl relative flex items-center justify-center select-none cursor-pointer"])},[r("video",{poster:(p=e.comm.meta)==null?void 0:p.thumbnail,class:"w-full rounded-xl h-full object-cover",preload:"none"},[r("source",{src:e.comm.video_url,type:"video/mp4"},null,8,Ir)],8,Lr),(o(),l("svg",{"aria-label":m.$t("lang.a11y.play_video"),class:"absolute",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Er,q(),jr],8,Or))],10,Vr)):d("",!0),e.comm.commented_user_id==e.currentUserData.user_id?(o(),l("p",{key:2,onClick:f[1]||(f[1]=$=>m.$emit("deleteReply")),class:"mt-1 text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 inline"},h(m.$t("lang.common.delete")),1)):d("",!0),e.comm.commented_user_id!=e.currentUserData.user_id&&(e.trans.fk_user_id==e.currentUserData.user_id||e.creator_data.own_page)?(o(),l("p",{key:3,onClick:f[2]||(f[2]=$=>m.$emit("openReplyForm")),class:"mt-1 text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 inline"},h(m.$t("lang.common.reply")),1)):d("",!0)])])}}},Hr={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Br={__name:"CloseBold",props:["fillClass"],setup(e){return(c,a)=>(o(),l("svg",Hr,[r("path",{class:N(e.fillClass),d:"M1.36328 18.7617C1.12109 18.5195 0.960938 18.2344 0.882812 17.9063C0.804688 17.5781 0.804688 17.2539 0.882812 16.9336C0.960938 16.6133 1.11328 16.3398 1.33984 16.1133L7.43359 10.0078L1.33984 3.91407C1.11328 3.69532 0.960938 3.42579 0.882812 3.10547C0.804688 2.77735 0.804688 2.45313 0.882812 2.13282C0.960938 1.80469 1.12109 1.51563 1.36328 1.26563C1.60547 1.02344 1.89062 0.867193 2.21875 0.79688C2.54688 0.718755 2.87109 0.718755 3.19141 0.79688C3.51172 0.867193 3.78516 1.01563 4.01172 1.24219L10.1172 7.33594L16.1992 1.25391C16.5508 0.894536 16.9883 0.718755 17.5117 0.726568C18.043 0.73438 18.4883 0.917974 18.8477 1.27735C19.2148 1.63672 19.3984 2.08204 19.3984 2.61329C19.3984 3.13672 19.2227 3.57422 18.8711 3.92579L12.7891 10.0078L18.8711 16.1016C19.2227 16.4609 19.3945 16.9023 19.3867 17.4258C19.3867 17.9492 19.207 18.3906 18.8477 18.75C18.4883 19.1172 18.043 19.3008 17.5117 19.3008C16.9883 19.3086 16.5508 19.1367 16.1992 18.7852L10.1172 12.6797L4.01172 18.7852C3.78516 19.0117 3.51172 19.1641 3.19141 19.2422C2.87109 19.3203 2.54688 19.3203 2.21875 19.2422C1.89062 19.1641 1.60547 19.0039 1.36328 18.7617Z",fill:"black"},null,2)]))}},Fr={class:"cursor-pointer rounded-full flex items-center justify-center tw-scale-on-hover close-bg-transition hover:before:bg-dark/5"},Dt={__name:"ModalCloseBold",props:["iconSize","iconClass","fillClass"],setup(e){return(c,a)=>(o(),l("div",Fr,[x(Br,{class:N(e.iconClass),fillClass:e.fillClass,width:e.iconSize.width,height:e.iconSize.height},null,8,["class","fillClass","width","height"])]))}},He={NOT_STARTED:0,RECORDING:1,STOPPED:2};const Wr=["r","cx","cy"],Nr=["r","cx","cy"],Ar={__name:"CircularProgress",props:{size:{type:Number,default:30},color:{type:String,default:"#222222"},bgColor:{type:String,default:"#dddddd"},strokeWidth:{type:Number,default:10},duration:{type:Number,default:30}},setup(e){const c=e;let a=2*Math.PI*(c.size/2-c.strokeWidth);return(n,u)=>(o(),l("div",{id:"countdown",class:"relative text-center -scale-x-100",style:Ve({width:`${e.size}px`,height:`${e.size}px`})},[(o(),l("svg",{style:Ve({width:`${e.size}px`,height:`${e.size}px`})},[r("circle",{style:Ve({strokeWidth:`${e.strokeWidth}px`,stroke:`${e.bgColor}`}),class:"fill-none",r:e.size/2-e.strokeWidth,cx:e.size/2,cy:e.size/2},null,12,Wr),r("circle",{style:Ve({strokeWidth:`${e.strokeWidth}px`,stroke:`${e.color}`,strokeDasharray:`${t(a)}px`,strokeDashoffset:`${t(a)}px`,animationDuration:`${e.duration}s`}),class:"fill-none",r:e.size/2-e.strokeWidth,cx:e.size/2,cy:e.size/2},null,12,Nr)],4))],4))}},Zr=Le(Ar,[["__scopeId","data-v-7764a83d"]]),Gr={},qr={width:"14",height:"17",viewBox:"0 0 14 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Yr=r("path",{d:"M0.320312 9.67969C0.320312 9.40365 0.40625 9.18229 0.578125 9.01562C0.75 8.84375 0.96875 8.75781 1.23438 8.75781C1.5 8.75781 1.71354 8.84375 1.875 9.01562C2.03646 9.18229 2.11719 9.40365 2.11719 9.67969C2.11719 10.3568 2.24219 10.9922 2.49219 11.5859C2.7474 12.1797 3.09896 12.7005 3.54688 13.1484C4 13.5964 4.52083 13.9479 5.10938 14.2031C5.70312 14.4531 6.33854 14.5781 7.01562 14.5781C7.69792 14.5781 8.33333 14.4531 8.92188 14.2031C9.51562 13.9479 10.0365 13.5964 10.4844 13.1484C10.9323 12.7005 11.2839 12.1797 11.5391 11.5859C11.7943 10.9922 11.9219 10.3568 11.9219 9.67969C11.9219 8.98698 11.7969 8.34115 11.5469 7.74219C11.2969 7.14323 10.9505 6.61979 10.5078 6.17188C10.0651 5.72396 9.54948 5.375 8.96094 5.125C8.3776 4.86979 7.7474 4.74219 7.07031 4.74219C6.88281 4.74219 6.70052 4.75 6.52344 4.76562C6.35156 4.77604 6.1901 4.79688 6.03906 4.82812L7.78906 6.55469C7.86719 6.63281 7.92708 6.72135 7.96875 6.82031C8.01042 6.91406 8.03125 7.02083 8.03125 7.14062C8.03125 7.38542 7.94792 7.59375 7.78125 7.76562C7.61458 7.9375 7.40885 8.02344 7.16406 8.02344C6.91406 8.02344 6.71094 7.9401 6.55469 7.77344L3.53125 4.72656C3.34375 4.53385 3.25 4.3125 3.25 4.0625C3.25 3.8125 3.34375 3.59635 3.53125 3.41406L6.55469 0.34375C6.71094 0.166667 6.91406 0.078125 7.16406 0.078125C7.40885 0.078125 7.61458 0.166667 7.78125 0.34375C7.94792 0.520833 8.03125 0.731771 8.03125 0.976562C8.03125 1.09635 8.01042 1.20573 7.96875 1.30469C7.92708 1.39844 7.86979 1.48438 7.79688 1.5625L6.25 3.08594C6.375 3.0599 6.50781 3.04167 6.64844 3.03125C6.78906 3.01562 6.92969 3.00781 7.07031 3.00781C7.9974 3.00781 8.86198 3.17969 9.66406 3.52344C10.4714 3.86719 11.1771 4.34375 11.7812 4.95312C12.3906 5.55729 12.8646 6.26302 13.2031 7.07031C13.5469 7.8776 13.7188 8.7474 13.7188 9.67969C13.7188 10.6068 13.5443 11.4766 13.1953 12.2891C12.8516 13.0964 12.3724 13.8073 11.7578 14.4219C11.1432 15.0365 10.4323 15.5156 9.625 15.8594C8.81771 16.2083 7.94792 16.3828 7.01562 16.3828C6.09375 16.3828 5.22656 16.2083 4.41406 15.8594C3.60677 15.5156 2.89583 15.0365 2.28125 14.4219C1.66667 13.8073 1.1849 13.0964 0.835938 12.2891C0.492188 11.4766 0.320312 10.6068 0.320312 9.67969Z",fill:"black"},null,-1),Kr=[Yr];function Xr(e,c){return o(),l("svg",qr,Kr)}const Qr=Le(Gr,[["render",Xr]]),Jr={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},eo=r("mask",{id:"mask0_4_82",style:{"mask-type":"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"20"},[r("rect",{width:"20",height:"20",fill:"#D9D9D9"})],-1),to={mask:"url(#mask0_4_82)"},ao={__name:"InfoIcon",props:["fillClass"],setup(e){return(c,a)=>(o(),l("svg",Jr,[eo,r("g",to,[r("path",{class:N(e.fillClass),d:"M9.45835 13.7916H10.5416V9H9.45835V13.7916ZM9.9956 7.7404C10.1615 7.7404 10.302 7.68431 10.4171 7.57212C10.5322 7.45993 10.5897 7.32091 10.5897 7.15506C10.5897 6.98922 10.5336 6.84873 10.4214 6.7336C10.3093 6.61849 10.1702 6.56094 10.0044 6.56094C9.83853 6.56094 9.69805 6.61703 9.58294 6.72923C9.46783 6.84142 9.41027 6.98044 9.41027 7.14629C9.41027 7.31214 9.46637 7.45262 9.57856 7.56773C9.69074 7.68284 9.82976 7.7404 9.9956 7.7404ZM10.0071 17.5833C8.96392 17.5833 7.98142 17.386 7.05965 16.9912C6.13785 16.5965 5.33103 16.0534 4.63919 15.3619C3.94733 14.6703 3.40394 13.8642 3.00904 12.9434C2.61414 12.0226 2.41669 11.0388 2.41669 9.99185C2.41669 8.94494 2.61405 7.96406 3.00877 7.04923C3.40349 6.13438 3.94662 5.33104 4.63815 4.63919C5.32969 3.94733 6.13585 3.40394 7.05662 3.00904C7.9774 2.61414 8.96124 2.41669 10.0081 2.41669C11.0551 2.41669 12.0359 2.61405 12.9508 3.00877C13.8656 3.40349 14.669 3.94662 15.3608 4.63815C16.0527 5.32969 16.5961 6.13422 16.991 7.05175C17.3859 7.96928 17.5833 8.94965 17.5833 9.99285C17.5833 11.0361 17.386 12.0186 16.9912 12.9404C16.5965 13.8621 16.0534 14.669 15.3619 15.3608C14.6703 16.0527 13.8658 16.5961 12.9482 16.991C12.0307 17.3859 11.0504 17.5833 10.0071 17.5833ZM10 16.5C11.8056 16.5 13.3403 15.8681 14.6042 14.6042C15.8681 13.3403 16.5 11.8056 16.5 10C16.5 8.19444 15.8681 6.65972 14.6042 5.39583C13.3403 4.13194 11.8056 3.5 10 3.5C8.19444 3.5 6.65972 4.13194 5.39583 5.39583C4.13194 6.65972 3.5 8.19444 3.5 10C3.5 11.8056 4.13194 13.3403 5.39583 14.6042C6.65972 15.8681 8.19444 16.5 10 16.5Z",fill:"#A8200D"},null,2)])]))}},ro="https://cdn.buymeacoffee.com/static/prod/8.9.0/build/assets/beep-ff8a399b.mp3";const We=e=>(zt("data-v-f54b974b"),e=e(),Ht(),e),oo=["innerHTML"],lo={class:"rounded flex items-center justify-center relative"},so=["src"],no={key:0,class:"countdown absolute text-white font-cr-regular text-[128px] leading-[154px] z-10 transform-gpu ease-in-out duration-300"},io={key:0,class:"h-[258px] max-w-[350px] font-cr-regular text-sm text-center flex items-center justify-center absolute z-10"},uo={class:"p-2 border shadow-md bg-white rounded-xl"},co={class:"tw-bg-grey71/10 w-[471px] h-[772px] max-h-[95vh] xs:w-screen xs:h-screen xs:max-h-screen rounded-3xl xs:rounded-none relative flex items-center justify-center focus-visible:outline-none select-none shadow-[0_4px_16px_rgba(0,0,0,0.1)] overflow-hidden"},mo={class:"absolute flex items-center justify-center"},fo={key:0,class:"flex flex-col items-center justify-center bg-dark rounded-3xl px-[33px] py-12 max-w-[317px]"},po=We(()=>r("svg",{width:"59",height:"48",viewBox:"0 0 59 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{opacity:"0.5",d:"M11.2188 41.9688C8.96875 41.9688 7.21875 41.3438 5.96875 40.0938C4.71875 38.8594 4.09375 37.125 4.09375 34.8906V13.1406C4.09375 12.625 4.13281 12.1172 4.21094 11.6172C4.30469 11.1172 4.42969 10.7031 4.58594 10.375L36.1797 41.9688H11.2188ZM35.3359 6.03906C37.5859 6.03906 39.3047 6.65625 40.4922 7.89062C41.6797 9.10938 42.2734 10.8359 42.2734 13.0703V33.2031C42.2734 33.75 42.2422 34.2812 42.1797 34.7969C42.1172 35.2969 42.0312 35.75 41.9219 36.1562L11.7812 6.03906H35.3359ZM45.1094 30.5312V17.4531L53.1484 10.5859C53.5391 10.2578 53.9375 10 54.3438 9.8125C54.7656 9.60938 55.1797 9.50781 55.5859 9.50781C56.3984 9.50781 57.0547 9.78906 57.5547 10.3516C58.0703 10.8984 58.3281 11.6172 58.3281 12.5078V35.5C58.3281 36.3906 58.0703 37.1094 57.5547 37.6562C57.0547 38.2031 56.3984 38.4766 55.5859 38.4766C55.1797 38.4766 54.7656 38.3828 54.3438 38.1953C53.9375 38.0078 53.5391 37.75 53.1484 37.4219L45.1094 30.5312ZM44.7578 46.9609L1.16406 3.41406C0.882812 3.13281 0.742188 2.77344 0.742188 2.33594C0.742188 1.89844 0.882812 1.53125 1.16406 1.23438C1.47656 0.9375 1.85156 0.789062 2.28906 0.789062C2.72656 0.789062 3.09375 0.9375 3.39062 1.23438L46.9375 44.7578C47.2344 45.0703 47.3828 45.4375 47.3828 45.8594C47.3984 46.2812 47.25 46.6484 46.9375 46.9609C46.6406 47.2578 46.2734 47.4062 45.8359 47.4062C45.4141 47.4062 45.0547 47.2578 44.7578 46.9609Z",fill:"white"})],-1)),ho=We(()=>r("div",{class:"text-white text-center font-cr-medium text-[16px] leading-6 mt-7 mb-6"}," To record video, your browser will need to request access to your camera and microphone. ",-1)),vo={key:0,class:"absolute top-2 !rounded-2xl left-10 w-[210px] flex items-center !p-3 !bg-black/80 -translate-y-1"},go=["innerHTML"],_o={key:2,class:"fixed md:absolute bottom-9 left-1/2 transform -translate-x-1/2 flex items-center justify-center"},yo={key:0,class:"flex flex-col items-center justify-center"},bo=We(()=>r("h3",{"aria-hidden":!0,class:"text-white font-cr-medium text-[16px] leading-5 mb-4"},[q("Hit "),r("span",{class:"text-primary uppercase"},"Record"),q(" to start!")],-1)),xo=["aria-label"],wo={key:1,class:"flex flex-col items-center justify-center"},Co={class:"timer mb-5 flex items-center justify-center"},$o=We(()=>r("div",{class:"bg-primary w-2.5 aspect-square rounded-full"},null,-1)),ko={class:"text-white font-cr-medium text-[14px] leading-4 ml-2"},Mo=["aria-label"],To={class:"absolute"},So=We(()=>r("div",{class:"w-[67px] aspect-square rounded-full bg-primary"},null,-1)),Po=We(()=>r("h3",{"aria-hidden":!0,class:"text-white mt-3"},"Finish",-1)),Ro={key:0,class:"flex flex-col items-center top-11 justify-center absolute transform-gpu -translate-x-[82px]"},Do=["aria-label"],Uo=We(()=>r("h3",{"aria-hidden":!0,class:"text-white mt-3"},"Restart",-1)),Vo={__name:"VideoRecorderModal",props:["current_user_data","creator_data","videoNotifId","videoMessageType"],emits:["getVideoClip"],setup(e,{emit:c}){const a=e;let n=s(null),u=s([]),m=s(null),f=s(null),k=s(null),p=s(null),$=null,S=s(!1),w=s(30),T=s(3),y=s(He.NOT_STARTED),M=s(""),E=s(528),U=s(720),B=s(!1),b=s(!1),z=s(null),I=s("video/mp4"),Y=s(null),ie=s(null),se=s(null),ee=s(!1),he=s(null),re=s(!1),ge=s(null);Oe(()=>{i.isIOSDevice()||V(),Te.IsBrowser&&document.addEventListener("click",Ce)}),jt(()=>{_(),Te.IsBrowser&&document.removeEventListener("click",Ce)});const C=()=>V(),V=async()=>{b.value=!0,await _(),f.value.src="",m.value.src="",u.value=[];let P={};i.isMobileDevice()||i.isIOSDevice()?P={video:{facingMode:"user"},audio:!0}:P={video:{aspectRatio:{ideal:E.value/U.value},facingMode:"user",width:{ideal:E.value},height:{ideal:U.value}},audio:!0};try{$=await navigator.mediaDevices.getUserMedia(P),B.value=!0,f.value.srcObject=$,m.value.srcObject=$,f.value.play(),m.value.play(),M.value=""}catch(Z){Q(Z)}},Q=P=>{P.name==="NotAllowedError"||P.name==="PermissionDeniedError"?M.value="Permission denied: Unable to access camera and/or microphone.":P.name==="NotFoundError"||P.name==="DevicesNotFoundError"?M.value="No camera device found.":M.value=`Error accessing media devices: ${P.message}`},X=async()=>{if(await new Promise(Z=>{ee.value=!0,T.value=3,he.value.play(),se=setInterval(()=>{T.value--,T.value<=0?(clearInterval(se),ee.value=!1,Z()):he.value.play()},1e3)}),u.value=[],$||await V(),MediaRecorder.isTypeSupported("video/webm"))n.value=new MediaRecorder($,{mimeType:"video/webm"}),I.value="video/webm";else if(MediaRecorder.isTypeSupported("video/mp4"))n.value=new MediaRecorder($,{mimeType:"video/mp4"}),I.value="video/mp4";else{M.value="Video recording is not supported in this browser";return}y.value=He.RECORDING,Y.value=le(f.value),w.value=30,ie=setInterval(()=>{w.value--,w.value<=0&&(W(),clearInterval(ie))},1e3),n.value.ondataavailable=Z=>{Z.data.size>0&&u.value.push(Z.data)},n.value.start()},_=async()=>{clearInterval(ie),clearInterval(se),n.value&&n.value.state!=="inactive"&&n.value.stop(),$&&($.getTracks().forEach(P=>P.stop()),$=null),f.value&&f.value.srcObject&&(f.value.srcObject.getTracks().forEach(P=>P.stop()),f.value.srcObject=null,m.value.srcObject=null)},W=async()=>{S.value=!0,_(),await new Promise(P=>{n.value.onstop=()=>{P()}}),u.value.length!==0&&(k.value=new Blob(u.value,{type:"video/mp4"}),p.value=URL.createObjectURL(k.value),y.value=He.STOPPED,me())},ve=async()=>{S.value||(y.value=He.NOT_STARTED,u.value=[],await V())},le=()=>{const P=document.createElement("canvas");P.width=f.value.videoWidth,P.height=f.value.videoHeight,P.getContext("2d").drawImage(f.value,0,0,P.width,P.height);let ne=P.toDataURL("image/png");return i.dataURLToBlob(ne)},me=async()=>{S.value=!0,c("getVideoClip",{video_data:k.value,thumbnail_data:Y.value,notif_id:a.videoNotifId,message_type:a.videoMessageType,mimeType:I.value,video_file_size:k.value.size})},fe=()=>`
        <h1 class="flex gap-2">
            <svg aria-hidden="true" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.7998 13.9756C5.88835 13.9756 5.03158 13.8001 4.22949 13.4492C3.43197 13.1029 2.72786 12.6243 2.11719 12.0137C1.50651 11.403 1.02572 10.6989 0.674805 9.90137C0.328451 9.09928 0.155273 8.24251 0.155273 7.33105C0.155273 6.42415 0.328451 5.56966 0.674805 4.76758C1.02116 3.96549 1.49967 3.25911 2.11035 2.64844C2.72559 2.03776 3.43197 1.55924 4.22949 1.21289C5.03158 0.866536 5.88607 0.693359 6.79297 0.693359C7.69987 0.693359 8.55436 0.866536 9.35645 1.21289C10.1585 1.55924 10.8649 2.03776 11.4756 2.64844C12.0863 3.25911 12.5648 3.96549 12.9111 4.76758C13.262 5.56966 13.4375 6.42415 13.4375 7.33105C13.4375 8.24251 13.2643 9.09928 12.918 9.90137C12.5716 10.6989 12.0931 11.403 11.4824 12.0137C10.8717 12.6243 10.1654 13.1029 9.36328 13.4492C8.5612 13.8001 7.70671 13.9756 6.7998 13.9756ZM6.7998 12.7588C7.55176 12.7588 8.25586 12.6175 8.91211 12.335C9.56836 12.057 10.1449 11.6696 10.6416 11.1729C11.1383 10.6761 11.5257 10.0996 11.8037 9.44336C12.0817 8.78711 12.2207 8.08301 12.2207 7.33105C12.2207 6.5791 12.0817 5.875 11.8037 5.21875C11.5257 4.5625 11.1383 3.986 10.6416 3.48926C10.1449 2.99251 9.56608 2.60514 8.90527 2.32715C8.24902 2.04915 7.54492 1.91016 6.79297 1.91016C6.04102 1.91016 5.33691 2.04915 4.68066 2.32715C4.02897 2.60514 3.45475 2.99251 2.95801 3.48926C2.46126 3.986 2.07389 4.5625 1.7959 5.21875C1.5179 5.875 1.37891 6.5791 1.37891 7.33105C1.37891 8.08301 1.5179 8.78711 1.7959 9.44336C2.07389 10.0996 2.46126 10.6761 2.95801 11.1729C3.45475 11.6696 4.03125 12.057 4.6875 12.335C5.34375 12.6175 6.04785 12.7588 6.7998 12.7588ZM6.7998 10.5371C6.34408 10.5371 5.94531 10.4574 5.60352 10.2979C5.26628 10.1338 5.00195 9.94694 4.81055 9.7373C4.6237 9.52767 4.53027 9.35221 4.53027 9.21094C4.53027 9.13346 4.56217 9.07878 4.62598 9.04688C4.68978 9.01497 4.75814 9.01725 4.83105 9.05371C5.06348 9.17676 5.33008 9.29753 5.63086 9.41602C5.9362 9.53451 6.32585 9.59375 6.7998 9.59375C7.26921 9.59375 7.6543 9.53451 7.95508 9.41602C8.26042 9.29753 8.53158 9.17676 8.76855 9.05371C8.83691 9.01725 8.90072 9.01497 8.95996 9.04688C9.02376 9.07878 9.05566 9.13346 9.05566 9.21094C9.05566 9.35221 8.95996 9.52767 8.76855 9.7373C8.58171 9.94694 8.31738 10.1338 7.97559 10.2979C7.63835 10.4574 7.24642 10.5371 6.7998 10.5371ZM4.87891 6.75C4.68294 6.75 4.50749 6.66797 4.35254 6.50391C4.20215 6.33984 4.12695 6.12793 4.12695 5.86816C4.12695 5.6084 4.20215 5.39648 4.35254 5.23242C4.50293 5.06836 4.67839 4.98633 4.87891 4.98633C5.08854 4.98633 5.26855 5.06836 5.41895 5.23242C5.57389 5.39648 5.65137 5.6084 5.65137 5.86816C5.65137 6.12793 5.57389 6.33984 5.41895 6.50391C5.264 6.66797 5.08398 6.75 4.87891 6.75ZM8.70703 6.75C8.50651 6.75 8.32878 6.66797 8.17383 6.50391C8.02344 6.33984 7.94824 6.12793 7.94824 5.86816C7.94824 5.6084 8.02344 5.39648 8.17383 5.23242C8.32422 5.06836 8.50195 4.98633 8.70703 4.98633C8.91667 4.98633 9.09668 5.06836 9.24707 5.23242C9.39746 5.39648 9.47266 5.6084 9.47266 5.86816C9.47266 6.12793 9.39518 6.33984 9.24023 6.50391C9.08984 6.66797 8.91211 6.75 8.70703 6.75Z" fill="#FFDD00"/>
            </svg>
            <span class="font-cr-book text-[14px] leading-4">Tips</span>
        </h1>
        <ul class="list-disc list-inside text-[12px] leading-[18px] font-cr-regular">
            <li>Be kind and respectful</li>
            <li>Keep it family-friendly</li>
            <li>Respect everyone's privacy</li>
            <li>Spread positivity!</li>
        </ul>
    `,Ce=P=>{ge.value&&!ge.value.contains(P.target)&&(re.value=!1)};return(P,Z)=>(o(),l("div",{ref:"recorderModalContainer",tabindex:"0",onKeyup:Z[3]||(Z[3]=et(ne=>P.$emit("close"),["esc"]))},[x(Be,{tabindex:"0",outerClasses:"!overflow-y-hidden h-fill-available",modalBgClass:"fixed inset-0 bg-black fade-in-modal",modalClass:"w-full flex !my-0 justify-center h-fill-available",onClose:Z[2]||(Z[2]=ne=>P.$emit("close"))},{default:F(()=>[r("video",{ref_key:"bgVideo",ref:m,class:"w-full absolute top-0 left-0 h-full blur-[6rem] bg-no-repeat bg-center bg-cover object-cover bg-black -scale-x-100",playsinline:"","webkit-playsinline":"",muted:""},null,512),r("div",{style:Ve({backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0.75))"}),class:"w-full absolute top-0 left-0 h-full bg-no-repeat bg-center bg-cover"},null,4),r("div",{ref_key:"videoNoteTips",ref:z,tabindex:"0",innerHTML:fe(),class:"!rounded-2xl bg-black/25 absolute hidden md:flex flex-col gap-2 top-[8px] left-[9px] text-white p-4"},null,8,oo),x(Dt,{fillClass:"fill-dark",role:"button",tabindex:"0","aria-label":P.$t("lang.a11y.close_popup"),onClick:Z[0]||(Z[0]=ne=>P.$emit("close")),class:"w-12 h-12 z-100 fixed md:absolute right-[30px] top-6 xs:right-3 xs:top-2 bg-white hover:bg-white/80 shadow-boxV1",iconSize:{width:18.57,height:18.57}},null,8,["aria-label"]),r("div",lo,[r("audio",{ref_key:"counterSoundElem",ref:he,src:t(ro),hidden:""},null,8,so),x(Je,{name:"fade-slide",mode:"out-in"},{default:F(()=>[t(ee)?(o(),l("div",no,h(t(T)),1)):d("",!0)]),_:1}),t(M)?(o(),l("div",io,[r("span",uo,h(t(M)),1)])):d("",!0),r("div",co,[Qe(r("video",{ref_key:"video",ref:f,class:"w-full xs:max-h-full max-h-[95vh] h-full object-cover focus-visible:outline-none -scale-x-100",muted:"","webkit-playsinline":"",playsinline:""},null,512),[[ot,t(B)]]),r("div",mo,[t(b)&&!t(B)||t(S)?(o(),D(la,{key:0,loaderClass:"tw-grey-circle-loader"})):d("",!0)]),t(b)?d("",!0):(o(),l("div",fo,[po,ho,r("button",{class:"bg-primary hover:bg-primary/80 rounded-full font-cr-medium px-5 py-3",onClick:C},"Request permissions")])),t(y)==t(He).NOT_STARTED&&!t(ee)?(o(),l("div",{key:1,class:"fixed md:hidden top-5 left-5",ref_key:"tooltipContainer",ref:ge},[r("div",{class:"cursor-default relative flex items-center text-white",onClick:Z[1]||(Z[1]=ne=>pe(re)?re.value=!t(re):re=!t(re))},[x(ao,{fillClass:"fill-white",class:"w-9 h-9"}),x(Je,{name:"fade-slide"},{default:F(()=>[t(re)?(o(),l("div",vo,[r("div",{class:"font-normal text-sm leading-5 font-cr-regular",innerHTML:fe()},null,8,go)])):d("",!0)]),_:1})])],512)):d("",!0),t(B)&&!t(S)&&!t(ee)?(o(),l("div",_o,[t(y)==t(He).NOT_STARTED?(o(),l("div",yo,[bo,r("button",{"aria-label":P.$t("lang.a11y.start_recording"),onClick:X,class:"w-[67px] aspect-square rounded-full bg-primary outline outline-[10px] hover:outline-[9px] outline-white/[0.8] transition-all transform-gpu duration-75 ease-linear z-10"},null,8,xo)])):d("",!0),t(y)==t(He).RECORDING?(o(),l("div",wo,[r("div",Co,[$o,r("span",ko,"0:"+h(t(w)),1)]),r("button",{"aria-label":P.$t("lang.a11y.stop_recording"),onClick:W,class:"relative flex items-center justify-center z-10"},[r("div",To,[x(Zr,{duration:30,size:80,strokeWidth:10,color:"#00000040",bgColor:"#ffdd00"})]),So],8,Mo),Po])):d("",!0),x(Je,{name:"fade-slide"},{default:F(()=>[t(y)==t(He).RECORDING?(o(),l("div",Ro,[r("button",{"aria-label":P.$t("lang.a11y.restart_recording"),onClick:ve,class:"w-12 aspect-square rounded-full bg-white flex items-center justify-center hover:bg-[#F5F5F5]"},[x(Qr,{class:"w-6 h-6"})],8,Do),Uo])):d("",!0)]),_:1})])):d("",!0)])])]),_:1})],544))}},Lo=Le(Vo,[["__scopeId","data-v-f54b974b"]]),Io={},Oo={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eo=r("rect",{width:"40",height:"40",rx:"20",fill:"black","fill-opacity":"0.4"},null,-1),jo=r("path",{d:"M14.6667 10.6667V29.3334L29.3334 20L14.6667 10.6667Z",fill:"white"},null,-1);function zo(e,c){return o(),l("svg",Oo,[Eo,q(),jo])}const nt=Le(Io,[["render",zo]]),Ho={},Bo={width:"16",height:"13",viewBox:"0 0 16 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Fo=r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.87813 6.39991C4.87813 8.10657 6.2752 9.49518 8.00008 9.49518C9.71715 9.49518 11.1142 8.10657 11.1142 6.39991C11.1142 4.68548 9.71715 3.29688 8.00008 3.29688C6.2752 3.29688 4.87813 4.68548 4.87813 6.39991ZM12.5893 1.63685C13.9551 2.69188 15.118 4.23564 15.9532 6.16727C16.0156 6.31467 16.0156 6.48533 15.9532 6.62497C14.2829 10.4882 11.3093 12.8 8 12.8H7.9922C4.69073 12.8 1.71707 10.4882 0.0468293 6.62497C-0.0156098 6.48533 -0.0156098 6.31467 0.0468293 6.16727C1.71707 2.304 4.69073 0 7.9922 0H8C9.65463 0 11.2234 0.574061 12.5893 1.63685ZM8.00122 8.33001C9.07049 8.33001 9.94463 7.46117 9.94463 6.39838C9.94463 5.32783 9.07049 4.45898 8.00122 4.45898C7.90756 4.45898 7.8139 4.46674 7.72805 4.48226C7.69683 5.33559 6.99439 6.01826 6.12805 6.01826H6.08902C6.06561 6.14238 6.05 6.2665 6.05 6.39838C6.05 7.46117 6.92415 8.33001 8.00122 8.33001Z",fill:"#222222","fill-opacity":"0.25"},null,-1),Wo=[Fo];function No(e,c){return o(),l("svg",Bo,Wo)}const Ut=Le(Ho,[["render",No]]);const Ao={key:0,class:"flex items-center mb-3"},Zo={class:"ml-2 text-xs font-cr-regular text-grey71"},Go={class:"flex relative font-cr-regular"},qo={class:"w-full flex items-center flex-wrap mx-3"},Yo={class:"flex items-center w-full"},Ko={class:"w-full"},Xo={class:"flex"},Qo=["href"],Jo=r("div",null,"/",-1),el=["innerHTML"],tl={key:0,class:"inline-block"},al={key:0,class:"bg-pageTheme1 px-3 py-2 rounded-lg mt-1"},rl=["innerHTML"],ol=["src"],ll=["aria-label"],sl={class:"w-full h-full rounded-xl object-cover object-center",alt:"video",preload:"none"},nl=["src"],il=["src"],dl={key:3,class:"flex mt-2 items-center"},ul={key:1,class:"relative"},cl={class:"p-4 pt-0"},ml={class:"flex"},fl={class:"relative"},pl={key:2,class:"flex mt-2"},hl={key:1,class:"w-full"},vl={class:"relative w-full mr-2 xs:mr-0"},gl={class:"relative w-fit ml-3 mb-3"},_l={class:"relative"},yl={class:"flex justify-end mt-3"},bl=["aria-label","aria-expanded"],xl={class:"w-full block p-[6px]",role:"menu","aria-modal":"true"},Vt={__name:"Timeline_v1",props:["creator_data","trans","current_user_data","deleteCommentConfirmed","deleteTransConfirmed","deletableTransId","deleteReplyConfirmed","transIndex","recordedVideoData","isMadePrivate","fromPage"],emits:["openDeleteConfirmModal","actionSuccess","openShareModal","openVideoPlayModal","openVideoReplyModal","reloadTransactions","deletedTrans","toggleVideoRecorderModal","makeTransPrivate"],setup(e,{emit:c}){const a=e;let n=s(a.current_user_data?a.current_user_data.data:""),u=s(a.trans.support_id!=""&&(a.trans.support_visibility==1||a.trans.support_visibility=="")&&a.trans.msg_hidden!=1),m=s(!!((a.creator_data.own_page||a.trans.fk_user_id!=""&&a.current_user_data&&a.trans.fk_user_id==a.current_user_data.data.user_id)&&(a.trans.support_visibility==0||a.trans.msg_hidden==1))),f=s(a.trans.support_note?i.trimBrTags(a.trans.support_note):""),k=s(a.trans.support_note?i.trimBrTags(a.trans.support_note):""),p=s(a.trans.support_gif?a.trans.support_gif:""),$=s(a.trans.support_gif?a.trans.support_gif:""),S=s(a.trans.support_video?a.trans.support_video:""),w=s(a.trans.support_video??""),T=s(""),y=s(!1),M=s(!1),E=s(!1),U=s(!1),B=s(!1),b=s(!1),z=s(U?k:""),I=s(!1),Y=s(),ie=s(54),se=s(0),ee=s(a.trans.comments?a.trans.comments:[]),he=s(),re=s(0),ge=s(!1),C=s(!!(a.current_user_data&&(a.creator_data.own_page||a.trans.fk_user_id!=""&&a.trans.fk_user_id==a.current_user_data.data.user_id)&&a.trans.support_visibility==0&&a.trans.msg_hidden==1)),V=s(!a.trans.comments.length),Q=s(!1),X=s(a.recordedVideoData),_=s(a.trans.support_video?i.getUrlWithCdnPath(a.trans.support_video.video_path):""),W=s(a.trans.support_video?i.getUrlWithCdnPath(a.trans.support_video.thumbnail_path):"");Ue(()=>a.deletableTransId,g=>{se.value=g}),Ue(()=>a.deleteCommentConfirmed,g=>{g&&se.value==a.trans.id&&fe(a.trans.support_type=="Membership"||a.trans.support_type=="Monthly Supporter"?a.trans.subscription_id:a.trans.support_id,"delete")}),Ue(()=>a.recordedVideoData,g=>{X.value=g,_.value=g!=null&&g.video_data?URL.createObjectURL(g.video_data):_.value,W.value=g!=null&&g.thumbnail_data?URL.createObjectURL(g.thumbnail_data):W.value});let ve={twitter:Fe,instagram:ct,tiktok:ut};Ue(()=>a.deleteReplyConfirmed,g=>{g&&se.value==a.trans.id&&H(a.trans.id,re.value)});const le=g=>{var R=I.value?"reply":"message";R=="message"?(k.value=g,B.value=!1,g.replace(/\s/g,"").length>0?E.value=!0:E.value=!1):(Y.value=g,g.replace(/\s/g,"").length>0?(B.value=!1,b.value=!0):(B.value=!0,b.value=!1))},me=g=>{g=="close"?(U.value=!1,f.value==""&&(z.value=""),p.value==""&&($.value=""),S.value==""&&(w.value=""),f.value==""&&p.value==""&&S.value==""&&(B.value=!0,ie.value=54)):(f.value!=""&&(z.value=f.value,E.value=!0),p.value!=""&&($.value=p.value,E.value=!0),S.value!=""&&(w.value=S.value,E.value=!0,_.value=i.getUrlWithCdnPath(S.value.video_path),W.value=i.getUrlWithCdnPath(S.value.thumbnail_path)),U.value=!0)},fe=async(g,R)=>{if(R=="update"&&(B.value||Q.value))return;let oe=i.trimBrTags(k.value);if(oe.replace(/\s/g,"").length>0||$.value||w.value&&!de.value){y.value=!0;let J={_method:"POST",type:R,msg:oe,gif:$.value,video:w.value};if(a.trans.support_type=="Membership"||a.trans.support_type=="Monthly Supporter")var K=`api/v1/comments/${g}/updateSubMsg`;else var K=`api/v1/comments/${g}/update`;await axios.post(K,J).then($e=>{$e.data.data.success&&(R=="delete"?je.visit(je.page.url,{preserveScroll:!0}):(f.value=oe,p.value=$.value,S.value=w.value,U.value=!1,y.value=!1))}).catch($e=>{y.value=!1})}},Ce=async()=>{let g={support_note_pinned:!a.trans.is_pinned};await axios.post(`api/v1/comments/${a.trans.support_id}/pin`,g).then(R=>{R.data.data.success&&c("reloadTransactions","pinned")}).catch(R=>{})},P=async()=>{let g={id:a.trans.support_id,msg_hidden:!a.trans.msg_hidden};await axios.post(`api/v1/comments/${a.trans.support_id}/hide`,g).then(R=>{R.data.data.success&&(u.value=!u.value,m.value=!0,je.visit(je.page.url,{preserveScroll:!0}))}).catch(R=>{})},Z=async()=>{let g={support_visibility:C.value};await axios.post(`api/v1/${a.trans.support_id}/updateVisibility`,g).then(R=>{R.data.data.success&&c("makeTransPrivate",a.trans.id,!C.value)}).catch(R=>{})};Ue(()=>a.isMadePrivate,g=>{g.id===a.trans.id&&(C.value=g.val)},{deep:!0});function ne(g){let R=i.linkify(i.sanitizeHtml(g));const K=new DOMParser().parseFromString(R,"text/html");return K.querySelectorAll("a").forEach(Ie=>{Ie.textContent.startsWith("@")&&(Ie.textContent=Ie.textContent.substring(1))}),new XMLSerializer().serializeToString(K.body)}let de=ke(()=>{var g;return(X==null?void 0:X.value)&&((g=X==null?void 0:X.value)==null?void 0:g.message_type)===Ee.REPLY});const Me=ke(()=>ne(a.trans.support_message)),xe=ke(()=>G(Me.value)),De=async g=>{var oe,K,J,$e,Pe,Ie,qe,Ye;if(!Q.value&&(((oe=Y.value)==null?void 0:oe.replace(/\s/g,"").length)>0||(K=T.value)!=null&&K.video_path&&de.value)){M.value=!0;let Ke={video_url:de?(J=T.value)==null?void 0:J.video_path:"",thumbnail_url:de?($e=T.value)==null?void 0:$e.thumbnail_path:"",filetype:de?(Ie=(Pe=T.value)==null?void 0:Pe.video_filetype)==null?void 0:Ie.replace(/^video\//,""):"",filesize:de?(qe=T.value)==null?void 0:qe.video_filesize:""};if(Y.value&&((Ye=Y.value)!=null&&Ye.trim())&&(Ke.comment=Y.value),a.trans.support_type=="Membership"||a.trans.support_type=="Monthly Supporter")var R=`api/v1/membership/${g}/comments`;else var R=`api/v1/coffees/${g}/comments`;await axios.post(R,Ke).then(ze=>{ze.data.data&&(ze.data.data.message||ze.data.data.video_url)&&(ee.value.push(ze.data.data),I.value=!1,Y.value="",M.value=!1,V.value=!1)}).catch(ze=>{})}},H=async(g,R)=>{await axios.delete(`api/v1/comments/${g}/replies/${R}`).then(oe=>{oe.data.data.success&&setTimeout(()=>{ee.value=ee.value.filter(function(K){return K.id!==R}),c("actionSuccess",!0),re.value=0},10)}).catch(oe=>{})},A=()=>{c("openShareModal",a.trans.notification_id,a.trans)},te=g=>{ge.value=g},_e=ke(()=>!a.creator_data.own_page&&a.trans.fk_user_id!==n.value.user_id&&!f.value||!a.creator_data.own_page&&a.trans.fk_user_id!==n.value.user_id),L=g=>{$.value=g},O=()=>{X.value=null,Q.value=!1,w.value="",T.value="",$.value||w.value||z.value||(E.value=!1),_.value="",W.value=""},ae=g=>{let R={thumbnail:W.value};c("openVideoPlayModal",_.value,R,!0)},be=g=>{c("toggleVideoRecorderModal",a.trans.notification_id,g)},v=g=>{g!=null&&g.video_data&&(de.value?T.value={video_path:g.video_data.path,thumbnail_path:g.thumbnail_data.path??"",message_type:g.message_type,video_filesize:g.video_filesize,video_filetype:g.video_mimetype}:w.value={video_path:g.video_data.path,thumbnail_path:g.thumbnail_data.path??""},_.value=g.video_data.full_path,W.value=g.thumbnail_data.full_path,Q.value=!1)},j=g=>{Q.value=g};function G(g){const K=new DOMParser().parseFromString(g,"text/html").querySelector("a"),J=K?K.href:null;if(!J)return null;const $e={twitter:"x.com",tiktok:"tiktok.com",instagram:"instagram.com"};for(const[Pe,Ie]of Object.entries($e))if(J.includes(Ie))return{link:J,component:Pe};return null}return(g,R)=>{var oe;return o(),l("div",{class:N(["minxs:pb-4 xs:pb-4 relative",[e.trans.is_pinned?"pt-4":"pt-2"]])},[t(C)?(o(),l("div",Ao,[x(Ut),r("span",Zo,h(e.creator_data.own_page?g.$t("lang.home.only_visible_to_you_and_supporter"):g.$t("lang.home.only_visible_to_you_and_creator")),1)])):d("",!0),r("div",Go,[r("div",{class:N(["bg-white flex-shrink-0 z-10",[t(ee).length>0?"h-9 flex items-start":""]])},[e.trans.profile_picture?(o(),D(Re,{key:0,src:e.trans.profile_picture,alt:e.trans.profile_full_name,width:40,height:40,intrinsicSize:200,imageClass:"w-10 h-10 xs:w-8 xs:h-8 rounded-full relative z-1"},null,8,["src","alt"])):d("",!0)],2),r("div",qo,[r("div",Yo,[e.trans.is_pinned==1?(o(),l("div",{key:0,class:N([[t(C)?"left-0.5 top-[-47px] minxs:top-[-52px]":"minxs:left-[50px] left-[43px] -top-[15px]"],"absolute flex text-grey71 minxs:text-xs text-xs font-cr-book items-center"])},[x(Ct,{"aria-hidden":"true",fillClass:"fill-grey71",width:"10",class:"mr-1"}),q(" "+h(g.$t("lang.post.pinned")),1)],2)):d("",!0),r("div",Ko,[r("div",Xo,[xe.value?(o(),l("a",{key:0,href:xe.value.link,class:"flex gap-0.5 mr-0.5",target:"_blank",rel:"noopener noreferrer"},[(o(),D(rt(t(ve)[xe.value.component]),{class:"inline-block mt-1 min-w-[16px]",key:xe.value.component+e.trans.notification_id,prefix:"pk_"+e.trans.notification_id,width:"14",height:"14"},null,8,["prefix"])),Jo],8,Qo)):d("",!0),r("p",{class:"text-sm text-dark font-cr-regular msgOnHome",style:{"word-break":"break-word"},innerHTML:Me.value},null,8,el)]),(t(u)||t(m))&&(t(f)||t(p)||t(S))&&!t(U)?(o(),l("div",tl,[t(i).sanitizeHtml(t(f))?(o(),l("div",al,[t(i).sanitizeHtml(t(f))?(o(),l("p",{key:0,class:"text-dark font-cr-regular text-sm tw-break-word",innerHTML:t(i).sanitizeHtml(t(f))},null,8,rl)):d("",!0)])):d("",!0),t(p)?(o(),l("img",{key:1,src:t(i).getGifURLFromId(t(p)),class:"w-[117px] h-[84px] rounded-xl my-1 object-cover object-center",alt:"gif"},null,8,ol)):d("",!0),t(S)?(o(),l("div",{key:2,"aria-label":g.$t("lang.a11y.supporter_video"),role:"button",tabindex:"0",onClick:R[0]||(R[0]=K=>ae(t(w))),style:Ve({backgroundImage:"url("+t(i).getUrlWithCdnPath((oe=t(S))==null?void 0:oe.thumbnail_path)+")"}),class:"flex items-center justify-center w-[124px] h-[174px] my-1 overflow-hidden rounded-xl bg-grey71 relative cursor-pointer bg-cover bg-center bg-no-repeat"},[r("video",sl,[r("source",{src:t(i).getUrlWithCdnPath(t(S).video_path)+"_converted.mp4",type:"video/mp4"},null,8,nl),r("source",{src:t(i).getUrlWithCdnPath(t(S).video_path)},null,8,il)]),x(nt,{"aria-label":g.$t("lang.a11y.play_video"),class:"absolute"},null,8,["aria-label"])],12,ll)):d("",!0),t(n)&&(e.creator_data.own_page||e.trans.fk_user_id!=""&&e.trans.fk_user_id==t(n).user_id)?(o(),l("div",dl,[e.trans.fk_user_id!=""&&e.trans.fk_user_id==t(n).user_id?(o(),l("div",{key:0,role:"button",tabindex:"0",onClick:R[1]||(R[1]=K=>me("open")),class:"text-sm font-cr-regular text-grey71 relative cursor-pointer mr-2 select-none"},h(g.$t("lang.common.edit")),1)):d("",!0),e.creator_data.own_page&&t(V)?(o(),l("div",{key:1,role:"button",tabindex:"0",onClick:R[2]||(R[2]=K=>pe(I)?I.value=!t(I):I=!t(I)),class:"text-sm font-cr-regular text-grey71 relative cursor-pointer mr-2 select-none xs:text-xs"},h(g.$t("lang.common.reply")),1)):d("",!0),r("div",{role:"button",tabindex:"0",onClick:A,class:"text-sm font-cr-regular text-grey71 relative cursor-pointer select-none xs:text-xs"},h(g.$t("lang.common.share")),1)])):d("",!0)])):!t(f)&&!t(ee).length&&!t(p)&&!t(S)&&e.trans.fk_user_id&&e.trans.fk_user_id==t(n).user_id&&e.trans.support_type!="Commission"&&e.trans.support_type!="Extra"||t(U)?(o(),l("div",ul,[x(Ae,{class:"mt-2 w-full actionWrapper",hideEmojiPicker:!1,showGifPicker:!1,showVideoRecorderIcon:e.trans.support_type=="Supporter"||e.trans.support_type=="Monthly Supporter",onGetContent:le,onGetGif:L,placeholder:"Say something nice...",content:t(z),gif:t($),onGetVideo:v,onSetIsUploadingVideo:j,videoURL:t(de)?"":t(_),thumbnailURL:t(de)?"":t(W),fieldType:"message",videoData:t(de)?"":t(X),currentUser:e.current_user_data,creatorData:e.creator_data,onRemoveVideo:O,onToggleVideoRecorderModal:R[5]||(R[5]=K=>be(t(Ee).SUPPORT)),onOpenVideoPlayModal:R[6]||(R[6]=K=>ae(t(w))),paddingBottom:"!pb-9",dropDownPosition:"top"},{"editor-more-options":F(()=>[Qe(r("div",cl,[r("div",ml,[x(ye,{class:"w-max tw-theme-color-rounded-full text-sm font-cr-regular text-themeTextColor relative px-4 py-1.5 mr-2",role:"button",tabindex:"0",onClick:R[3]||(R[3]=K=>fe(e.trans.support_type=="Membership"||e.trans.support_type=="Monthly Supporter"?e.trans.subscription_id:e.trans.support_id,"update")),initiallyDisabled:t(B)||t(Q),disabled:t(y),btnType:"primary"},{default:F(()=>[r("span",null,h(t(U)?g.$t("lang.common.save"):g.$t("lang.common.post")),1)]),_:1},8,["initiallyDisabled","disabled"]),r("div",{role:"button",tabindex:"0",onClick:R[4]||(R[4]=K=>me("close")),class:"tw-grey-color-rounded-full text-sm font-cr-regular text-dark relative cursor-pointer px-4 py-1.5 mr-2"},[r("span",fl,h(g.$t("lang.common.cancel")),1)])])],512),[[ot,t(E)||t($)||t(w)]])]),_:1},8,["showVideoRecorderIcon","content","gif","videoURL","thumbnailURL","videoData","currentUser","creatorData"])])):d("",!0),t(n)&&!e.trans.support_note&&!e.trans.support_gif&&!e.trans.support_video&&e.trans.fk_user_id!=""&&(e.trans.fk_user_id==t(n).user_id||e.creator_data.own_page)?(o(),l("div",pl,[(t(u)||t(m))&&e.creator_data.own_page&&t(V)?(o(),l("p",{key:0,role:"button",tabindex:"0",onClick:R[7]||(R[7]=K=>pe(I)?I.value=!t(I):I=!t(I)),class:"text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 mr-3 select-none"},h(g.$t("lang.common.reply")),1)):d("",!0),t(f)||t(p)||t(S)?d("",!0):(o(),l("p",{key:1,role:"button",tabindex:"0",onClick:A,class:"text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 select-none"},h(g.$t("lang.common.share")),1))])):d("",!0)])]),t(ee).length>0&&(t(u)||t(m))?(o(),l("div",{key:0,class:"w-full",ref_key:"repliesWrapper",ref:he},[(o(!0),l(ce,null,we(t(ee),(K,J)=>(o(),D(zr,{key:J,comm:K,trans:e.trans,currentUserData:t(n),creator_data:e.creator_data,onOpenReplyForm:R[8]||(R[8]=$e=>pe(I)?I.value=!t(I):I=!t(I)),onOpenVideoPlayModal:$e=>c("openVideoPlayModal",K.video_url,K.meta),onDeleteReply:$e=>{c("openDeleteConfirmModal","reply",e.trans.support_id),pe(re)?re.value=K.id:re=K.id}},null,8,["comm","trans","currentUserData","creator_data","onOpenVideoPlayModal","onDeleteReply"]))),128))],512)):d("",!0),t(I)?(o(),l("div",hl,[r("div",{class:N(["flex mt-6",{" xs-sm:flex-col":e.fromPage=="home"}])},[x(Re,{src:e.creator_data.own_page?e.creator_data.dp:e.trans.profile_picture,alt:e.creator_data.own_page?e.creator_data.name:t(n).name,width:20,height:20,intrinsicSize:200,imageClass:`w-5 h-5 rounded-full ${e.fromPage=="home"?"xs-sm:mb-2":""}`},null,8,["src","alt","imageClass"]),r("div",vl,[x(Ae,{class:N(["ml-3 w-full actionWrapper",{"xs-sm:ml-2":e.fromPage=="home"}]),hideEmojiPicker:!1,onGetContent:le,placeholder:g.$t("lang.common.write_a_comment"),content:t(Y),fieldType:"reply",videoURL:t(de)?t(_):"",thumbnailURL:t(de)?t(W):"",videoData:t(de)?t(X):"",currentUser:e.current_user_data,creatorData:e.creator_data,onSetIsUploadingVideo:j,onRemoveVideo:O,onOpenVideoPlayModal:R[10]||(R[10]=K=>ae(t(T))),onGetVideo:v,smallInputField:!0,paddingBottom:"!pb-14",height:"65",dropDownPosition:"top"},{"editor-more-options":F(()=>[r("div",gl,[e.creator_data.own_page&&!t(X)?(o(),l("div",{key:0,role:"button",tabindex:"0",onClick:R[9]||(R[9]=K=>be(t(Ee).REPLY)),class:N(["rounded-full inline-flex gap-2 px-2.5 py-1.5 h-[34px] items-center font-cr-medium text-[14px] text-black bg-white shadow-dropdown-lg tw-scale-on-hover hover:bg-greyF5 cursor-pointer",{"xs-sm:px-1.5 xs-sm:h-[30px]":e.fromPage="home"}])},[r("div",_l,[x(lt)]),q(" "+h(g.$t("lang.common.reply_with_video")),1)],2)):d("",!0)])]),_:1},8,["class","placeholder","content","videoURL","thumbnailURL","videoData","currentUser","creatorData"])])],2),r("div",yl,[x(ye,{class:"w-24 h-10 tw-theme-color-rounded-full text-sm font-cr-bold text-themeTextColor relative cursor-pointer px-4 py-1.5",role:"button",tabindex:"0",onClick:R[11]||(R[11]=K=>De(e.trans.support_type=="Membership"||e.trans.support_type=="Monthly Supporter"?e.trans.subscription_id:e.trans.support_id)),initiallyDisabled:t(M),disabled:t(M),btnType:"primary"},{default:F(()=>[r("span",null,h(g.$t("lang.common.send")),1)]),_:1},8,["initiallyDisabled","disabled"])])])):d("",!0)]),x(Tt,{align:"right",contentClasses:["bg-white rounded-lg shadow-dropdown-sm border border-dark/5 !mt-0 overflow-y-hidden"],widthClass:"w-max",getDropdownCheck:!0,onIsOpen:te,class:"flex-shrink-0 ml-auto -mt-1 -mr-2"},{trigger:F(()=>[r("div",{role:"button",tabindex:"0","aria-label":g.$t("lang.a11y.more_options"),"aria-haspopup":"menu","aria-expanded":t(ge),class:N(["group relative tw-scale-on-hover close-bg-transition duration-100 hover:bg-dark/5 active:bg-dark/10 rounded-full cursor-pointer w-8 h-8 flex justify-center items-center",t(ge)?"bg-dark/5":""])},[x(Mt,{class:"cursor-pointer",fillClass:"fill-dark/70"})],10,bl)]),content:F(()=>[r("ul",xl,[_e.value?(o(),l("li",{key:0,role:"button",tabindex:"0",onClick:A,class:"cursor-pointer relative text-sm rounded-lg flex text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark"},h(g.$t("lang.common.share")),1)):d("",!0),e.creator_data.own_page||e.trans.fk_user_id===t(n).user_id?(o(),l("li",{key:1,role:"button",tabindex:"0",onClick:Z,class:"cursor-pointer relative text-sm rounded-lg text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark"},h(t(C)?g.$t("lang.home.make_this_public"):g.$t("lang.home.make_this_private")),1)):d("",!0),e.trans.fk_user_id!=""&&e.trans.fk_user_id==t(n).user_id&&(t(f)||t(p)||t(S))?(o(),l("li",{key:2,role:"button",tabindex:"0",onClick:R[12]||(R[12]=K=>c("openDeleteConfirmModal","comment",e.trans.support_id)),class:"cursor-pointer rounded-lg relative text-sm text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark"}," Delete this comment ")):d("",!0),e.creator_data.own_page?(o(),l(ce,{key:3},[r("li",{role:"button",tabindex:"0",onClick:Ce,class:"cursor-pointer relative text-sm text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark rounded-lg"},h(e.trans.is_pinned==0?g.$t("lang.home.pin_to_my_page"):g.$t("lang.home.unpin_from_my_page")),1),t(f)?(o(),l("li",{key:0,role:"button",tabindex:"0",onClick:P,class:"cursor-pointer relative text-sm text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark rounded-lg"},h(e.trans.msg_hidden==1?g.$t("lang.home.show_comment"):g.$t("lang.home.hide_comment")),1)):d("",!0)],64)):d("",!0)])]),_:1})])],2)}}},wl={class:"flex mt-3 relative"},Cl={class:"bg-white h-6 flex items-center flex-shrink-0 z-10 relative"},$l={class:"ml-3"},kl=["innerHTML"],Ml=["poster"],Tl=["src"],Sl=["src"],Pl=r("svg",{class:"absolute",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{width:"40",height:"40",rx:"20",fill:"black","fill-opacity":"0.4"}),q(),r("path",{d:"M14.6667 10.6667V29.3334L29.3334 20L14.6667 10.6667Z",fill:"white"})],-1),Rl={__name:"Reply_v2",props:["currentUserData","reply","trans","creator_data"],emits:["openReplyForm","deleteReply","openVideoPlayModal"],setup(e,{emit:c}){const a=e;let n="";a.reply.creator?n=a.creator_data.slug:a.trans.supporter.creator&&(n=a.trans.supporter.slug);const u={dp:a.reply.creator?a.creator_data.dp:a.trans.supporter.dp,name:a.reply.creator?a.creator_data.name:a.trans.supporter.name,id:a.reply.creator?a.creator_data.user_id:a.trans.supporter.id};return(m,f)=>{var k,p,$,S,w;return o(),l("div",wl,[r("div",Cl,[t(n)?(o(),D(t(Xe),{key:0,class:"absolute w-full h-full left-0 top-0 z-10",href:t(n)},null,8,["href"])):d("",!0),x(Re,{src:u.dp,alt:u.name,width:20,height:20,intrinsicSize:100,imageClass:"w-5 h-5 rounded-full relative z-1"},null,8,["src","alt"])]),r("div",$l,[t(i).sanitizeHtml(e.reply.message.note)?(o(),l("p",{key:0,class:"text-dark font-cr-regular minxs:text-sm tw-break-word mt-[2px]",innerHTML:t(i).sanitizeHtml(e.reply.message.note)},null,8,kl)):d("",!0),((p=(k=e.reply.message.video)==null?void 0:k.url)==null?void 0:p.length)>0?(o(),l("div",{key:1,onClick:f[0]||(f[0]=T=>{var y;return m.$emit("openVideoPlayModal",t(i).getUrlWithCdnPath((y=e.reply.message.video)==null?void 0:y.thumbnail))}),class:N([{"mt-2":t(i).sanitizeHtml(e.reply.message.note)},"w-30 h-44 mb-1 rounded-xl relative flex items-center justify-center select-none cursor-pointer"])},[r("video",{poster:t(i).getUrlWithCdnPath(($=e.reply.message.video)==null?void 0:$.thumbnail)+"@300w_0e.webp",class:"w-full rounded-xl h-full object-cover",preload:"none"},[r("source",{src:t(i).getUrlWithCdnPath((S=e.reply.message.video)==null?void 0:S.url)+"_converted.mp4",type:"video/mp4"},null,8,Tl),r("source",{src:t(i).getUrlWithCdnPath((w=e.reply.message.video)==null?void 0:w.url)},null,8,Sl)],8,Ml),Pl],2)):d("",!0),u.id==e.currentUserData.user_id?(o(),l("p",{key:2,onClick:f[1]||(f[1]=T=>m.$emit("deleteReply")),class:"mt-1 text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 inline"},h(m.$t("lang.common.delete")),1)):d("",!0),u.id!=e.currentUserData.user_id&&(e.trans.supporter.id==e.currentUserData.user_id||e.creator_data.own_page)?(o(),l("p",{key:3,onClick:f[2]||(f[2]=T=>m.$emit("openReplyForm")),class:"mt-1 text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 inline"},h(m.$t("lang.common.reply")),1)):d("",!0)])])}}},ue={ONE_TIME_SUPPORT:1,MEMBERSHIP:2,EXTRA_PURCHASE:3,WISHLIST:4,COMMISSION:5,COFFEE_LINK:6,RECURRING_DONATION:7},Ze={Default:1,Suggested:2};const Dl={key:0,class:"flex items-center mb-3"},Ul={class:"ml-2 text-xs font-cr-regular text-grey71"},Vl={class:"flex relative font-cr-regular"},Ll={class:"w-full flex items-center flex-wrap mx-3"},Il={class:"flex items-center w-full"},Ol={class:"w-full"},El={class:"flex"},jl=["href"],zl=r("div",null,"/",-1),Hl={class:"text-sm text-dark font-cr-regular msgOnHome",style:{"word-break":"break-word"}},Bl={class:"suppUsername"},Fl=["href"],Wl=["href"],Nl={key:2},Al={key:0},Zl={key:0},Gl={key:1},ql={key:0},Yl={key:0},Kl={key:1},Xl={key:1},Ql={key:0},Jl={key:1},es={key:1},ts=["innerHTML"],as=["innerHTML"],rs=["innerHTML"],os=["innerHTML"],ls={key:0,class:"inline-block"},ss={key:0,class:"bg-pageTheme1 px-3 py-2 rounded-lg mt-1"},ns=["innerHTML"],is=["src"],ds={class:"w-full h-full rounded-xl object-cover object-center",alt:"video",preload:"none"},us=["src"],cs=["src"],ms={key:3,class:"flex mt-2 items-center"},fs={key:1,class:"relative"},ps={class:"p-4 pt-0"},hs={class:"flex"},vs={class:"relative"},gs={key:2,class:"flex mt-2"},_s={key:1,class:"w-full"},ys={class:"relative w-full mr-2 xs:mr-0"},bs={class:"relative w-fit ml-3 mb-3"},xs={class:"relative"},ws={class:"flex justify-end mt-3"},Cs=["aria-label","aria-expanded"],$s={class:"w-full block p-[6px]",role:"menu","aria-modal":"true"},Lt={__name:"Timeline_v2",props:["creator_data","trans","current_user_data","deleteCommentConfirmed","deleteTransConfirmed","deletableTransId","deleteReplyConfirmed","transIndex","recordedVideoData","isMadePrivate"],emits:["openDeleteConfirmModal","actionSuccess","openShareModal","openVideoPlayModal","openVideoReplyModal","reloadTransactions","deletedTrans","toggleVideoRecorderModal","makeTransPrivate"],setup(e,{emit:c}){const a=e;let n=s(a.current_user_data?a.current_user_data.data:"");s(!!(a.trans.resource_id!=""&&(a.trans.visibility==1||a.trans.visibility=="")&&a.trans.message_visibility)),s(!!((a.creator_data.own_page||a.trans.supporter.id!=""&&a.current_user_data&&a.trans.supporter.id==a.current_user_data.data.user_id)&&(a.trans.visibility==0||a.trans.message_visibility)));let u=s(a.trans.supporter_message.note?i.trimBrTags(a.trans.supporter_message.note):""),m=s(a.trans.supporter_message.note?i.trimBrTags(a.trans.supporter_message.note):""),f=s(a.trans.supporter_message.gif?a.trans.supporter_message.gif:""),k=s(a.trans.supporter_message.gif?a.trans.supporter_message.gif:""),p=s(a.trans.supporter_message.video?a.trans.supporter_message.video:""),$=s(a.trans.supporter_message.video??""),S=s(""),w=s(!1),T=s(!1),y=s(!1),M=s(!1),E=s(!1),U=s(!1),B=s(M?m:""),b=s(!1),z=s(),I=s(54),Y=s(0),ie=s(a.trans.replies?a.trans.replies:[]),se=s(),ee=s(0),he=s(!1),re=s(!!(a.current_user_data&&(a.creator_data.own_page||a.trans.supporter.id!=""&&a.trans.supporter.id==a.current_user_data.data.user_id)&&a.trans.visibility==0)),ge=s(!a.trans.replies.length),C=s("");s(!1);let V=s(!1),Q=s(a.recordedVideoData),X=s(a.trans.supporter_message.video?i.getUrlWithCdnPath(a.trans.supporter_message.video.video_path):""),_=s(a.trans.supporter_message.video?i.getUrlWithCdnPath(a.trans.supporter_message.video.thumbnail_path):"");Ue(()=>a.deletableTransId,v=>{Y.value=v}),Ue(()=>a.deleteCommentConfirmed,v=>{v&&Y.value==a.trans.id&&me(a.trans.resource_id,"delete")}),Ue(()=>a.recordedVideoData,v=>{Q.value=v,X.value=v!=null&&v.video_data?URL.createObjectURL(v.video_data):X.value,_.value=v!=null&&v.thumbnail_data?URL.createObjectURL(v.thumbnail_data):_.value});let W={twitter:Fe,instagram:ct,tiktok:ut};Ue(()=>a.deleteReplyConfirmed,v=>{v&&Y.value==a.trans.id&&xe(a.trans.id,ee.value)});const ve=v=>{var j=b.value?"reply":"message";j=="message"?(m.value=v,E.value=!1,v.replace(/\s/g,"").length>0?y.value=!0:y.value=!1):(z.value=v,v.replace(/\s/g,"").length>0?(E.value=!1,U.value=!0):(E.value=!0,U.value=!1))},le=v=>{v=="close"?(M.value=!1,u.value==""&&(B.value=""),f.value==""&&(k.value=""),p.value==""&&($.value=""),u.value==""&&f.value==""&&p.value==""&&(E.value=!0,I.value=54)):(u.value!=""&&(B.value=u.value,y.value=!0),f.value!=""&&(k.value=f.value,y.value=!0),p.value!=""&&($.value=p.value,y.value=!0,X.value=i.getUrlWithCdnPath(p.value.video_path),_.value=i.getUrlWithCdnPath(p.value.thumbnail_path)),M.value=!0)},me=async(v,j)=>{if(j=="update"&&(E.value||V.value))return;let G=i.trimBrTags(m.value);if(G.replace(/\s/g,"").length>0||k.value||$.value&&!Z.value){w.value=!0;let R={_method:"POST",type:j,msg:G,gif:k.value,video:$.value};if(a.trans.type==ue.MEMBERSHIP||a.trans.type==ue.RECURRING_DONATION)var g=`api/v1/comments/${v}/updateSubMsg`;else var g=`api/v1/comments/${v}/update`;await axios.post(g,R).then(oe=>{oe.data.data.success&&(j=="delete"?je.visit(je.page.url,{preserveScroll:!0}):(u.value=G,f.value=k.value,p.value=$.value,M.value=!1,w.value=!1))}).catch(oe=>{w.value=!1})}},fe=async()=>{try{let v={pinned:!a.trans.pinned};const j=await axios.patch(`api/v1/timeline/${a.trans.id}/pin`,v);c("reloadTransactions","pinned")}catch{console.log("Error Toggling pin")}},Ce=async()=>{let v={visibility:!a.trans.message_visibility};await axios.patch(`api/v1/timeline/${a.trans.id}/message-visibility`,v).then(j=>{je.visit(je.page.url,{preserveScroll:!0})}).catch(j=>{})},P=async()=>{let v={visibility:re.value?1:0};await axios.patch(`api/v1/timeline/${a.trans.id}/visibility`,v).then(j=>{c("makeTransPrivate",a.trans.id,!re.value)}).catch(j=>{})};Ue(()=>a.isMadePrivate,v=>{v.id===a.trans.id&&(re.value=v.val)},{deep:!0});let Z=ke(()=>{var v;return(Q==null?void 0:Q.value)&&((v=Q==null?void 0:Q.value)==null?void 0:v.message_type)===Ee.REPLY});const ne=ke(()=>de(a.trans.supporter));function de(v){const j={twitter:"x.com",tiktok:"tiktok.com",instagram:"instagram.com"},G={default:"twitter",twitter:"twitter",instagram:"instagram",tiktok:"tiktok"},g=v.name.substring(0,1)==="@";C.value=g?v.name.substring(1):v.name;const R=v.name_type;if(R==="default"&&!g)return null;const oe=G[R]||null;return oe?{component:oe,link:j[oe]+"/"+C.value}:null}const Me=async v=>{var G,g,R,oe,K,J,$e,Pe;if(!V.value&&(((G=z.value)==null?void 0:G.replace(/\s/g,"").length)>0||(g=S.value)!=null&&g.video_path&&Z.value)){T.value=!0;let Ie={video_url:Z?(R=S.value)==null?void 0:R.video_path:"",thumbnail_url:Z?(oe=S.value)==null?void 0:oe.thumbnail_path:"",filetype:Z?(J=(K=S.value)==null?void 0:K.video_filetype)==null?void 0:J.replace(/^video\//,""):"",filesize:Z?($e=S.value)==null?void 0:$e.video_filesize:""};z.value&&((Pe=z.value)!=null&&Pe.trim())&&(Ie.note=z.value);var j=`api/v1/timeline/${a.trans.id}/replies/`;await axios.post(j,Ie).then(qe=>{var Ke,ze,mt;const Ye={id:qe.data.data.id,creator:a.creator_data.own_page,message:{video:{url:Z?(Ke=S.value)==null?void 0:Ke.video_path:"",thumbnail:Z?(ze=S.value)==null?void 0:ze.thumbnail_path:""}}};z.value&&((mt=z.value)!=null&&mt.trim())&&(Ye.message.note=z.value),ie.value.push(Ye),b.value=!1,z.value="",T.value=!1,ge.value=!1}).catch(qe=>{})}},xe=async(v,j)=>{await axios.delete(`api/v1/timeline/${v}/replies/${j}`).then(G=>{G&&setTimeout(()=>{ie.value=ie.value.filter(function(g){return g.id!==j}),c("actionSuccess",!0),ee.value=0},10)}).catch(G=>{})},De=()=>{c("openShareModal",a.trans.id,a.trans)},H=v=>{he.value=v},A=ke(()=>!a.creator_data.own_page&&(a.trans.supporter.id&&n.value?a.trans.supporter.id!==n.value.user_id:!0)&&!u.value||!a.creator_data.own_page&&(a.trans.supporter.id&&n.value?a.trans.supporter.id!==n.value.user_id:!0)),te=v=>{k.value=v},_e=()=>{Q.value=null,V.value=!1,$.value="",S.value="",k.value||$.value||B.value||(y.value=!1),X.value="",_.value=""},L=v=>{let j={thumbnail:_.value};c("openVideoPlayModal",X.value,j,!0)},O=v=>{c("toggleVideoRecorderModal",a.trans.id,v)},ae=v=>{v!=null&&v.video_data&&(Z.value?S.value={video_path:v.video_data.path,thumbnail_path:v.thumbnail_data.path??"",message_type:v.message_type,video_filesize:v.video_filesize,video_filetype:v.video_mimetype}:$.value={video_path:v.video_data.path,thumbnail_path:v.thumbnail_data.path??""},X.value=v.video_data.full_path,_.value=v.thumbnail_data.full_path,V.value=!1)},be=v=>{V.value=v};return(v,j)=>{var G,g,R,oe,K;return o(),l("div",{class:N(["minxs:pb-4 xs:pb-4 relative",[e.trans.pinned?"pt-4":"pt-2"]])},[t(re)?(o(),l("div",Dl,[x(Ut),r("span",Ul,h(e.creator_data.own_page?v.$t("lang.home.only_visible_to_you_and_supporter"):v.$t("lang.home.only_visible_to_you_and_creator")),1)])):d("",!0),r("div",Vl,[r("div",{class:N(["bg-white flex-shrink-0 z-10",[t(ie).length>0?"h-9 flex items-start":""]])},[e.trans.supporter.dp?(o(),D(Re,{key:0,src:e.trans.supporter.dp,alt:e.trans.supporter.name,width:40,height:40,intrinsicSize:200,imageClass:"w-10 h-10 xs:w-8 xs:h-8 rounded-full relative z-1"},null,8,["src","alt"])):d("",!0)],2),r("div",Ll,[r("div",Il,[r("div",Ol,[r("div",El,[ne.value?(o(),l("a",{key:0,href:"https://"+ne.value.link,class:"flex gap-0.5 mr-0.5",target:"_blank",rel:"noopener noreferrer"},[(o(),D(rt(t(W)[ne.value.component]),{class:"inline-block mt-1 min-w-[16px]",key:ne.value.component+e.trans.notification_id,prefix:"pk_"+e.trans.notification_id,width:"14",height:"14"},null,8,["prefix"])),zl],8,jl)):d("",!0),r("p",Hl,[r("span",Bl,[ne.value?(o(),l("a",{key:0,href:"https://"+ne.value.link,target:"_blank",rel:"noopener noreferrer"},h(t(C)),9,Fl)):e.trans.supporter.creator?(o(),l("a",{key:1,href:t(Se).homePage(e.trans.supporter.slug),target:"_blank",rel:"noopener noreferrer"},h(t(C)),9,Wl)):(o(),l("span",Nl,h(t(C)),1))]),e.trans.type===t(ue).ONE_TIME_SUPPORT?(o(),l("span",Al,[e.trans.widget_version===t(Ze).Suggested?(o(),l("span",Zl,h(v.$t("lang.messages.became_a_supporter_v2",{name:""})),1)):(o(),l("span",Gl,[e.trans.coffee_count===1?(o(),l("span",ql,[e.creator_data.own_page?(o(),l("span",Yl,h(v.$t("lang.messages.bought_you_a_coffee_v2",{name:"",tag:e.creator_data.tag_alternative})),1)):(o(),l("span",Kl,h(v.$t("lang.messages.bought_a_coffee_v2",{name:"",tag:e.creator_data.tag_alternative})),1))])):(o(),l("span",Xl,[e.creator_data.own_page?(o(),l("span",Ql,h(v.$t("lang.messages.bought_you_coffees_v2",{name:"",count:e.trans.coffee_count,tags:t(at).includes(((g=(G=e.creator_data)==null?void 0:G.tag_alternative)==null?void 0:g.toLowerCase())??"coffee")?(e.creator_data.tag_alternative??"coffee")+"s":e.creator_data.tag_alternative??"coffee"})),1)):(o(),l("span",Jl,h(v.$t("lang.messages.bought_coffees_v2",{name:"",count:e.trans.coffee_count,tags:t(at).includes(((oe=(R=e.creator_data)==null?void 0:R.tag_alternative)==null?void 0:oe.toLowerCase())??"coffee")?(e.creator_data.tag_alternative??"coffee")+"s":e.creator_data.tag_alternative??"coffee"})),1))]))]))])):e.trans.type===t(ue).MEMBERSHIP?(o(),l("span",es,h(v.$t("lang.messages.became_member_v2",{name:""})),1)):e.trans.type===t(ue).EXTRA_PURCHASE?(o(),l("span",{key:2,innerHTML:v.$t("lang.messages.claimed_reward_v2",{name:"",reward:e.trans.details.extras.slice(0,2).map(J=>t(i).sanitizeHtml(J.extra_title)).join(", ")+(e.trans.details.extras.length>2?` + ${e.trans.details.extras.length-2} more`:"")})},null,8,ts)):e.trans.type===t(ue).WISHLIST?(o(),l("span",{key:3,innerHTML:v.$t("lang.messages.contributed_to_wishlist_message_v2",{supporter:"",title:t(i).sanitizeHtml(e.trans.details.wishlist_title)})},null,8,as)):e.trans.type===t(ue).COMMISSION?(o(),l("span",{key:4,innerHTML:v.$t("lang.messages.contributed_to_commission_message_v2",{supporter:"",title:t(i).sanitizeHtml(e.trans.details.commission_name)})},null,8,rs)):e.trans.type===t(ue).RECURRING_DONATION?(o(),l("span",{key:5,innerHTML:v.$t("lang.messages.became_recurring_supporter_v2",{supporter:""})},null,8,os)):d("",!0)])]),(t(u)||t(f)||t(p))&&!t(M)?(o(),l("div",ls,[t(i).sanitizeHtml(t(u))?(o(),l("div",ss,[t(i).sanitizeHtml(t(u))?(o(),l("p",{key:0,class:"text-dark font-cr-regular text-sm tw-break-word",innerHTML:t(i).sanitizeHtml(t(u))},null,8,ns)):d("",!0)])):d("",!0),t(f)?(o(),l("img",{key:1,src:t(i).getGifURLFromId(t(f)),class:"w-[117px] h-[84px] rounded-xl my-1 object-cover object-center",alt:"gif"},null,8,is)):d("",!0),t(p)?(o(),l("div",{key:2,role:"button",tabindex:"0",onClick:j[0]||(j[0]=J=>L(t($))),style:Ve({backgroundImage:"url("+t(i).getUrlWithCdnPath((K=t(p))==null?void 0:K.thumbnail_path)+"@300w_0e.webp)"}),class:"flex items-center justify-center w-[124px] h-[174px] my-1 overflow-hidden rounded-xl bg-grey71 relative cursor-pointer bg-cover bg-center bg-no-repeat"},[r("video",ds,[r("source",{src:t(i).getUrlWithCdnPath(t(p).video_path)+"_converted.mp4",type:"video/mp4"},null,8,us),r("source",{src:t(i).getUrlWithCdnPath(t(p).video_path)},null,8,cs)]),x(nt,{class:"absolute"})],4)):d("",!0),t(n)&&(e.creator_data.own_page||e.trans.supporter.id!=""&&e.trans.supporter.id==t(n).user_id)?(o(),l("div",ms,[e.trans.supporter.id!=""&&e.trans.supporter.id==t(n).user_id?(o(),l("div",{key:0,role:"button",tabindex:"0",onClick:j[1]||(j[1]=J=>le("open")),class:"text-sm font-cr-regular text-grey71 relative cursor-pointer select-none mr-2 select-none"},h(v.$t("lang.common.edit")),1)):d("",!0),e.creator_data.own_page&&t(ge)?(o(),l("div",{key:1,role:"button",tabindex:"0",onClick:j[2]||(j[2]=J=>pe(b)?b.value=!t(b):b=!t(b)),class:"text-sm font-cr-regular text-grey71 relative cursor-pointer mr-2 select-none xs:text-xs"},h(v.$t("lang.common.reply")),1)):d("",!0),r("div",{role:"button",tabindex:"0",onClick:De,class:"text-sm font-cr-regular text-grey71 relative cursor-pointer select-none xs:text-xs"},h(v.$t("lang.common.share")),1)])):d("",!0)])):!t(u)&&!t(ie).length&&!t(f)&&!t(p)&&e.trans.supporter.id&&e.trans.supporter.id==t(n).user_id&&e.trans.type!=5&&e.trans.type!=3||t(M)?(o(),l("div",fs,[x(Ae,{class:"mt-2 w-full actionWrapper",hideEmojiPicker:!1,showGifPicker:!1,showVideoRecorderIcon:e.trans.type==t(ue).ONE_TIME_SUPPORT||e.trans.type==t(ue).RECURRING_DONATION,onGetContent:ve,onGetGif:te,placeholder:"Say something nice...",content:t(B),gif:t(k),onGetVideo:ae,onSetIsUploadingVideo:be,videoURL:t(Z)?"":t(X),thumbnailURL:t(Z)?"":t(_),fieldType:"message",videoData:t(Z)?"":t(Q),currentUser:e.current_user_data,creatorData:e.creator_data,onRemoveVideo:_e,onToggleVideoRecorderModal:j[5]||(j[5]=J=>O(t(Ee).SUPPORT)),onOpenVideoPlayModal:j[6]||(j[6]=J=>L(t($))),paddingBottom:"!pb-9",dropDownPosition:"top"},{"editor-more-options":F(()=>[Qe(r("div",ps,[r("div",hs,[x(ye,{class:"w-max tw-theme-color-rounded-full text-sm font-cr-regular text-themeTextColor relative px-4 py-1.5 mr-2",role:"button",tabindex:"0",onClick:j[3]||(j[3]=J=>me(e.trans.resource_id,"update")),initiallyDisabled:t(E)||t(V),disabled:t(w),btnType:"primary"},{default:F(()=>[r("span",null,h(t(M)?v.$t("lang.common.save"):v.$t("lang.common.post")),1)]),_:1},8,["initiallyDisabled","disabled"]),r("div",{role:"button",tabindex:"0",onClick:j[4]||(j[4]=J=>le("close")),class:"tw-grey-color-rounded-full text-sm font-cr-regular text-dark relative cursor-pointer px-4 py-1.5 mr-2"},[r("span",vs,h(v.$t("lang.common.cancel")),1)])])],512),[[ot,t(y)||t(k)||t($)]])]),_:1},8,["showVideoRecorderIcon","content","gif","videoURL","thumbnailURL","videoData","currentUser","creatorData"])])):d("",!0),t(n)&&!e.trans.supporter_message.note&&!e.trans.supporter_message.gif&&!e.trans.supporter_message.video&&e.trans.supporter.id!=""&&(e.trans.supporter.id==t(n).user_id||e.creator_data.own_page)?(o(),l("div",gs,[e.creator_data.own_page&&t(ge)?(o(),l("p",{key:0,role:"button",tabindex:"0",onClick:j[7]||(j[7]=J=>pe(b)?b.value=!t(b):b=!t(b)),class:"text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 mr-3 select-none"},h(v.$t("lang.common.reply")),1)):d("",!0),t(u)||t(f)||t(p)?d("",!0):(o(),l("p",{key:1,role:"button",tabindex:"0",onClick:De,class:"text-sm text-grey71 hover:text-dark cursor-pointer xs:text-xs relative z-1 select-none"},h(v.$t("lang.common.share")),1))])):d("",!0)]),e.trans.pinned==1?(o(),l("div",{key:0,class:N([[t(re)?"left-0.5 top-[-47px] minxs:top-[-52px]":"minxs:left-[50px] left-[43px] -top-[15px]"],"absolute flex text-grey71 minxs:text-xs text-xs font-cr-book items-center"])},[x(Ct,{fillClass:"fill-grey71",width:"10",class:"mr-1"}),q(" "+h(v.$t("lang.post.pinned")),1)],2)):d("",!0)]),t(ie).length>0?(o(),l("div",{key:0,class:"w-full",ref_key:"repliesWrapper",ref:se},[(o(!0),l(ce,null,we(t(ie),(J,$e)=>(o(),D(Rl,{key:$e,reply:J,trans:e.trans,currentUserData:t(n),creator_data:e.creator_data,onOpenReplyForm:j[8]||(j[8]=Pe=>pe(b)?b.value=!t(b):b=!t(b)),onOpenVideoPlayModal:Pe=>c("openVideoPlayModal",t(i).getUrlWithCdnPath(J.message.video.url),J.meta),onDeleteReply:Pe=>{c("openDeleteConfirmModal","reply",e.trans.id),pe(ee)?ee.value=J.id:ee=J.id}},null,8,["reply","trans","currentUserData","creator_data","onOpenVideoPlayModal","onDeleteReply"]))),128))],512)):d("",!0),t(b)?(o(),l("div",_s,[r("div",{class:N(["flex mt-6",{" xs-sm:flex-col":v.fromPage=="home"}])},[x(Re,{src:e.creator_data.own_page?e.creator_data.dp:e.trans.supporter.dp,alt:e.creator_data.own_page?e.creator_data.name:t(n).name,width:20,height:20,intrinsicSize:200,imageClass:`w-5 h-5 rounded-full ${v.fromPage=="home"?"xs-sm:mb-2":""}`},null,8,["src","alt","imageClass"]),r("div",ys,[x(Ae,{class:N(["ml-3 w-full actionWrapper",{"xs-sm:ml-2":v.fromPage=="home"}]),hideEmojiPicker:!1,onGetContent:ve,currentUser:e.current_user_data,creatorData:e.creator_data,placeholder:v.$t("lang.common.write_a_comment"),content:t(z),fieldType:"reply",videoURL:t(Z)?t(X):"",thumbnailURL:t(Z)?t(_):"",videoData:t(Z)?t(Q):"",onSetIsUploadingVideo:be,onRemoveVideo:_e,onOpenVideoPlayModal:j[10]||(j[10]=J=>L(t(S))),onGetVideo:ae,smallInputField:!0,paddingBottom:"!pb-14",height:"65",dropDownPosition:"top"},{"editor-more-options":F(()=>[r("div",bs,[e.creator_data.own_page&&!t(Q)?(o(),l("div",{key:0,onClick:j[9]||(j[9]=J=>O(t(Ee).REPLY)),role:"button",tabindex:"0",class:N(["rounded-full inline-flex gap-2 px-2.5 py-1.5 h-[34px] items-center font-cr-medium text-[14px] text-black bg-white shadow-dropdown-lg tw-scale-on-hover hover:bg-greyF5 cursor-pointer",{"xs-sm:px-1.5 xs-sm:h-[30px]":v.fromPage="home"}])},[r("div",xs,[x(lt)]),q(" "+h(v.$t("lang.common.reply_with_video")),1)],2)):d("",!0)])]),_:1},8,["class","currentUser","creatorData","placeholder","content","videoURL","thumbnailURL","videoData"])])],2),r("div",ws,[x(ye,{class:"w-24 h-10 tw-theme-color-rounded-full text-sm font-cr-bold text-themeTextColor relative cursor-pointer px-4 py-1.5",role:"button",tabindex:"0",onClick:j[11]||(j[11]=J=>Me(e.trans.resource_id)),initiallyDisabled:t(T),disabled:t(T),btnType:"primary"},{default:F(()=>[r("span",null,h(v.$t("lang.common.send")),1)]),_:1},8,["initiallyDisabled","disabled"])])])):d("",!0)]),x(Tt,{align:"right",contentClasses:["bg-white rounded-lg shadow-dropdown-sm border border-dark/5 !mt-0 overflow-y-hidden"],widthClass:"w-max",getDropdownCheck:!0,onIsOpen:H,class:"flex-shrink-0 ml-auto -mt-1 -mr-2"},{trigger:F(()=>[r("div",{role:"button",tabindex:"0","aria-label":v.$t("lang.a11y.more_options"),"aria-haspopup":"menu","aria-expanded":t(he),class:N(["group relative tw-scale-on-hover close-bg-transition duration-100 hover:bg-dark/5 active:bg-dark/10 rounded-full cursor-pointer w-8 h-8 flex justify-center items-center",t(he)?"bg-dark/5":""])},[x(Mt,{class:"cursor-pointer",fillClass:"fill-dark/70"})],10,Cs)]),content:F(()=>[r("ul",$s,[A.value?(o(),l("li",{key:0,role:"button",tabindex:"0",onClick:De,class:"cursor-pointer relative text-sm rounded-lg flex text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark"},h(v.$t("lang.common.share")),1)):d("",!0),e.creator_data.own_page||e.trans.supporter.id&&e.trans.supporter.id===t(n).user_id?(o(),l("li",{key:1,role:"button",tabindex:"0",onClick:P,class:"cursor-pointer relative text-sm rounded-lg text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark"},h(t(re)?v.$t("lang.home.make_this_public"):v.$t("lang.home.make_this_private")),1)):d("",!0),e.trans.supporter.id!=""&&e.trans.supporter.id&&e.trans.supporter.id==t(n).user_id&&(t(u)||t(f)||t(p))?(o(),l("li",{key:2,role:"button",tabindex:"0",onClick:j[12]||(j[12]=J=>c("openDeleteConfirmModal","comment",e.trans.id)),class:"cursor-pointer rounded-lg relative text-sm text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark"}," Delete this comment ")):d("",!0),e.creator_data.own_page?(o(),l(ce,{key:3},[r("li",{role:"button",tabindex:"0",onClick:fe,class:"cursor-pointer relative text-sm text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark rounded-lg"},h(e.trans.pinned==0?v.$t("lang.home.pin_to_my_page"):v.$t("lang.home.unpin_from_my_page")),1),t(u)?(o(),l("li",{key:0,role:"button",tabindex:"0",onClick:Ce,class:"cursor-pointer relative text-sm text-grey71 font-cr-regular px-3 py-2 hover:bg-grey71/5 hover:text-dark rounded-lg"},h(e.trans.message_visibility?v.$t("lang.home.hide_comment"):v.$t("lang.home.show_comment")),1)):d("",!0)],64)):d("",!0)])]),_:1})])],2)}}};const ks={class:"w-[500px] text-center bg-white rounded-xl p-6 xs:w-full xs:rounded-b-none"},Ms={class:"text-xl font-cr-bold text-dark mb-4"},Ts={class:"w-113 min-h-[227px]"},Ss={key:1,class:"og-loader w-113 h-[227px] flex items-center justify-center pb-5"},Ps=r("span",null,null,-1),Rs=r("span",null,null,-1),Ds=r("span",null,null,-1),Us=[Ps,Rs,Ds],Vs={class:"flex mt-4 xs:flex-wrap"},Ls=r("textarea",{"aria-hidden":"true",tabindex:"-1",class:"absolute opacity-0 -z-10 top-0 w-0 h-0 left-0",id:"messageUrl"},null,-1),Is={__name:"ShareMessageModal",props:["trans","ogImgUrl","creatorData","current_user_data"],emits:["close"],setup(e,{emit:c}){const a=e;let n=s(!1),u=i.trimUrl(Se.supporterCommentShare(a.trans.notification_id)),m=s(""),f=s(),k=s(""),p=a.trans.support_visibility==0;const $=()=>{i.copyLink("messageUrl",u),n.value=!0,setTimeout(()=>{n.value=!1},2e3)},S=()=>{if(a.trans.support_type=="Supporter")m.value=a.trans.widget_version===Ze.Suggested?"lang.share.onetime.later_tweet_text_thank_you_v2":"lang.share.onetime.later_tweet_text_thank_you";else if(a.trans.support_type=="Membership")m.value="lang.share.membership.later_tweet_text_thank_you";else if(a.trans.support_type=="Monthly Supporter")m.value="lang.share.monthly_support.later_tweet_text_thank_you";else if(a.trans.support_type=="Extra"){var w="";if(a.trans.reward_titles.length>0){var T=a.trans.reward_titles;T.length===1?w=T[0]:T.length===2?w=`${T[0]} and ${T[1]}`:w=`${T[0]}, ${T[1]} +${T.length-2} more`}k.value=i.sanitizeTweet(w),m.value="lang.share.extra.later_tweet_text_thank_you"}else a.trans.support_type=="Wishlist"?m.value="lang.share.wishlist.later_tweet_text_thank_you":m.value="lang.share.commissions.later_tweet_text_thank_you"};return Oe(()=>{S(),f.value=a.trans.support_id!=""&&(a.trans.support_visibility==1||a.trans.support_visibility=="")}),(w,T)=>(o(),D(Be,{onClose:T[0]||(T[0]=y=>w.$emit("close"))},{default:F(()=>[r("div",ks,[Ne(w.$slots,"close"),r("h1",Ms,[Ne(w.$slots,"title",{},()=>[q(h(w.$t("lang.share.share_title"))+" 🎉",1)])]),r("div",Ts,[e.ogImgUrl?(o(),D(Re,{key:0,src:e.ogImgUrl,alt:w.$t("lang.a11y.og_img"),cropWidth:[250],cropSize:[250],noImageCrop:!0,intrinsicSize:500,imageClass:"w-full h-full object-cover rounded-xl"},null,8,["src","alt"])):(o(),l("div",Ss,Us))]),r("div",Vs,[Ls,x(ye,{role:"button",tabindex:"0","aria-label":w.$t("lang.a11y.copy_link"),onClick:$,class:"w-1/2 xs:w-full font-cr-medium text-sm text-dark tw-grey-color-rounded-full before:border-1 before:border-dark/5 py-3"},{default:F(()=>[t(n)?d("",!0):(o(),D(st,{key:0,class:"mr-2",width:"17",height:"16"})),q(" "+h(t(n)?w.$t("lang.common.copied"):w.$t("lang.common.copy_link")),1)]),_:1},8,["aria-label"]),x(Ge,{role:"button",tabindex:"0","aria-label":w.$t("lang.a11y.twitter_share"),href:`${t(Te).tweetUrlPrefix}${w.$t(t(m),{supporter:t(p)?"Someone":e.trans.profile_full_name,creator:e.creatorData.name,work:e.creatorData.work?e.creatorData.name+" is "+e.creatorData.work+". ":"",alternative:e.creatorData.tag_alternative,emoji:e.creatorData.tag_emoji,rewards:t(k),wishlist_title:e.trans.wishlist_title?e.trans.wishlist_title:"",commission_title:e.trans.commission_title?e.trans.commission_title:""})} — ${t(u)}`,onclick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",class:"w-1/2 xs:w-full text-sm !font-cr-medium text-white tw-dark-color-rounded-full px-4 py-3 ml-4 xs:ml-0 xs:mt-4"},{default:F(()=>[x(Fe,{width:"16",height:"16",fillClass:"fill-white",class:"mr-4"}),q(" "+h(w.$t("lang.common.tweet_this")),1)]),_:1},8,["aria-label","href"])])])]),_:3}))}};const Os={class:"w-[500px] text-center bg-white rounded-xl p-6 xs:w-full xs:rounded-b-none"},Es={class:"text-xl font-cr-bold text-dark mb-4"},js={class:"w-113 min-h-[227px]"},zs={key:1,class:"og-loader w-113 h-[227px] flex items-center justify-center pb-5"},Hs=r("span",null,null,-1),Bs=r("span",null,null,-1),Fs=r("span",null,null,-1),Ws=[Hs,Bs,Fs],Ns={class:"flex mt-4 xs:flex-wrap"},As=r("textarea",{"aria-hidden":"true",tabindex:"-1",class:"absolute opacity-0 -z-10 top-0 w-0 h-0 left-0",id:"messageUrl"},null,-1),Zs={__name:"ShareMessageModal_v2",props:["trans","ogImgUrl","creatorData","current_user_data","timelineV2"],emits:["close"],setup(e,{emit:c}){const a=e;let n=s(!1),u=i.trimUrl(Se.supporterCommentShareV2(a.trans.id)),m=s(""),f=s(),k=s(""),p=a.trans.visibility==0;const $=()=>{i.copyLink("messageUrl",u),n.value=!0,setTimeout(()=>{n.value=!1},2e3)},S=()=>{var y;if(a.trans.type==ue.ONE_TIME_SUPPORT)m.value=a.trans.widget_version===Ze.Suggested?"lang.share.onetime.later_tweet_text_thank_you_v2":"lang.share.onetime.later_tweet_text_thank_you";else if(a.trans.type===ue.RECURRING_DONATION)m.value="lang.share.monthly_support.later_tweet_text_thank_you";else if(a.trans.type==ue.MEMBERSHIP)m.value="lang.share.membership.later_tweet_text_thank_you";else if(a.trans.type==ue.EXTRA_PURCHASE){var w="";if(((y=a.trans.details.extras)==null?void 0:y.length)>0){var T=a.trans.details.extras;T.length===1?w=T[0].extra_title:T.length===2?w=`${T[0].extra_title} and ${T[1].extra_title}`:w=`${T[0].extra_title}, ${T[1].extra_title} +${T.length-2} more`}k.value=i.sanitizeTweet(w),m.value="lang.share.extra.later_tweet_text_thank_you"}else a.trans.type==ue.WISHLIST?m.value="lang.share.wishlist.later_tweet_text_thank_you":m.value="lang.share.commissions.later_tweet_text_thank_you"};return Oe(()=>{S(),f.value=a.trans.resource_id!=""&&(a.trans.visibility==1||a.trans.visibility=="")}),(w,T)=>(o(),D(Be,{onClose:T[0]||(T[0]=y=>w.$emit("close"))},{default:F(()=>[r("div",Os,[Ne(w.$slots,"close"),r("h1",Es,[Ne(w.$slots,"title",{},()=>[q(h(w.$t("lang.share.share_title"))+" 🎉",1)])]),r("div",js,[e.ogImgUrl?(o(),D(Re,{key:0,src:e.ogImgUrl,alt:w.$t("lang.a11y.twitter_share"),cropWidth:[250],cropSize:[250],noImageCrop:!0,intrinsicSize:500,imageClass:"w-full h-full object-cover rounded-xl"},null,8,["src","alt"])):(o(),l("div",zs,Ws))]),r("div",Ns,[As,x(ye,{role:"button",tabindex:"0","aria-label":w.$t("lang.a11y.copy_link"),onClick:$,class:"w-1/2 xs:w-full font-cr-medium text-sm text-dark tw-grey-color-rounded-full before:border-1 before:border-dark/5 py-3"},{default:F(()=>[t(n)?d("",!0):(o(),D(st,{key:0,"aria-hidden":t(n),class:"mr-2",width:"17",height:"16"},null,8,["aria-hidden"])),q(" "+h(t(n)?w.$t("lang.common.copied"):w.$t("lang.common.copy_link")),1)]),_:1},8,["aria-label"]),x(Ge,{"aria-label":w.$t("lang.a11y.twitter_share"),href:`${t(Te).tweetUrlPrefix}${w.$t(t(m),{supporter:t(p)?"Someone":e.trans.supporter.name,creator:e.creatorData.name,work:e.creatorData.work?e.creatorData.name+" is "+e.creatorData.work+". ":"",alternative:e.creatorData.tag_alternative,emoji:e.creatorData.tag_emoji,rewards:t(k),wishlist_title:e.trans.details.wishlist_title?e.trans.details.wishlist_title:"",commission_title:e.trans.details.commission_name?e.trans.details.commission_name:""})} — ${t(u)}`,onclick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",class:"w-1/2 xs:w-full text-sm !font-cr-medium text-white tw-dark-color-rounded-full px-4 py-3 ml-4 xs:ml-0 xs:mt-4"},{default:F(()=>[x(Fe,{width:"16",height:"16",fillClass:"fill-white",class:"mr-4"}),q(" "+h(w.$t("lang.common.tweet_this")),1)]),_:1},8,["aria-label","href"])])])]),_:3}))}};const Gs={class:"rounded flex items-center xs:justify-center"},qs=["src"],Ys=["src"],Ks={__name:"VideoPlayer",props:["videoCommentUrl","videoMeta","isSupportNote"],setup(e){const c=e;s("video/mp4");let a=s(""),n=s(""),u=s(),m=s(!1),f=s(null),k=s(m.value?"mx-3":(c.isSupportNote?"w-[471px] h-[772px]":"w-100 h-179")+" xs:w-screen xs:h-fill-available");Oe(()=>{a.value=c.videoMeta.thumbnail,p()=="landscape"&&(m.value=!0),i.isIOSDevice()||n.value.play()});const p=()=>{const y=n.value;if(!y)return"unknown";const M=c.videoMeta.width||y.naturalWidth,E=c.videoMeta.height||y.naturalHeight;return M>E?"landscape":M<E?"portrait":"square"},$={play(){f.value&&f.value.play()},pause(){f.value&&f.value.pause()},seek(y){f.value&&(f.value.currentTime=y)}},S=()=>{$.play()},w=()=>{$.pause()},T=()=>{$.seek(n.value.currentTime)};return(y,M)=>(o(),l("div",{ref_key:"playerModalContainer",ref:u,tabindex:"0",onKeyup:M[3]||(M[3]=et(E=>y.$emit("close"),["esc"]))},[x(Be,{outerClasses:"!overflow-y-hidden h-fill-available",modalBgClass:"fixed inset-0 bg-black fade-in-modal",modalClass:"w-full flex !my-0 justify-center h-fill-available",onClose:M[2]||(M[2]=E=>y.$emit("close"))},{default:F(()=>[r("div",{style:Ve({backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0.75)),url(${t(a)})`}),class:"w-full absolute top-0 left-0 h-full blur-[6rem] bg-no-repeat bg-center bg-cover"},null,4),x(Dt,{fillClass:"fill-dark",onClick:M[0]||(M[0]=E=>y.$emit("close")),class:"w-12 h-12 z-100 fixed md:absolute right-[30px] top-6 xs:right-3 xs:top-2 bg-white hover:bg-white/80",iconSize:{width:18.57,height:18.57}}),r("div",Gs,[r("div",{class:N([t(k),"tw-bg-grey71/10 rounded-xl xs:rounded-none relative flex items-center justify-center focus-visible:outline-none select-none cursor-pointer"])},[r("video",{ref_key:"videoElem",ref:n,onPlay:S,onPause:w,onSeeked:T,onWebkitendfullscreen:M[1]||(M[1]=E=>y.$emit("close")),playsinline:"","webkit-playsinline":"",controls:"",class:N([{"fip-video":e.isSupportNote},"w-full xs:max-h-full max-h-[95vh] rounded-xl h-full object-cover focus-visible:outline-none"])},[r("source",{src:e.videoCommentUrl+"_converted.mp4",type:"video/mp4"},null,8,qs),r("source",{src:e.videoCommentUrl},null,8,Ys)],34)],2)])]),_:1})],544))}},Xs="https://cdn.buymeacoffee.com/static/prod/8.9.0/build/assets/video_banner-916bccf5.png",Qs={class:"w-[436px] xs:w-[343px] bg-white flex flex-col items-center rounded-xl"},Js=["innerHTML"],en=["innerHTML"],tn={class:"inline-flex w-full justify-center mt-5"},an=["src"],rn={key:0},on={class:"xs:hidden mt-6 w-full"},ln={class:"w-full flex justify-center",ref:"qrCodeContainer"},sn=["src"],nn={class:"text-center pb-7 pt-4 text-dark text-sm font-cr-regular"},dn=r("br",null,null,-1),un={href:"https://apps.apple.com/us/app/buy-me-a-coffee/id1480229954",target:"_blank",class:"underline"},cn={href:"https://play.google.com/store/apps/details?id=app.buymeacoffee&hl=en_US&pli=1",target:"_blank",class:"underline"},mn={class:"hidden xs:block mx-auto mt-6"},fn={class:"font-cr-bold text-md"},pn={key:1},hn={class:"mt-6 mb-10 xs:mb-8 px-12 xs:px-6 w-full flex flex-col items-center justify-center"},vn={class:"refer-text-wrapper font-cr-regular text-base leading-6 text-center"},gn=["href"],_n={class:"font-cr-medium text-base leading-6"},yn={__name:"VideoReplyOnAppQR",props:["creator_data"],setup(e){const c=e,a=ke(()=>c.creator_data.own_page);return(n,u)=>(o(),D(Be,{outerClasses:"xs:items-center",modalMobileClass:"xs:mx-auto xs:my-12 xs:w-[343px]",onClose:u[2]||(u[2]=m=>n.$emit("close"))},{default:F(()=>[r("div",Qs,[x(St,{onClick:u[0]||(u[0]=m=>n.$emit("close")),class:"w-8 h-8 absolute right-3 top-3",iconSize:{width:14,height:14}}),r("div",{class:N([a.value?"bg-[#EFD475]":"bg-primary","w-full rounded-t-xl h-[342px] overflow-hidden"])},[a.value?(o(),l("div",{key:0,class:"mx-auto max-w-[250px] mt-7 tracking-tighter text-center text-dark text-2xl font-bold font-cr-bold leading-[30px]",innerHTML:t(i).sanitizeHtml(n.$t("lang.common.open_reply_with_video"))},null,8,Js)):(o(),l("div",{key:1,class:"mx-auto max-w-[250px] mt-7 tracking-tighter text-center text-dark text-2xl font-bold font-cr-bold leading-[30px]",innerHTML:t(i).sanitizeHtml(n.$t("lang.common.refer_to_unlock_video_reply"))},null,8,en)),r("div",tn,[r("img",{src:t(Xs),width:"200"},null,8,an)])],2),a.value?(o(),l("div",rn,[r("div",on,[r("div",ln,[r("img",{src:`${t(Te).cdnUrl}assets/img/app/bmc-app-qr.png`,class:"mx-auto w-[125px] h-[125px]"},null,8,sn)],512),r("div",nn,[r("span",null,[q(h(n.$t("lang.common.scan_qr_code_download")),1),dn,q(h(n.$t("lang.common.our"))+" ",1)]),r("a",un,h(n.$t("lang.common.ios")),1),r("span",null," "+h(n.$t("lang.common.or"))+" ",1),r("a",cn,h(n.$t("lang.common.android")),1),r("span",null," "+h(n.$t("lang.common.app")),1)])]),r("div",mn,[x(ye,{onClick:u[1]||(u[1]=m=>t(i).openBMCApp()),class:"w-[295px] h-10 mb-8 text-sm text-white mx-6 font-cr-bold rounded-lg bg-dark relative cursor-pointer px-4 py-1.5 tw-scale-on-hover",btnType:"primary"},{default:F(()=>[r("span",fn,h(n.$t("lang.common.open_app")),1)]),_:1})])])):(o(),l("div",pn,[r("div",hn,[r("div",vn,[r("p",null,h(n.$t("lang.common.refer_to_unlock_video_reply_description")),1)]),r("a",{href:t(Te).mainUrl+"/refer",target:"_blank",class:"mt-4 px-6 py-3 bg-black hover:bg-opacity-80 rounded-lg text-white text-center w-fit xs:w-full"},[r("span",_n,h(n.$t("lang.common.refer_a_friend")),1)],8,gn)])]))])]),_:1}))}};const bn={class:"w-[480px] text-center bg-white rounded-xl p-7 pt-4 xs:w-full xs:rounded-b-none"},xn=["innerHTML"],wn={class:"mt-2"},Cn={key:0,class:"bg-pageTheme05 rounded py-2 px-4 text-left msgOnCommModal w-fit"},$n=["innerHTML"],kn=["src"],Mn={class:"w-full h-full rounded-xl object-cover object-center",alt:"video"},Tn=["src"],Sn=["src"],Pn={class:"flex mt-2 relative tw-comment-connect-line"},Rn={class:"flex flex-col gap-2"},Dn={class:"ml-4"},Un={key:0,class:"text-dark font-cr-regular minxs:text-sm break-words flex"},Vn={class:"font-cr-medium mr-1"},Ln=["innerHTML"],In=["onClick"],On=["poster"],En=["src"],jn=r("svg",{class:"absolute",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{width:"40",height:"40",rx:"20",fill:"black","fill-opacity":"0.4"}),q(),r("path",{d:"M14.6667 10.6667V29.3334L29.3334 20L14.6667 10.6667Z",fill:"white"})],-1),zn={key:1,class:"relative"},Hn=["href"],Bn={class:"flex mt-6"},Fn={key:0,class:"relative w-fit flex ml-3 mb-3"},Wn={class:"relative","aria-hidden":"true"},Nn={key:1,class:"flex justify-end mt-3"},An={class:"flex mt-6"},Zn=r("textarea",{"aria-hidden":"true",tabindex:"-1",class:"absolute text-sm opacity-0 -z-10 top-0 w-0 h-0 left-0",id:"CommentUrl"},null,-1),Gn={__name:"CommReplyModal",props:["creatorData","current_user_data","showReplyOption","showReplyOptionEnabled","notification","recordedVideoData"],emits:["close","openVideoPlayModal","toggleVideoRecorderModal","reloadTransactions"],setup(e,{emit:c}){const a=e;let n=s(!1),u=i.trimUrl(Se.supporterCommentShare(a.notification.data.id)),m=s(),f=s(!1),k=s(!1),p=s([]),$=s(""),S=s(),w=s("");a.creatorData.twitter_handle?`${a.creatorData.twitter_handle}`:a.creatorData.name;let T=a.notification.data.support_visibility==0,y=s(""),M=s(""),E=s(a.recordedVideoData),U=s(""),B=s(!1);Oe(()=>{p.value=a.notification.data.comments?a.notification.data.comments:[],z(),S.value=a.notification.data.support_id!=""&&(a.notification.data.support_visibility==1||a.notification.data.support_visibility=="")}),Ue(()=>a.recordedVideoData,C=>{E.value=C,y.value=C!=null&&C.video_data?URL.createObjectURL(C.video_data):y.value,M.value=C!=null&&C.thumbnail_data?URL.createObjectURL(C.thumbnail_data):M.value});let b=ke(()=>{var C;return a.recordedVideoData&&((C=a.recordedVideoData)==null?void 0:C.message_type)===Ee.REPLY});const z=()=>{if(a.notification.data.support_type=="Supporter")$.value=a.notification.data.widget_version===Ze.Suggested?"lang.share.onetime.later_tweet_text_thank_you_v2":"lang.share.onetime.later_tweet_text_thank_you";else if(a.notification.data.support_type=="Membership")$.value="lang.share.membership.later_tweet_text_thank_you";else if(a.notification.data.support_type=="Monthly Supporter")$.value="lang.share.monthly_support.later_tweet_text_thank_you";else if(a.notification.data.support_type=="Extra"){var C="";if(a.notification.data.reward_titles.length>0){var V=a.notification.data.reward_titles;V.length===1?C=V[0]:V.length===2?C=`${V[0]} and ${V[1]}`:C=`${V[0]}, ${V[1]} +${V.length-2} more`}w.value=i.sanitizeTweet(C),$.value="lang.share.extra.later_tweet_text_thank_you"}else a.notification.data.support_type=="Wishlist"?$.value="lang.share.wishlist.later_tweet_text_thank_you":$.value="lang.share.commissions.later_tweet_text_thank_you"},I=()=>{i.copyLink("CommentUrl",u),n.value=!0,setTimeout(()=>{n.value=!1},2e3)},Y=async C=>{var X;f.value=!0;let V={video_url:b?U.value.video_path:"",thumbnail_url:b?U.value.thumbnail_path:"",filetype:b?(X=U.value.video_filetype)==null?void 0:X.replace(/^video\//,""):"",filesize:b?U.value.video_filesize:""};if(m.value&&m.value.trim()&&(V.comment=m.value),a.notification.data.subscription_id!=null)var Q=`api/v1/membership/${C}/comments`;else var Q=`api/v1/coffees/${C}/comments`;await axios.post(Q,V).then(_=>{if(_.data.data&&(_.data.data.message||_.data.data.video_url)){var W=_.data.data;a.current_user_data.data.project_id==a.notification.data.project_id?W.creator=1:W.creator=0,p.value.push(W),m.value="",E.value="",U.value="",y.value="",M.value="",f.value=!1,c("reloadTransactions","update")}}).catch(_=>{})},ie=(C,V)=>{m.value=C,C.replace(/\s/g,"").length>0||U.value?k.value=!B.value:k.value=!1},se=C=>{let V={thumbnail:i.getUrlWithCdnPath((C==null?void 0:C.thumbnail_path)??"")};c("openVideoPlayModal",i.getUrlWithCdnPath((C==null?void 0:C.video_path)??""),V,!0)},ee=C=>{c("toggleVideoRecorderModal",a.notification.data.id,C)},he=C=>{C!=null&&C.video_data&&(U.value={video_path:C.video_data.path,thumbnail_path:C.thumbnail_data.path??"",message_type:C.message_type,video_filesize:C.video_filesize,video_filetype:C.video_mimetype},k.value=!0,y.value=C.video_data.full_path,M.value=C.thumbnail_data.full_path,B.value=!1)},re=C=>{B.value=C,C&&(k.value=!1)},ge=()=>{var C;E.value=null,B.value=!1,U.value="",((C=m==null?void 0:m.value)==null?void 0:C.replace(/\s/g,"").length)>0||U!=null&&U.value||(k.value=!1),y.value="",M.value=""};return Te.mainUrl,(C,V)=>(o(),D(Be,{onClose:V[4]||(V[4]=Q=>C.$emit("close"))},{default:F(()=>{var Q,X,_,W,ve,le,me,fe,Ce;return[r("div",bn,[Ne(C.$slots,"close"),r("div",null,[x(Re,{src:e.notification.data.profile_picture_url,alt:e.notification.data.profile_full_name,cropWidth:[120],cropSize:[120],intrinsicSize:120,imageClass:"w-20 h-20 object-cover rounded-full  border-4 border-solid border-white"},null,8,["src","alt"])]),r("h1",{class:"text-xl font-cr-medium text-black mb-2 w-fit",innerHTML:e.notification.data.support_message},null,8,xn),r("div",wn,[t(i).sanitizeHtml(e.notification.data.support_note)?(o(),l("div",Cn,[t(i).sanitizeHtml(e.notification.data.support_note)?(o(),l("span",{key:0,class:"font-cr-regular text-sm text-black tw-break-word",innerHTML:t(i).sanitizeHtml(e.notification.data.support_note)},null,8,$n)):d("",!0)])):d("",!0),(Q=e.notification.data)!=null&&Q.support_gif?(o(),l("img",{key:1,src:t(i).getGifURLFromId(e.notification.data.support_gif),class:"w-[117px] h-[84px] rounded-xl my-1 object-cover object-center"},null,8,kn)):d("",!0),(_=(X=e.notification.data)==null?void 0:X.support_video)!=null&&_.video_path?(o(),l("div",{key:2,onClick:V[0]||(V[0]=P=>se(e.notification.data.support_video)),style:Ve({backgroundImage:"url("+t(i).getUrlWithCdnPath((ve=(W=e.notification.data)==null?void 0:W.support_video)==null?void 0:ve.thumbnail_path)+")"}),class:"flex items-center justify-center w-[124px] h-[174px] my-1 overflow-hidden rounded-xl relative cursor-pointer bg-grey71 bg-cover bg-center bg-no-repeat"},[r("video",Mn,[r("source",{src:t(i).getUrlWithCdnPath((me=(le=e.notification.data)==null?void 0:le.support_video)==null?void 0:me.video_path)+"_converted.mp4",type:"video/mp4"},null,8,Tn),r("source",{src:t(i).getUrlWithCdnPath((Ce=(fe=e.notification.data)==null?void 0:fe.support_video)==null?void 0:Ce.video_path)},null,8,Sn)]),x(nt,{class:"absolute"})],4)):d("",!0)]),t(p)?(o(!0),l(ce,{key:0},we(t(p),(P,Z)=>{var ne;return o(),l("div",{key:Z},[r("div",Pn,[x(Re,{src:P.creator==1?e.creatorData.dp:e.notification.data.profile_picture_url,alt:P.creator==1?e.creatorData.name:e.notification.data.profile_full_name,cropWidth:[40],cropSize:[40],intrinsicSize:80,imageClass:"w-10 h-10 object-cover rounded-full flex-shrink-0"},null,8,["src","alt"]),r("div",Rn,[r("div",Dn,[P!=null&&P.message?d("",!0):(o(),l("p",Un,[x(t(Xe),{href:P.creator==1?t(Se).homePage(e.creatorData.slug):t(Se).homePage(P.commented_project_slug)},{default:F(()=>[r("span",Vn,h(P.creator==1?e.creatorData.name:e.notification.data.profile_full_name),1)]),_:2},1032,["href"]),q(" "+h(C.$t("lang.common.replied")),1)])),P.message?(o(),l("div",{key:1,class:"text-left rounded inline-block w-full py-2 pr-4 font-cr-regular text-sm tw-break-word",innerHTML:t(i).sanitizeHtml(P.message)},null,8,Ln)):d("",!0),((ne=P.video_url)==null?void 0:ne.length)>0?(o(),l("div",{key:2,onClick:de=>C.$emit("openVideoPlayModal",P.video_url,P.meta),class:N(["w-[124px] h-[174px] rounded-xl relative flex items-center justify-center select-none cursor-pointer",[P!=null&&P.message?"":"mt-3"]])},[r("video",{poster:P.meta.thumbnail,class:"w-full rounded-xl h-full object-cover"},[r("source",{src:P.video_url,type:"video/mp4"},null,8,En)],8,On),jn],10,In)):d("",!0)])])])])}),128)):d("",!0),e.showReplyOption?(o(),l("div",zn,[e.showReplyOptionEnabled?d("",!0):(o(),l("a",{key:0,href:t(i).loginUrl(),rel:"nofollow",class:N("absolute top-0 left-0 w-full h-full z-10")},null,8,Hn)),r("div",Bn,[x(Ae,{class:N(["w-full actionWrapper","text-sm"]),hideEmojiPicker:!1,smallInputField:!0,onGetContent:ie,placeholder:C.$t("lang.common.write_a_comment"),content:t(m),fieldType:"reply",currentUser:e.current_user_data,creatorData:e.creatorData,videoURL:t(b)?t(y):"",thumbnailURL:t(b)?t(M):"",videoData:t(b)?t(E):"",onRemoveVideo:ge,onOpenVideoPlayModal:V[2]||(V[2]=P=>se(t(U))),onGetVideo:he,onSetIsUploadingVideo:re,height:"65"},{"editor-more-options":F(()=>[t(E)?d("",!0):(o(),l("div",Fn,[r("div",{role:"button",tabindex:"0",onClick:V[1]||(V[1]=()=>ee(t(Ee).REPLY)),class:"rounded-full inline-flex gap-2 px-2.5 py-1.5 h-[34px] items-center font-cr-medium text-[14px] text-black bg-white shadow-dropdown-lg tw-scale-on-hover hover:bg-greyF5 cursor-pointer"},[r("div",Wn,[x(lt)]),q(" "+h(C.$t("lang.common.reply_with_video")),1)])]))]),_:1},8,["placeholder","content","currentUser","creatorData","videoURL","thumbnailURL","videoData"])]),e.showReplyOptionEnabled&&t(k)?(o(),l("div",Nn,[x(ye,{class:"tw-theme-color-rounded-full text-sm font-cr-bold text-themeTextColor relative cursor-pointer px-3 py-1.5 mr-2 h-8",onClick:V[3]||(V[3]=P=>Y(e.notification.data.subscription_id!=null?e.notification.data.subscription_id:e.notification.data.support_id)),initiallyDisabled:t(f),disabled:t(f),btnType:"primary"},{default:F(()=>[r("span",null,h(C.$t("lang.common.send")),1)]),_:1},8,["initiallyDisabled","disabled"])])):d("",!0)])):d("",!0),r("div",An,[Zn,x(ye,{onClick:I,"aria-label":C.$t("lang.a11y.copy_link"),class:"w-1/2 font-cr-medium text-sm text-dark tw-grey-color-rounded-full before:border-1 before:border-dark/5 py-3"},{default:F(()=>[t(n)?d("",!0):(o(),D(st,{key:0,class:"mr-2",width:"17",height:"16"})),q(" "+h(t(n)?C.$t("lang.common.copied"):C.$t("lang.common.copy_link")),1)]),_:1},8,["aria-label"]),x(Ge,{role:"button",tabindex:"0","aria-label":C.$t("lang.a11y.twitter_share"),href:`${t(Te).tweetUrlPrefix}${C.$t(t($),{supporter:t(T)?"Someone":e.notification.data.profile_full_name,creator:e.creatorData.name,work:e.creatorData.work?e.creatorData.name+" is "+e.creatorData.work+". ":"",alternative:e.creatorData.tag_alternative,emoji:e.creatorData.tag_emoji,rewards:t(w),wishlist_title:e.notification.data.wishlist_title?e.notification.data.wishlist_title:"",commission_title:e.notification.data.commission_title?e.notification.data.commission_title:""})} — ${t(u)}`,onclick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",class:"w-1/2 text-sm !font-cr-medium text-white tw-dark-color-rounded-full px-4 py-3 ml-4"},{default:F(()=>[x(Fe,{width:"16",height:"16",fillClass:"fill-white",class:"mr-4"}),q(" "+h(C.$t("lang.common.tweet_this")),1)]),_:1},8,["aria-label","href"])])])]}),_:3}))}};const qn={class:"w-[480px] text-center bg-white rounded-xl p-7 pt-4 xs:w-full xs:rounded-b-none"},Yn={class:"text-xl font-cr-medium text-black mb-2 w-fit"},Kn={class:"flex"},Xn=["href"],Qn=r("div",null,"/",-1),Jn={class:"text-sm text-dark font-cr-regular msgOnHome",style:{"word-break":"break-word"}},ei={class:"suppUsername text-xl font-cr-medium text-black mb-2 w-fit"},ti=["href"],ai=["href"],ri={key:2},oi={class:"text-xl font-cr-medium text-black mb-2 w-fit"},li={key:0},si={key:0},ni={key:1},ii={key:0},di={key:0},ui={key:1},ci={key:1},mi={key:0},fi={key:1},pi={key:1},hi={key:2},vi=["innerHTML"],gi=["innerHTML"],_i=["innerHTML"],yi={class:"mt-2"},bi={key:0,class:"bg-pageTheme05 rounded py-2 px-4 text-left msgOnCommModal w-fit"},xi=["innerHTML"],wi=["src"],Ci={class:"w-full h-full rounded-xl object-cover object-center",alt:"video"},$i=["src"],ki=["src"],Mi={class:"flex mt-2 relative tw-comment-connect-line"},Ti={class:"flex flex-col gap-2"},Si={class:"ml-4"},Pi={key:0,class:"text-dark font-cr-regular minxs:text-sm break-words flex"},Ri={class:"font-cr-medium mr-1"},Di=["innerHTML"],Ui=["onClick"],Vi=["poster"],Li=["src"],Ii=r("svg",{class:"absolute",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{width:"40",height:"40",rx:"20",fill:"black","fill-opacity":"0.4"}),q(),r("path",{d:"M14.6667 10.6667V29.3334L29.3334 20L14.6667 10.6667Z",fill:"white"})],-1),Oi={key:1,class:"relative"},Ei=["href"],ji={class:"flex mt-6"},zi={key:0,class:"relative w-fit flex ml-3 mb-3"},Hi={class:"relative","aria-hidden":"true"},Bi={key:1,class:"flex justify-end mt-3"},Fi={class:"flex mt-6"},Wi=r("textarea",{"aria-hidden":"true",tabindex:"-1",class:"absolute text-sm opacity-0 -z-10 top-0 w-0 h-0 left-0",id:"CommentUrl"},null,-1),Ni={__name:"CommReplyModal_v2",props:["creatorData","current_user_data","showReplyOption","showReplyOptionEnabled","notification","recordedVideoData"],emits:["close","openVideoPlayModal","toggleVideoRecorderModal","reloadTransactions"],setup(e,{emit:c}){const a=e;let n=s(!1),u=i.trimUrl(Se.supporterCommentShareV2(a.notification.data.id)),m=s(),f=s(!1),k=s(!1),p=s([]),$=s(""),S=s(),w=s("");a.creatorData.twitter_handle?`${a.creatorData.twitter_handle}`:a.creatorData.name;let T=s(""),y=a.notification.data.visibility==0,M=s(""),E=s(""),U=s(a.recordedVideoData),B=s(""),b=s(!1);Oe(()=>{p.value=a.notification.data.replies?a.notification.data.replies:[],I(),S.value=a.notification.data.resource_id!=""&&(a.notification.data.visibility==1||a.notification.data.visibility=="")}),Ue(()=>a.recordedVideoData,_=>{U.value=_,M.value=_!=null&&_.video_data?URL.createObjectURL(_.video_data):M.value,E.value=_!=null&&_.thumbnail_data?URL.createObjectURL(_.thumbnail_data):E.value});let z=ke(()=>{var _;return a.recordedVideoData&&((_=a.recordedVideoData)==null?void 0:_.message_type)===Ee.REPLY});const I=()=>{var ve;if(a.notification.data.type==ue.ONE_TIME_SUPPORT)$.value=a.notification.data.widget_version===Ze.Suggested?"lang.share.onetime.later_tweet_text_thank_you_v2":"lang.share.onetime.later_tweet_text_thank_you";else if(a.notification.data.type==ue.MEMBERSHIP)$.value="lang.share.membership.later_tweet_text_thank_you";else if(a.notification.data.type==ue.RECURRING_DONATION)$.value="lang.share.monthly_support.later_tweet_text_thank_you";else if(a.notification.data.type==ue.EXTRA_PURCHASE){var _="";if(((ve=a.notification.data.details.extras)==null?void 0:ve.length)>0){var W=a.notification.data.details.extras;W.length===1?_=W[0].extra_title:W.length===2?_=`${W[0].extra_title} and ${W[1].extra_title}`:_=`${W[0].extra_title}, ${W[1].extra_title} +${W.length-2} more`}w.value=i.sanitizeTweet(_),$.value="lang.share.extra.later_tweet_text_thank_you"}else a.notification.data.type==ue.WISHLIST?$.value="lang.share.wishlist.later_tweet_text_thank_you":$.value="lang.share.commissions.later_tweet_text_thank_you"},Y=()=>{i.copyLink("CommentUrl",u),n.value=!0,setTimeout(()=>{n.value=!1},2e3)},ie=async _=>{var le;f.value=!0;let W={video_url:z?B.value.video_path:"",thumbnail_url:z?B.value.thumbnail_path:"",filetype:z?(le=B.value.video_filetype)==null?void 0:le.replace(/^video\//,""):"",filesize:z?B.value.video_filesize:""};m.value&&m.value.trim()&&(W.note=m.value);var ve=`api/v1/timeline/${_}/replies/`;await axios.post(ve,W).then(me=>{const fe={id:me.data.data.id,creator:a.creatorData.own_page,message:{note:m.value,video:{url:z?B.value.video_path:"",thumbnail:z?B.value.thumbnail_path:""}}};p.value.push(fe),m.value="",U.value="",B.value="",M.value="",E.value="",f.value=!1,c("reloadTransactions","update")}).catch(me=>{})},se=(_,W)=>{m.value=_,_.replace(/\s/g,"").length>0||B.value?k.value=!0:k.value=!b.value},ee=_=>{let W={thumbnail:i.getUrlWithCdnPath((_==null?void 0:_.thumbnail_path)??"")};c("openVideoPlayModal",i.getUrlWithCdnPath((_==null?void 0:_.video_path)??""),W,!0)},he=(_,W)=>{c("toggleVideoRecorderModal",_,W)},re=_=>{_!=null&&_.video_data&&(B.value={video_path:_.video_data.path,thumbnail_path:_.thumbnail_data.path??"",message_type:_.message_type,video_filesize:_.video_filesize,video_filetype:_.video_mimetype},k.value=!0,M.value=_.video_data.full_path,E.value=_.thumbnail_data.full_path,b.value=!1)},ge=_=>{b.value=_,_&&(k.value=!1)},C=()=>{var _;U.value=null,b.value=!1,B.value="",((_=m==null?void 0:m.value)==null?void 0:_.replace(/\s/g,"").length)>0||B!=null&&B.value||(k.value=!1),M.value="",E.value=""},V=ke(()=>Q(a.notification.data.supporter));function Q(_){const W={twitter:"x.com",tiktok:"tiktok.com",instagram:"instagram.com"},ve={default:"twitter",twitter:"twitter",instagram:"instagram",tiktok:"tiktok"},le=_.name.substring(0,1)==="@";T.value=le?_.name.substring(1):_.name;const me=_.name_type;if(me==="default"&&!le)return null;const fe=ve[me]||null;return fe?{component:fe,link:W[fe]+"/"+T.value}:null}let X={twitter:Fe,instagram:ct,tiktok:ut};return(_,W)=>(o(),D(Be,{onClose:W[4]||(W[4]=ve=>_.$emit("close"))},{default:F(()=>{var ve,le,me,fe,Ce,P,Z,ne,de,Me,xe,De,H,A,te,_e,L,O,ae,be,v,j;return[r("div",qn,[Ne(_.$slots,"close"),r("div",null,[(ve=e.notification.data.supporter)!=null&&ve.dp?(o(),D(Re,{key:0,src:t(i).getUrlWithCdnPath(e.notification.data.supporter.dp),alt:e.notification.data.supporter.name,cropWidth:[120],cropSize:[120],intrinsicSize:120,imageClass:"w-20 h-20 object-cover rounded-full  border-4 border-solid border-white"},null,8,["src","alt"])):d("",!0)]),r("h1",Yn,[r("div",Kn,[V.value?(o(),l("a",{key:0,href:"https://"+V.value.link,class:"flex gap-0.5 mr-0.5",target:"_blank",rel:"noopener noreferrer"},[(o(),D(rt(t(X)[V.value.component]),{class:"inline-block mt-1 min-w-[16px]",key:V.value.component+e.notification.data.id,prefix:"pk_"+e.notification.data.id,width:"14",height:"14"},null,8,["prefix"])),Qn],8,Xn)):d("",!0),r("p",Jn,[r("span",ei,[V.value?(o(),l("a",{key:0,href:"https://"+V.value.link,target:"_blank",rel:"noopener noreferrer"},h(t(T)),9,ti)):e.notification.data.supporter.creator?(o(),l("a",{key:1,href:t(Se).homePage(e.notification.data.supporter.slug),target:"_blank",rel:"noopener noreferrer"},h(t(T)),9,ai)):(o(),l("span",ri,h(t(T)),1))]),r("span",oi,[e.notification.data.type===t(ue).ONE_TIME_SUPPORT?(o(),l("span",li,[e.notification.data.widget_version===t(Ze).Suggested?(o(),l("span",si,h(_.$t("lang.messages.became_a_supporter_v2",{name:""})),1)):(o(),l("span",ni,[e.notification.data.coffee_count===1?(o(),l("span",ii,[e.creatorData.own_page?(o(),l("span",di,h(_.$t("lang.messages.bought_you_a_coffee_v2",{name:"",tag:e.creatorData.tag_alternative})),1)):(o(),l("span",ui,h(_.$t("lang.messages.bought_a_coffee_v2",{name:"",tag:e.creatorData.tag_alternative})),1))])):(o(),l("span",ci,[e.creatorData.own_page?(o(),l("span",mi,h(_.$t("lang.messages.bought_you_coffees_v2",{name:"",count:e.notification.data.coffee_count,tags:t(at).includes(((me=(le=e.creatorData)==null?void 0:le.tag_alternative)==null?void 0:me.toLowerCase())??"coffee")?(e.creatorData.tag_alternative??"coffee")+"s":e.creatorData.tag_alternative??"coffee"})),1)):(o(),l("span",fi,h(_.$t("lang.messages.bought_coffees_v2",{name:"",count:e.notification.data.coffee_count,tags:t(at).includes(((Ce=(fe=e.creatorData)==null?void 0:fe.tag_alternative)==null?void 0:Ce.toLowerCase())??"coffee")?(e.creatorData.tag_alternative??"coffee")+"s":e.creatorData.tag_alternative??"coffee"})),1))]))]))])):e.notification.data.type===t(ue).MEMBERSHIP?(o(),l("span",pi,h(_.$t("lang.messages.became_member_v2",{name:""})),1)):e.notification.data.type===t(ue).RECURRING_DONATION?(o(),l("span",hi,h(_.$t("lang.messages.became_a_supporter_recurring_v2",{name:""})),1)):e.notification.data.type===t(ue).EXTRA_PURCHASE?(o(),l("span",{key:3,innerHTML:_.$t("lang.messages.claimed_reward_v2",{name:"",reward:e.notification.data.details.extras.slice(0,2).map(G=>t(i).sanitizeHtml(G.extra_title)).join(", ")+(e.notification.data.details.extras.length>2?` + ${e.notification.data.details.extras.length-2} more`:"")})},null,8,vi)):e.notification.data.type===t(ue).WISHLIST?(o(),l("span",{key:4,innerHTML:_.$t("lang.messages.contributed_to_wishlist_message_v2",{supporter:"",title:t(i).sanitizeHtml(e.notification.data.details.wishlist_title)})},null,8,gi)):e.notification.data.type===t(ue).COMMISSION?(o(),l("span",{key:5,innerHTML:_.$t("lang.messages.contributed_to_commission_message_v2",{supporter:"",title:t(i).sanitizeHtml(e.notification.data.details.commission_name)})},null,8,_i)):d("",!0)])])])]),r("div",yi,[t(i).sanitizeHtml((P=e.notification.data.supporter_message)==null?void 0:P.note)?(o(),l("div",bi,[t(i).sanitizeHtml((Z=e.notification.data.supporter_message)==null?void 0:Z.note)?(o(),l("span",{key:0,class:"font-cr-regular text-sm text-black tw-break-word",innerHTML:t(i).sanitizeHtml((ne=e.notification.data.supporter_message)==null?void 0:ne.note)},null,8,xi)):d("",!0)])):d("",!0),(Me=(de=e.notification.data)==null?void 0:de.supporter_message)!=null&&Me.gif?(o(),l("img",{key:1,src:t(i).getGifURLFromId((xe=e.notification.data.supporter_message)==null?void 0:xe.gif),class:"w-[117px] h-[84px] rounded-xl my-1 object-cover object-center"},null,8,wi)):d("",!0),(A=(H=(De=e.notification.data)==null?void 0:De.supporter_message)==null?void 0:H.video)!=null&&A.video_path?(o(),l("div",{key:2,class:"flex items-center justify-center w-[124px] h-[174px] my-1 overflow-hidden rounded-xl relative cursor-pointer bg-grey71 bg-cover bg-center bg-no-repeat",onClick:W[0]||(W[0]=G=>{var g,R;return ee((R=(g=e.notification.data)==null?void 0:g.supporter_message)==null?void 0:R.video)}),style:Ve({backgroundImage:"url("+t(i).getUrlWithCdnPath((_e=(te=e.notification.data)==null?void 0:te.support_video)==null?void 0:_e.thumbnail_path)+"@300w_0e.webp)"})},[r("video",Ci,[r("source",{src:t(i).getUrlWithCdnPath((ae=(O=(L=e.notification.data)==null?void 0:L.supporter_message)==null?void 0:O.video)==null?void 0:ae.video_path)+"_converted.mp4",type:"video/mp4"},null,8,$i),r("source",{src:t(i).getUrlWithCdnPath((j=(v=(be=e.notification.data)==null?void 0:be.supporter_message)==null?void 0:v.video)==null?void 0:j.video_path)},null,8,ki)]),x(nt,{class:"absolute"})],4)):d("",!0)]),t(p)?(o(!0),l(ce,{key:0},we(t(p),(G,g)=>{var R,oe,K,J;return o(),l("div",{key:g},[r("div",Mi,[x(Re,{src:G.creator?e.creatorData.dp:t(i).getUrlWithCdnPath(e.notification.data.supporter.dp),alt:G.creator?e.creatorData.name:e.notification.data.supporter.name,cropWidth:[40],cropSize:[40],intrinsicSize:80,imageClass:"w-10 h-10 object-cover rounded-full flex-shrink-0"},null,8,["src","alt"]),r("div",Ti,[r("div",Si,[(R=G.message)!=null&&R.note?d("",!0):(o(),l("p",Pi,[x(t(Xe),{href:G.creator?t(Se).homePage(e.creatorData.slug):t(Se).homePage(G.commented_project_slug)},{default:F(()=>[r("span",Ri,h(G.creator?e.creatorData.name:e.notification.data.supporter.name),1)]),_:2},1032,["href"]),q(" "+h(_.$t("lang.common.replied")),1)])),(oe=G.message)!=null&&oe.note?(o(),l("div",{key:1,class:"text-left rounded inline-block w-full py-2 pr-4 font-cr-regular text-sm tw-break-word",innerHTML:t(i).sanitizeHtml(G.message.note)},null,8,Di)):d("",!0),G.message.video?(o(),l("div",{key:2,onClick:$e=>{var Pe;return _.$emit("openVideoPlayModal",t(i).getUrlWithCdnPath((Pe=G.message.video)==null?void 0:Pe.url),"")},class:N(["w-[124px] h-[174px] rounded-xl relative flex items-center justify-center select-none cursor-pointer my-1",[G!=null&&G.message?"":"mt-3"]])},[r("video",{poster:t(i).getUrlWithCdnPath((K=G.message.video)==null?void 0:K.thumbnail)+"@300w_0e.webp",class:"w-full rounded-xl h-full object-cover"},[r("source",{src:t(i).getUrlWithCdnPath((J=G.message.video)==null?void 0:J.url),type:"video/mp4"},null,8,Li)],8,Vi),Ii],10,Ui)):d("",!0)])])])])}),128)):d("",!0),e.showReplyOption?(o(),l("div",Oi,[e.showReplyOptionEnabled?d("",!0):(o(),l("a",{key:0,href:t(i).loginUrl(),rel:"nofollow",class:N("absolute top-0 left-0 w-full h-full z-10")},null,8,Ei)),r("div",ji,[x(Ae,{class:N(["w-full actionWrapper","text-sm"]),hideEmojiPicker:!1,smallInputField:!0,onGetContent:se,placeholder:_.$t("lang.common.write_a_comment"),content:t(m),fieldType:"reply",videoURL:t(z)?t(M):"",thumbnailURL:t(z)?t(E):"",currentUser:e.current_user_data,creatorData:e.creatorData,videoData:t(z)?t(U):"",onRemoveVideo:C,onOpenVideoPlayModal:W[2]||(W[2]=G=>ee(t(B))),onGetVideo:re,onSetIsUploadingVideo:ge,height:"65"},{"editor-more-options":F(()=>[t(U)?d("",!0):(o(),l("div",zi,[r("div",{role:"button",tabindex:"0",onClick:W[1]||(W[1]=()=>he(e.notification.data.id,t(Ee).REPLY)),class:"rounded-full inline-flex gap-2 px-2.5 py-1.5 h-[34px] items-center font-cr-medium text-[14px] text-black bg-white shadow-dropdown-lg tw-scale-on-hover hover:bg-greyF5 cursor-pointer"},[r("div",Hi,[x(lt)]),q(" "+h(_.$t("lang.common.reply_with_video")),1)])]))]),_:1},8,["placeholder","content","videoURL","thumbnailURL","currentUser","creatorData","videoData"])]),e.showReplyOptionEnabled&&t(k)?(o(),l("div",Bi,[x(ye,{class:"tw-theme-color-rounded-full text-sm font-cr-bold text-themeTextColor relative cursor-pointer px-3 py-1.5 mr-2 h-8",onClick:W[3]||(W[3]=G=>ie(e.notification.data.id)),initiallyDisabled:t(f),disabled:t(f),btnType:"primary"},{default:F(()=>[r("span",null,h(_.$t("lang.common.send")),1)]),_:1},8,["initiallyDisabled","disabled"])])):d("",!0)])):d("",!0),r("div",Fi,[Wi,x(ye,{onClick:Y,"aria-label":_.$t("lang.a11y.copy_link"),class:"w-1/2 font-cr-medium text-sm text-dark tw-grey-color-rounded-full before:border-1 before:border-dark/5 py-3"},{default:F(()=>[t(n)?d("",!0):(o(),D(st,{key:0,class:"mr-2",width:"17",height:"16"})),q(" "+h(t(n)?_.$t("lang.common.copied"):_.$t("lang.common.copy_link")),1)]),_:1},8,["aria-label"]),x(Ge,{role:"button",tabindex:"0","aria-label":_.$t("lang.a11y.twitter_share"),href:`${t(Te).tweetUrlPrefix}${_.$t(t($),{supporter:t(y)?"Someone":e.notification.data.supporter.name,creator:e.creatorData.name,work:e.creatorData.work?e.creatorData.name+" is "+e.creatorData.work+". ":"",alternative:e.creatorData.tag_alternative,emoji:e.creatorData.tag_emoji,rewards:t(w),wishlist_title:e.notification.data.details.wishlist_title?t(i).sanitizeHtml(e.notification.data.details.wishlist_title):"",commission_title:e.notification.data.details.commission_name?t(i).sanitizeHtml(e.notification.data.details.commission_name):""})} — ${t(u)}`,onclick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",class:"w-1/2 text-sm !font-cr-medium text-white tw-dark-color-rounded-full px-4 py-3 ml-4"},{default:F(()=>[x(Fe,{width:"16",height:"16",fillClass:"fill-white",class:"mr-4"}),q(" "+h(_.$t("lang.common.tweet_this")),1)]),_:1},8,["aria-label","href"])])])]}),_:3}))}};const Ai={class:"bg-pageTheme05 rounded-xl p-12 flex items-center justify-center"},Zi={class:"text-center"},Gi={"aria-hidden":"true",class:"w-5 h-5 relative mx-auto"},qi={class:"text-pageTheme font-cr-regular text-sm mt-2"},Yi={__name:"EmptyRecentSupporters",props:["creatorName"],setup(e){let c="tw-heart-animation";return(a,n)=>(o(),l("div",Ai,[r("div",Zi,[r("div",Gi,[r("span",{class:N(t(c)),style:{left:"2%","animation-delay":".5s","animation-duration":"2.5s"}},null,2),r("span",{class:N(t(c)),style:{left:"-4%","animation-delay":"1s","animation-duration":"2.5s"}},null,2),x(ea,{class:"mx-auto tw-pulse-animation",fillClass:"fill-pageTheme"})]),r("div",qi,h(a.$t("lang.home.be_the_first_one_to_support_creator",{creatorName:e.creatorName})),1)])]))}},Ki=Le(Yi,[["__scopeId","data-v-86c2b21f"]]),Xi={},Qi={class:"fill-dark/25",width:"29",height:"47",viewBox:"0 0 29 47",xmlns:"http://www.w3.org/2000/svg"},Ji=xt('<g clip-path="url(#clip0_1849_1143)"><path d="M3.25191 10.2994C1.97676 7.16651 3.06799 3.47663 5.94524 0.825439C6.32941 3.51013 4.82949 8.78738 3.25191 10.2994Z"></path><path d="M22.8982 43.5879C20.9773 45.9627 16.8903 46.2558 14.4912 44.1826C17.2418 42.6623 20.025 43.0727 22.8982 43.5879Z"></path><path d="M12.5538 37.653C12.5783 38.0425 13.081 38.0719 13.126 38.4404C11.2991 39.9273 7.71071 39.0729 6.32113 36.8782C5.92469 36.2499 6.08817 36.028 6.74209 35.9777C8.56489 35.8311 10.2119 36.3798 11.7773 37.2761C12.0347 37.4227 12.2227 37.72 12.5701 37.6782L12.5497 37.6572L12.5538 37.653Z"></path><path d="M9.29287 34.4743C7.78477 34.6251 6.52189 34.5036 5.2917 34.089C3.97978 33.6492 3.26046 32.6943 3.03159 31.3079C2.91307 30.5834 3.06838 30.2692 3.84899 30.5499C5.97014 31.3121 7.60494 32.7571 9.29287 34.4743Z"></path><path d="M6.00697 29.5698C3.24416 29.6284 0.99631 27.8107 0.742916 25.3564C0.661177 24.5564 0.836917 24.3554 1.60119 24.6779C3.23598 25.3647 5.31218 27.6306 6.00697 29.5698Z"></path><path d="M12.5747 37.6698C11.9575 36.74 11.1974 35.9107 10.8418 34.8008C10.3146 33.1674 10.4045 31.7769 11.2301 30.6125C12.9834 32.5015 13.4738 34.7338 13.1101 37.23C13.061 37.5609 12.873 37.6949 12.5542 37.6531L12.5747 37.674V37.6698Z"></path><path d="M10.5186 40.9074C12.5988 39.9944 15.9338 40.3378 17.9365 41.6404C15.8848 43.3115 12.5539 43.0141 10.5186 40.9074Z"></path><path d="M9.74975 30.4535C9.77427 31.3582 9.63123 32.2377 9.37374 33.1005C9.2307 33.5821 9.07539 33.645 8.71165 33.268C7.3752 31.8859 7.07685 28.5311 8.12312 26.839C8.46235 26.2903 8.64217 26.4914 8.87513 26.8934C9.50862 27.9908 9.79471 29.1803 9.75384 30.4535H9.74975Z"></path><path d="M21.0547 45.8663C21.7658 45.0287 22.7712 44.8863 23.7071 44.8025C25.0109 44.6852 26.331 44.7899 27.6429 44.7732C28.305 44.7648 28.1824 45.1082 27.9781 45.4768C27.6388 46.0799 27.0667 46.3982 26.4536 46.5993C24.9455 47.0935 22.5832 46.7626 21.0588 45.8705L21.0547 45.8663Z"></path><path d="M17.4092 40.8654C15.3126 40.0026 14.017 37.7954 14.3031 35.8479C14.4339 34.9558 14.8017 35.0144 15.3657 35.3871C16.0727 35.8562 16.5019 36.5599 16.8125 37.3347C17.2498 38.432 17.446 39.5838 17.4051 40.8612L17.4092 40.8654Z"></path><path d="M22.1251 43.0223C20.0326 42.6496 18.3651 40.9114 18.1485 38.922C18.0627 38.1179 18.2793 37.9294 19.0395 38.2267C20.805 38.9178 22.072 40.8319 22.1251 43.0223Z"></path><path d="M28.1091 44.3879C25.898 44.4508 23.8423 43.2361 23.2783 41.5399C23.1556 41.1755 22.9636 40.7357 23.2374 40.4593C23.4826 40.2122 23.8709 40.5221 24.1733 40.6268C26.5479 41.4729 27.6677 42.5576 28.1132 44.3837L28.1091 44.3879Z"></path><path d="M5.9369 28.4137C5.24211 27.0693 5.08272 25.7123 5.22168 24.2966C5.2789 23.7312 5.44646 23.2118 5.76116 22.7469C5.94916 22.4663 6.12899 22.0643 6.48865 22.1103C6.79109 22.148 6.8483 22.571 6.96274 22.8517C7.71883 24.6903 7.33057 26.8598 5.9369 28.4137Z"></path><path d="M3.02302 14.8729C1.0163 14.0478 0.374643 10.3118 1.40048 7.95801C3.11293 10.0019 3.1211 12.3683 3.02302 14.8729Z"></path><path d="M0.640614 18.7764C2.62689 19.8528 3.2849 21.7919 3.80803 23.8065C3.93473 24.3007 3.57099 24.1709 3.3176 24.1039C1.25366 23.551 -0.103219 20.8998 0.640614 18.7764Z"></path><path d="M3.38683 18.3451C3.17022 16.2049 3.80779 14.5128 5.33632 13.1768C5.52432 13.0134 5.74502 12.7328 6.03111 12.9087C6.24772 13.0427 6.21094 13.3401 6.23137 13.5788C6.40711 15.4887 5.36493 17.2897 3.38683 18.3409V18.3451Z"></path><path d="M3.10912 19.0446C0.987974 18.8226 -0.413865 16.4521 0.35449 14.182C0.587448 13.4868 0.926669 13.9517 1.14737 14.1736C2.28355 15.317 2.69225 16.8123 3.01921 18.3452C3.06825 18.5713 3.08052 18.8017 3.10912 19.0488V19.0446Z"></path><path d="M6.16966 17.7629C7.04428 19.2121 5.6547 21.9303 4.45312 22.9103C4.12616 23.1784 3.8932 23.1616 3.77059 22.6339C3.33329 20.7827 4.40408 18.5629 6.16966 17.7629Z"></path><path d="M6.57087 8.72886C6.26843 10.7644 5.28346 12.2847 3.76719 13.47C3.44023 13.7255 3.14188 13.7297 3.22362 13.2187C3.53832 11.2879 4.2045 9.5372 5.8066 8.3184C5.98643 8.18019 6.21939 7.92889 6.42373 8.11737C6.56269 8.24301 6.53408 8.56132 6.56678 8.72886H6.57087Z"></path></g><defs><clipPath id="clip0_1849_1143"><rect width="28" height="46" fill="white" transform="translate(0.141602 0.825439)"></rect></clipPath></defs>',2),ed=[Ji];function td(e,c){return o(),l("svg",Qi,ed)}const bt=Le(Xi,[["render",td]]),ad={},rd={width:"6",height:"8",viewBox:"0 0 6 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},od=r("path",{d:"M3.30347 7.26012C2.92862 7.26012 2.57901 7.20605 2.25462 7.09792C1.93384 6.98619 1.65992 6.83121 1.43285 6.63297C1.20938 6.43474 1.0526 6.20046 0.962492 5.93014C1.03818 5.87247 1.12829 5.813 1.23281 5.75173C1.33734 5.68685 1.44546 5.62738 1.5572 5.57331C1.67253 5.51565 1.77706 5.46879 1.87077 5.43275C1.95006 5.72469 2.11406 5.95897 2.36275 6.13558C2.61145 6.31219 2.92142 6.4005 3.29266 6.4005C3.71796 6.4005 4.06397 6.29417 4.33069 6.08152C4.60101 5.86887 4.73617 5.56791 4.73617 5.17865C4.73617 4.81101 4.63345 4.53709 4.428 4.35687C4.22256 4.17666 3.93061 4.05772 3.55216 4.00005C3.17371 3.93878 2.72138 3.90814 2.19515 3.90814C2.17353 3.83966 2.1519 3.72612 2.13028 3.56754C2.11226 3.40895 2.10324 3.25577 2.10324 3.10799C2.46728 3.10799 2.81689 3.05933 3.15209 2.96202C3.49089 2.8647 3.76842 2.72233 3.98468 2.53491C4.20454 2.34749 4.31447 2.11681 4.31447 1.84289C4.31447 1.58338 4.23157 1.36532 4.06577 1.18871C3.89998 1.0121 3.64768 0.923799 3.30887 0.923799C3.06018 0.923799 2.8241 0.965249 2.60063 1.04815C2.37717 1.12744 2.17533 1.23377 1.99512 1.36713C1.8149 1.49688 1.66713 1.63384 1.55179 1.77801C1.46168 1.70953 1.36797 1.63384 1.27066 1.55094C1.17695 1.46444 1.09225 1.38515 1.01656 1.31306C0.94447 1.23737 0.89401 1.18511 0.865176 1.15628C0.991326 1.01571 1.16974 0.858922 1.40041 0.685917C1.63469 0.509308 1.91943 0.356126 2.25462 0.226372C2.58982 0.0930138 2.97007 0.0263348 3.39538 0.0263348C3.75941 0.0263348 4.0856 0.0930138 4.37394 0.226372C4.66588 0.35973 4.89656 0.554361 5.06596 0.810265C5.23896 1.06256 5.32547 1.37073 5.32547 1.73476C5.32547 2.0195 5.24978 2.2718 5.0984 2.49166C4.95062 2.71152 4.765 2.89173 4.54154 3.0323C4.31807 3.17287 4.09641 3.27018 3.87655 3.32425C4.19733 3.35669 4.49468 3.44139 4.76861 3.57835C5.04614 3.71171 5.2696 3.90273 5.439 4.15143C5.6084 4.40012 5.6931 4.7137 5.6931 5.09214C5.6931 5.53907 5.58858 5.92473 5.37953 6.24912C5.17048 6.5735 4.88575 6.824 4.52532 7.00061C4.16489 7.17361 3.75761 7.26012 3.30347 7.26012Z",fill:"black"},null,-1),ld=[od];function sd(e,c){return o(),l("svg",rd,ld)}const nd=Le(ad,[["render",sd]]),id={},dd={width:"4",height:"8",viewBox:"0 0 4 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ud=r("path",{d:"M2.56973 6.17363C2.68798 6.17363 2.82773 6.17721 2.98898 6.18438C3.15023 6.18796 3.30073 6.19334 3.44048 6.2005C3.58382 6.20767 3.68953 6.21484 3.75761 6.222C3.75761 6.26142 3.75582 6.31875 3.75223 6.394C3.74865 6.46925 3.74328 6.54988 3.73611 6.63588C3.72894 6.72188 3.71998 6.8043 3.70923 6.88313C3.70207 6.96196 3.6949 7.02467 3.68773 7.07125C3.60532 7.07125 3.45482 7.07484 3.23623 7.082C3.02123 7.08559 2.77398 7.09275 2.49448 7.1035C2.21498 7.11067 1.93728 7.11784 1.66136 7.125C1.38544 7.13575 1.13998 7.1465 0.924984 7.15725C0.713568 7.168 0.568443 7.17696 0.489609 7.18413C0.486026 7.11605 0.482443 7.02825 0.478859 6.92075C0.475276 6.81325 0.471693 6.70396 0.468109 6.59288C0.468109 6.4818 0.469901 6.39221 0.473484 6.32413C0.530818 6.31338 0.615026 6.30263 0.726109 6.29188C0.837193 6.27755 0.955443 6.265 1.08086 6.25425C1.20628 6.23992 1.32094 6.22917 1.42486 6.222C1.53236 6.21125 1.6094 6.20409 1.65598 6.2005C1.65598 6.12525 1.65598 5.96759 1.65598 5.7275C1.65598 5.48742 1.65598 5.20075 1.65598 4.8675C1.65598 4.53067 1.65598 4.17592 1.65598 3.80325C1.65598 3.43059 1.65598 3.07046 1.65598 2.72288C1.65957 2.3753 1.66136 2.07071 1.66136 1.80913C1.66494 1.54396 1.66853 1.35584 1.67211 1.24475C1.63269 1.277 1.55923 1.34867 1.45173 1.45975C1.34782 1.56725 1.23494 1.6855 1.11311 1.8145C0.991276 1.9435 0.880193 2.06175 0.779859 2.16925C0.683109 2.27675 0.620401 2.34663 0.591734 2.37888C0.530818 2.30721 0.450193 2.19075 0.349859 2.0295C0.253109 1.86467 0.176068 1.72134 0.118734 1.5995C0.165318 1.54934 0.254901 1.45975 0.387484 1.33075C0.520068 1.19817 0.670568 1.04946 0.838984 0.884628C1.0074 0.719795 1.17223 0.562129 1.33348 0.411629C1.49832 0.261129 1.63269 0.141087 1.73661 0.0515036C1.81186 0.0515036 1.89786 0.0532953 1.99461 0.0568788C2.09136 0.0604619 2.18632 0.0658367 2.27948 0.0730033C2.37265 0.0765868 2.44611 0.0837536 2.49986 0.0945037C2.50703 0.137504 2.51598 0.286212 2.52673 0.540628C2.53748 0.791462 2.54823 1.11755 2.55898 1.51888C2.56973 1.92021 2.57869 2.36992 2.58586 2.868C2.59661 3.3625 2.60198 3.87313 2.60198 4.39988C2.60198 4.68655 2.60019 4.98038 2.59661 5.28138C2.59303 5.5788 2.58407 5.87621 2.56973 6.17363Z",fill:"black"},null,-1),cd=[ud];function md(e,c){return o(),l("svg",dd,cd)}const fd=Le(id,[["render",md]]),pd={},hd={width:"5",height:"9",viewBox:"0 0 5 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vd=r("path",{d:"M4.52 7.03C4.53 7.08 4.54 7.16 4.55 7.26C4.56 7.36 4.57 7.47 4.57 7.58C4.57 7.69 4.57 7.79 4.57 7.88C4.57 7.98 4.57 8.04 4.56 8.08L0.33 8.31C0.32 8.28 0.31 8.24 0.30 8.17C0.28 8.10 0.27 8.02 0.25 7.93C0.23 7.84 0.22 7.75 0.21 7.66C0.20 7.56 0.19 7.47 0.18 7.40C0.30 7.27 0.46 7.10 0.65 6.89C0.83 6.67 1.04 6.42 1.26 6.15C1.48 5.88 1.70 5.60 1.93 5.32C2.10 5.10 2.27 4.87 2.45 4.63C2.63 4.39 2.79 4.15 2.94 3.91C3.08 3.67 3.20 3.43 3.29 3.21C3.38 2.99 3.42 2.79 3.42 2.60C3.42 2.34 3.34 2.15 3.17 2.03C3.00 1.92 2.80 1.86 2.58 1.86C2.29 1.86 2.04 1.92 1.81 2.04C1.59 2.17 1.39 2.34 1.23 2.56C1.06 2.77 0.92 3.02 0.81 3.30C0.75 3.26 0.66 3.21 0.56 3.15C0.45 3.08 0.35 3.01 0.25 2.93C0.16 2.86 0.08 2.79 0.02 2.74C0.18 2.38 0.39 2.06 0.66 1.79C0.93 1.51 1.23 1.29 1.58 1.13C1.92 0.97 2.30 0.89 2.69 0.89C3.20 0.89 3.60 1.04 3.91 1.32C4.22 1.60 4.38 1.98 4.38 2.46C4.38 2.87 4.27 3.30 4.06 3.75C3.85 4.21 3.57 4.67 3.23 5.13C3.06 5.35 2.89 5.58 2.71 5.81C2.53 6.03 2.37 6.25 2.20 6.46C2.04 6.66 1.90 6.83 1.79 7.00C1.67 7.12 1.59 7.21 1.54 7.26C1.64 7.25 1.78 7.24 1.96 7.22C2.14 7.21 2.35 7.19 2.58 7.17C2.81 7.15 3.05 7.13 3.29 7.11C3.53 7.09 3.76 7.08 3.98 7.06C4.19 7.05 4.37 7.04 4.52 7.03Z",fill:"black"},null,-1),gd=[vd];function _d(e,c){return o(),l("svg",hd,gd)}const yd=Le(pd,[["render",_d]]),bd={class:"w-[600px] text-center bg-white rounded-xl xs:w-full xs:rounded-none"},xd={class:"bg-pageTheme08 p-4"},wd={key:0,class:"flex flex-col items-center justify-center mb-6 gap-6 transition-all"},Cd={key:0,class:"flex items-center justify-center mt-3 transition-all duration-[0.4s] gap-3"},$d={class:"flex flex-col items-center justify-center font-cr-book leading-6"},kd={class:"text-[24px] font-cr-bold"},Md={class:"text-[14px] mt-2"},Td={class:"flex items-end justify-center gap-4 mt-4"},Sd={class:"relative"},Pd=["src","alt"],Rd={"aria-hidden":"true",class:"absolute top-0 -right-1 w-5 h-5 flex items-center justify-center rounded-full bg-[#F6F4E9]"},Dd={class:"w-4 h-4 rounded-full bg-black relative"},Ud={class:"mt-2 font-cr-book text-[14px] w-[140px] xs:w-[100px] truncate"},Vd={class:"text-left bg-white rounded-2xl p-4"},Ld={class:"font-cr-medium mb-2 text-[18px]"},Id={class:"transform translate-y-[0.5px]"},Od={__name:"TopSupportersModal",props:["recentTransModal","topSupporters","topSupportersFetched","pageNum","seeMoreLoader","showSeeMoreBtn","creator_data","current_user_data","deleteCommentConfirmed","deleteTransConfirmed","deleteReplyConfirmed","deletableTransId","recordedVideoData","timelineV2","isMadePrivate","openTopSupporters"],emits:["close","actionSuccess","openShareModal","fetchTransactions","addTopSupporters","addTopSupportersFetched","openVideoPlayModal","openVideoReplyModal","reloadTransactions","deletedTrans","openDeleteConfirmModal","showVideoReplyOnAppQR","toggleVideoRecorderModal","makeTransPrivate"],setup(e,{emit:c}){const a=e,n=s(!0);console.log("recentTransModal TSM: ",a.recentTransModal),Oe(async()=>{await u(),setTimeout(()=>{n.value=!1},40)});const u=async()=>{if(a.topSupportersFetched)return a.topSupporters;try{const y=await axios.get(`api/creators/slug/${a.creator_data.slug}/top-supporters`);let M=[];if(y.data.data.length===3&&(M=y.data.data),c("addTopSupportersFetched",!0),y.data.data.length){let E=M.sort((U,B)=>{const b=[1,0,2];return b.indexOf(M.indexOf(U))-b.indexOf(M.indexOf(B))});c("addTopSupporters",E)}}catch(y){console.error(y)}},m=(y,M)=>{c("openShareModal",y,M)},f=y=>{c("reloadTransactions",y)},k=y=>{c("deletedTrans",y)},p=(y,M)=>{c("openVideoPlayModal",y,M)},$=(y,M)=>{c("openDeleteConfirmModal",y,M)},S=(y,M)=>{c("makeTransPrivate",y,M)},w=()=>{c("close")},T=(y,M)=>{c("toggleVideoRecorderModal",y,M)};return(y,M)=>(o(),D(Be,{onClose:w},{default:F(()=>[r("div",bd,[r("div",xd,[x(St,{onClick:w,class:"w-10 h-10 absolute right-4 top-4 xs:top-4",iconClass:"xs:w-4 xs:h-4",iconSize:{width:16,height:16}}),r("div",null,[e.creator_data.public_supporter_count||e.topSupporters.length?(o(),l("div",wd,[e.creator_data.public_supporter_count?(o(),l("div",Cd,[x(bt),r("div",$d,[r("span",kd,h(t(i).numberFormat(e.creator_data.public_supporter_count)),1),r("span",null,h(y.$t("lang.common.supporters")),1)]),x(bt,{class:"transform -scale-x-[1]"})])):d("",!0),e.topSupporters.length?(o(),l("div",{key:1,class:N(["font-cr-regular transition-all duration-[0.4s]",n.value?"opacity-0 h-0":"opacity-100 h-[150px]"])},[r("div",Md,h(y.$t("lang.common.top_supporters_90")),1),r("div",Td,[(o(!0),l(ce,null,we(e.topSupporters,(E,U)=>(o(),l("div",{key:U,class:"flex flex-col items-center justify-center"},[r("div",Sd,[r("div",{class:N(["bg-[#E6E4D9] rounded-full transition-all delay-75 duration-[0.4s]",U===1&&!n.value?"w-20 h-20":"w-14 h-14"])},[r("img",{src:E.profile_picture_url,alt:y.$t("lang.a11y.home.top_supporter",U==0?2:U==1?1:3),class:"w-full h-full object-cover rounded-full"},null,8,Pd)],2),r("div",Rd,[r("div",Dd,[r("div",{class:N(["border border-solid w-4 h-4 rounded-full border-dark text-sm flex items-center justify-center transform translate-x-[1.5px] -translate-y-[1.5px]",U===0?"bg-[#D3E1E1]":U===1?"bg-primary":"bg-white"])},[U===0?(o(),D(yd,{key:0})):U===1?(o(),D(fd,{key:1})):(o(),D(nd,{key:2}))],2)])])]),r("div",Ud,h(E.profile_full_name&&E.profile_full_name.trim()!==""?E.profile_full_name:"Someone"),1)]))),128))])],2)):d("",!0)])):d("",!0),r("div",Vd,[r("div",Ld,h(y.$t("lang.common.recent_supporters")),1),e.timelineV2?(o(!0),l(ce,{key:0},we(e.recentTransModal,(E,U)=>{var B;return o(),D(Lt,{recentTrans:e.recentTransModal,tabindex:"0",creator_data:e.creator_data,current_user_data:e.current_user_data,key:U,transIndex:U,isMadePrivate:e.isMadePrivate,trans:E,fromPage:"top-supporters",deleteCommentConfirmed:e.deleteCommentConfirmed,deleteTransConfirmed:e.deleteTransConfirmed,deleteReplyConfirmed:e.deleteReplyConfirmed,deletableTransId:e.deletableTransId,recordedVideoData:((B=e.recordedVideoData)==null?void 0:B.notif_id)==E.id?e.recordedVideoData:null,onOpenDeleteConfirmModal:$,onActionSuccess:M[0]||(M[0]=b=>c("actionSuccess")),onOpenShareModal:m,onOpenVideoPlayModal:p,onOpenVideoReplyModal:M[1]||(M[1]=b=>c("openVideoReplyModal")),onReloadTransactions:f,onDeletedTrans:k,onToggleVideoRecorderModal:T,onMakeTransPrivate:S},null,8,["recentTrans","creator_data","current_user_data","transIndex","isMadePrivate","trans","deleteCommentConfirmed","deleteTransConfirmed","deleteReplyConfirmed","deletableTransId","recordedVideoData"])}),128)):(o(!0),l(ce,{key:1},we(e.recentTransModal,(E,U)=>{var B;return o(),D(Vt,{recentTrans:e.recentTransModal,tabindex:"0",creator_data:e.creator_data,current_user_data:e.current_user_data,isMadePrivate:e.isMadePrivate,key:U,transIndex:U,trans:E,fromPage:"top-supporters",deleteCommentConfirmed:e.deleteCommentConfirmed,deleteTransConfirmed:e.deleteTransConfirmed,deleteReplyConfirmed:e.deleteReplyConfirmed,deletableTransId:e.deletableTransId,recordedVideoData:((B=e.recordedVideoData)==null?void 0:B.notif_id)==E.notification_id?e.recordedVideoData:null,onOpenDeleteConfirmModal:$,onActionSuccess:M[2]||(M[2]=b=>c("actionSuccess")),onOpenShareModal:m,onOpenVideoPlayModal:p,onOpenVideoReplyModal:M[3]||(M[3]=b=>c("openVideoReplyModal")),onReloadTransactions:f,onDeletedTrans:k,onToggleVideoRecorderModal:T,onMakeTransPrivate:S},null,8,["recentTrans","creator_data","current_user_data","isMadePrivate","transIndex","trans","deleteCommentConfirmed","deleteTransConfirmed","deleteReplyConfirmed","deletableTransId","recordedVideoData"])}),128)),e.showSeeMoreBtn?(o(),D(ye,{key:2,onClick:M[4]||(M[4]=E=>c("fetchTransactions",e.pageNum+=1,"seemore")),disabled:e.seeMoreLoader,btnType:"white",initiallyDisabled:!1,class:"font-cr-medium h-12 flex items-center w-full text-sm text-dark tw-grey-line-border-rounded-full xs:mt-4 relative"},{default:F(()=>[r("span",null,h(y.$t("lang.common.see_more")),1),r("span",Id,[x(Pt,{width:"30",class:"transform rotate-90",fillClass:"fill-dark"})])]),_:1},8,["disabled"])):d("",!0)])])])])]),_:1}))}},Ed=["aria-label"],jd={class:"font-cr-medium text-lg leading-7 mb-3",id:"recentTransactions"},zd={class:"transform translate-y-[0.5px]"},Hd=["aria-label"],Bd=["aria-label"],Fd={__name:"RecentSupporters",props:["creator_data","current_user_data","notification","timeline_item","recordedVideoData"],emits:["openVideoPlayModal","toggleVideoRecorderModal"],setup(e,{emit:c}){const a=e;wt();let n=s(),u=s();s(!0);let m=s(!1),f=s(0),k=s(!1),p=s(!1),$=s(!1),S=s(!1),w=s(),T=s(!1),y=s(1),M=s(!1),E=s(!1),U=s(!1);s(!1);let B=s(!1),b=s(!1),z=s(!1),I=s(!1),Y=s("");s(""),s({});let ie=s({}),se=s(!1),ee=s(!0),he=s(!0),re=s([]),ge=s(!1),C=s(!1),V=s(!1),Q=s({id:null,val:null});Oe(()=>{if(Te.IsBrowser){const H=i.getParamsValueFromUrl("timelineversion");H&&H=="legacy"?V.value=!1:i.checkFlagStatus(a.creator_data,"timeline_v2")&&(V.value=!0)}X(y.value,"initialLoad"),(a.notification&&a.notification.data||a.timeline_item)&&(b.value=!0),Te.IsBrowser&&(i.getParamsValueFromUrl("uid")?a.current_user_data?a.notification?(a.current_user_data.data.project_id==a.notification.data.project_id||a.current_user_data.data.user_id==a.notification.data.user_id)&&(z.value=!0,I.value=!0):a.timeline_item&&(a.current_user_data.data.project_id==a.creator_data.project_id||a.current_user_data.data.user_id==a.timeline_item.data.supporter.id)&&(z.value=!0,I.value=!0):(z.value=!0,I.value=!1):window.location.hash==="#video-reply"&&a.creator_data.own_page&&ne())});const X=async(H,A)=>{y.value=H,H>1&&(T.value=!0);try{const te=new Promise(L=>{setTimeout(()=>L(null),100)});let _e=null;if(a.current_user_data||(_e=await Promise.race([pt.get(a.creator_data.project_id,H,V.value),te])),_e)_(_e.data,A);else{let L,O=10;V.value?L=await axios.get(`api/v1/timeline/project/${a.creator_data.project_id}/?page=${H}&per_page=${O}`):a.current_user_data?L=await axios.get(`api/v1/project/${a.creator_data.project_id}/coffees?web=1&page=${H}&per_page=${O}`):L=await axios.get(`api/creators/slug/${a.creator_data.slug}/coffees?web=1&page=${H}&per_page=${O}`),L.data.data.length?(_(L.data,A),await pt.set(a.creator_data.project_id,H,L.data,V.value)):he.value=!1}}catch(te){console.error(te)}},_=(H,A)=>{ee.value=!1,he.value=!1,se.value?(n.value="",setTimeout(()=>{n.value=H.data,u.value=H.data,se.value=!1,A=="pinned"&&i.scrollToElement(document.getElementById("recentTransactions"),"smooth","center")},10)):n.value&&A!=="initialLoad"?u.value=u.value.concat(H.data):(M.value=H.data.length>5,n.value=H.data.slice(0,5),u.value=H.data),E.value=!!H.links.next,T.value=!1},W=H=>{re.value=H},ve=H=>{ge.value=H},le=H=>{se.value=!0,X(1,H)},me=(H,A)=>{const te=A?0:1,_e=u.value.findIndex(L=>L.id===H);_e!==-1&&(V.value?u.value[_e].visibility=te:(u.value[_e].support_visibility=te,u.value[_e].msg_hidden=!te)),Q.value={id:H,val:A}},fe=(H,A)=>{m.value=!0,f.value=A,w.value=H},Ce=async()=>{k.value=!0,w.value=="comment"?p.value=!0:w.value=="transaction"?$.value=!0:S.value=!0},P=async()=>{k.value=!1,m.value=!1,p.value=!1,$.value=!1,S.value=!1},Z=async(H,A)=>{U.value=!0,ie.value=A,V.value?await axios.get(`api/v1/timeline/${H}/og-image`).then(te=>{te.data.data.og_image&&(Y.value=te.data.data.og_image)}).catch(te=>{}):await axios.get(`api/creators/slug/${a.creator_data.slug}/coffees/${H}/og-image`).then(te=>{te.data.og_image&&(Y.value=te.data.og_image)}).catch(te=>{})},ne=()=>{B.value=!0},de=H=>{setTimeout(()=>{n.value=n.value.filter(function(A,te){return te!==H}),P()},10)},Me=(H,A="",te)=>{c("openVideoPlayModal",H,A,te)},xe=(H,A)=>{c("toggleVideoRecorderModal",H,A)},De=async()=>{y.value===1&&(y.value++,X(y.value)),C.value=!0};return(H,A)=>{var te,_e,L;return o(),l("div",{tabindex:"0",role:"region","aria-label":H.$t("lang.common.recent_supporters"),class:"border-t border-greyDD/80 pt-6 xs:border-none"},[r("p",jd,h(H.$t("lang.common.recent_supporters")),1),t(he)?(o(),D(na,{key:0,sizeClass:"w-6 h-6",class:"h-30 xs:h-30"})):(o(),l(ce,{key:1},[t(ee)?(o(),D(Ki,{key:0,creatorName:e.creator_data.name},null,8,["creatorName"])):t(n)?(o(),l(ce,{key:1},[t(V)?(o(!0),l(ce,{key:0},we(t(n),(O,ae)=>{var be;return o(),D(Lt,{recentTrans:t(n),tabindex:"0",creator_data:e.creator_data,isMadePrivate:t(Q),current_user_data:e.current_user_data,key:ae,transIndex:ae,trans:O,fromPage:"home",deleteCommentConfirmed:t(p),deleteTransConfirmed:t($),deleteReplyConfirmed:t(S),deletableTransId:t(f),recordedVideoData:((be=e.recordedVideoData)==null?void 0:be.notif_id)==O.id?e.recordedVideoData:null,onOpenVideoPlayModal:Me,onToggleVideoRecorderModal:xe,onOpenDeleteConfirmModal:fe,onActionSuccess:P,onOpenShareModal:Z,onOpenVideoReplyModal:ne,onReloadTransactions:le,onDeletedTrans:de,onMakeTransPrivate:me},null,8,["recentTrans","creator_data","isMadePrivate","current_user_data","transIndex","trans","deleteCommentConfirmed","deleteTransConfirmed","deleteReplyConfirmed","deletableTransId","recordedVideoData"])}),128)):(o(!0),l(ce,{key:1},we(t(n),(O,ae)=>{var be;return o(),D(Vt,{recentTrans:t(n),tabindex:"0",creator_data:e.creator_data,isMadePrivate:t(Q),current_user_data:e.current_user_data,key:ae,transIndex:ae,trans:O,fromPage:"home",deleteCommentConfirmed:t(p),deleteTransConfirmed:t($),deleteReplyConfirmed:t(S),deletableTransId:t(f),recordedVideoData:((be=e.recordedVideoData)==null?void 0:be.notif_id)==O.notification_id?e.recordedVideoData:null,onOpenVideoPlayModal:Me,onToggleVideoRecorderModal:xe,onOpenDeleteConfirmModal:fe,onActionSuccess:P,onOpenShareModal:Z,onOpenVideoReplyModal:ne,onReloadTransactions:le,onDeletedTrans:de,onMakeTransPrivate:me},null,8,["recentTrans","creator_data","isMadePrivate","current_user_data","transIndex","trans","deleteCommentConfirmed","deleteTransConfirmed","deleteReplyConfirmed","deletableTransId","recordedVideoData"])}),128)),t(M)?(o(),D(ye,{key:2,onClick:De,btnType:"white",initiallyDisabled:!1,class:"font-cr-medium h-12 flex items-center w-full text-sm text-dark tw-grey-line-border-rounded-full xs:mt-4 relative"},{default:F(()=>[r("span",null,h(H.$t("lang.common.see_more")),1),q(),r("span",zd,[x(Pt,{width:"30",class:"transform rotate-90",fillClass:"fill-dark"})])]),_:1})):d("",!0),t(C)?(o(),D(Od,{key:3,openTopSupporters:t(C),recentTransModal:t(u),creator_data:e.creator_data,isMadePrivate:t(Q),current_user_data:e.current_user_data,deleteCommentConfirmed:t(p),deleteTransConfirmed:t($),deleteReplyConfirmed:t(S),deletableTransId:t(f),showSeeMoreBtn:t(E),seeMoreLoader:t(T),pageNum:t(y),topSupporters:t(re),topSupportersFetched:t(ge),recordedVideoData:(te=e.recordedVideoData)!=null&&te.notif_id?e.recordedVideoData:null,timelineV2:t(V),onOpenDeleteConfirmModal:fe,onActionSuccess:P,onOpenShareModal:Z,onOpenVideoPlayModal:Me,onOpenVideoReplyModal:ne,onReloadTransactions:le,onDeletedTrans:de,onFetchTransactions:X,onAddTopSupporters:W,onAddTopSupportersFetched:ve,onToggleVideoRecorderModal:xe,onMakeTransPrivate:me,onClose:A[0]||(A[0]=O=>pe(C)?C.value=!1:C=!1)},null,8,["openTopSupporters","recentTransModal","creator_data","isMadePrivate","current_user_data","deleteCommentConfirmed","deleteTransConfirmed","deleteReplyConfirmed","deletableTransId","showSeeMoreBtn","seeMoreLoader","pageNum","topSupporters","topSupportersFetched","recordedVideoData","timelineV2"])):d("",!0)],64)):t(se)?(o(),l(ce,{key:2},we(5,O=>r("div",{key:O,class:"mb-4"},[x(sa,{width:"100%",height:"102px",classes:["rounded-lg"]})])),64)):d("",!0)],64)),t(m)?(o(),D(aa,{key:2},{title:F(()=>[q(h(H.$t("lang.common.are_you_sure_to_delete")),1)]),button:F(()=>[x(ye,{onClick:Ce,disabled:t(k),class:"mt-6 font-cr-bold w-full h-12 px-5 text-themeTextColor tw-theme-color-rounded-full xs:mt-6 relative"},{default:F(()=>[q(h(H.$t("lang.common.confirm")),1)]),_:1},8,["disabled"]),x(ye,{onClick:A[1]||(A[1]=O=>pe(m)?m.value=!1:m=!1),class:"mt-4 font-cr-bold w-full h-12 px-5 text-dark tw-grey-color-rounded-full xs:mt-6 relative"},{default:F(()=>[q(h(H.$t("lang.common.cancel")),1)]),_:1})]),_:1})):d("",!0),t(U)&&!t(V)?(o(),D(Is,{key:3,ogImgUrl:t(Y),creatorData:e.creator_data,current_user_data:e.current_user_data,trans:t(ie),onClose:A[2]||(A[2]=O=>{pe(U)?U.value=!1:U=!1,pe(Y)?Y.value="":Y=""})},null,8,["ogImgUrl","creatorData","current_user_data","trans"])):d("",!0),t(U)&&t(V)?(o(),D(Zs,{key:4,ogImgUrl:t(Y),creatorData:e.creator_data,current_user_data:e.current_user_data,trans:t(ie),onClose:A[3]||(A[3]=O=>{pe(U)?U.value=!1:U=!1,pe(Y)?Y.value="":Y=""})},null,8,["ogImgUrl","creatorData","current_user_data","trans"])):d("",!0),t(B)?(o(),D(yn,{key:5,creator_data:e.creator_data,onClose:A[4]||(A[4]=O=>{pe(B)?B.value=!1:B=!1})},null,8,["creator_data"])):d("",!0),t(b)&&e.notification?(o(),D(Gn,{key:6,creatorData:e.creator_data,current_user_data:e.current_user_data,showReplyOption:t(z),showReplyOptionEnabled:t(I),notification:e.notification,recordedVideoData:(_e=e.recordedVideoData)!=null&&_e.notif_id?e.recordedVideoData:null,onOpenVideoPlayModal:Me,onToggleVideoRecorderModal:xe,onReloadTransactions:le,onClose:A[6]||(A[6]=O=>pe(b)?b.value=!1:b=!1)},{close:F(()=>[r("div",{role:"button",tabindex:"0","aria-label":H.$t("lang.a11y.close_popup"),onClick:A[5]||(A[5]=O=>pe(b)?b.value=!1:b=!1),class:"absolute cursor-pointer top-5 right-5 p-2 hover:bg-dark/5 rounded-full duration-150 transform-gpu ease-in-out"},[x(ht,{iconSize:{width:14,height:14},iconClass:"",fillClass:"fill-dark"})],8,Hd)]),_:1},8,["creatorData","current_user_data","showReplyOption","showReplyOptionEnabled","notification","recordedVideoData"])):t(b)&&e.timeline_item?(o(),D(Ni,{key:7,creatorData:e.creator_data,current_user_data:e.current_user_data,showReplyOption:t(z),showReplyOptionEnabled:t(I),notification:e.timeline_item,onOpenVideoPlayModal:Me,recordedVideoData:(L=e.recordedVideoData)!=null&&L.notif_id?e.recordedVideoData:null,onToggleVideoRecorderModal:xe,onReloadTransactions:le,onClose:A[8]||(A[8]=O=>pe(b)?b.value=!1:b=!1)},{close:F(()=>[r("div",{role:"button",tabindex:"0","aria-label":H.$t("lang.a11y.close_popup"),onClick:A[7]||(A[7]=O=>pe(b)?b.value=!1:b=!1),class:"absolute cursor-pointer top-5 right-5 p-2 hover:bg-dark/5 rounded-full duration-150 transform-gpu ease-in-out"},[x(ht,{iconSize:{width:14,height:14},iconClass:"",fillClass:"fill-dark"})],8,Bd)]),_:1},8,["creatorData","current_user_data","showReplyOption","showReplyOptionEnabled","notification","recordedVideoData"])):d("",!0)],8,Ed)}}},Wd={class:"relative"},Nd={__name:"FloatingPayButtons",props:["creatorData","showFloatingButtons"],emits:["openPaymentModal"],setup(e,{emit:c}){var u,m,f;let n=(((f=(m=(u=e.creatorData)==null?void 0:u.data)==null?void 0:m.donation_settings)==null?void 0:f.support_button_text)??"support").toLowerCase();return(k,p)=>(o(),l("div",{class:N(["bg-white p-4 text-center fixed h-20 w-full z-30 border-t border-solid border-greyE5 transition-all ease-in-out duration-300 left-0",[e.showFloatingButtons?"bottom-0":"-bottom-20"]])},[e.creatorData.data.default_widget==2?(o(),D(t(Xe),{key:0,href:t(Se).membershipPage(),class:"tw-btn-bg font-cr-bold w-full h-12 px-5 text-themeTextColor tw-theme-color-rounded-full relative flex justify-center items-center"},{default:F(()=>[r("span",Wd,h(k.$t("lang.membership.become_a_member")),1)]),_:1},8,["href"])):(o(),D(ye,{key:1,onClick:p[0]||(p[0]=$=>k.$emit("openPaymentModal","support","","posts")),class:"font-cr-bold w-full h-12 px-5 text-themeTextColor tw-theme-color-rounded-full",btnType:"primary"},{default:F(()=>[q(h(k.$t(`lang.common.${t(n)}`)),1)]),_:1}))],2))}},Ad={class:"tw-feature-box w-full mx-auto mt-0 smallDevice:w-100 xxs:w-full !px-10 !py-8 xs:!p-6 rounded-3xl p-8 pt-9 bg-white mb-3"},Zd={class:"font-cr-bold text-2xl leading-8"},Gd={class:"text-pageTheme"},qd={key:0},Yd={class:"font-cr-bold text-2xl leading-8"},Kd={class:"text-pageTheme"},Xd={class:"relative group"},Qd={key:1,class:"flex justify-center text-dark font-cr-regular"},Jd={class:"text-center"},e1={class:"text-xl font-cr-medium mt-4"},t1={class:"text-sm mt-2"},a1={class:"flex flex-wrap mx-auto justify-center my-4 otp-input"},r1=["onUpdate:modelValue","onInput","onKeydown"],o1={__name:"FollowCreator",props:["currentUserData","creatorData"],setup(e){const c=e,a=s(!1),n=s(!1),u=s(!1),m=s([]),f=Bt(["","","","","",""]),k=()=>{document.querySelector(".follow-user").click()};let p=Ft({email:""});const $=()=>{f.map(b=>{}),p.email="",emit("close")};Oe(()=>{var b;p.email=c.currentUserData&&!c.creatorData.own_page?c.currentUserData.data.email:"",a.value=(b=c.creatorData)==null?void 0:b.following});const S=()=>{axios.post(`/api/v1/project/${c.creatorData.project_id}/follow`).then(function(b){je.reload({only:["creator_data"]}),a.value=!0,setTimeout(()=>{u.value=!1,window.location.reload()},200)}).catch(()=>{u.value=!1})},w=()=>{axios.post(`api/v1/project/${c.creatorData.project_id}/follow/email`,p).then(function(){n.value=!0,u.value=!1,setTimeout(()=>{E(0)},100)}).catch(b=>{u.value=!1,b.response.status===401?appVariables.IsBrowser&&(window.location=`${appVariables.appUrl}/login?email=${p.email}`):p.errors.email=b.response.data.errors.email[0]})},T=()=>{i.validationCheck(p).then(()=>{c.currentUserData?(u.value=!0,S()):w()}).catch(b=>{u.value=!1})},y=()=>{let b={email:p.email,otp:f.join(""),project_id:c.creatorData.project_id};axios.post("auth/otp/action",b).then(async z=>{i.deleteCookieByName("follow_user"),await tt.loginOldRepo(z.data.access_token),await tt.getAccessTokenForBmcV2(z.data.access_token),setTimeout(()=>{window.location.reload(),$()},500)}).catch(z=>{var I;i.deleteCookieByName("follow_user"),u.value=!1,((I=z.response)==null?void 0:I.status)===401&&appVariables.IsBrowser&&$(),p.errors.otp=z.response.data?z.response.data.errors.otp[0]:"lang.error.server_error"})},M=()=>{u.value=!0,n.value?y():T()},E=b=>{p.errors.otp="",b<6&&m.value[b]&&m.value[b].focus()},U=(b,z)=>{z.key==="Backspace"&&!f[b-1]&&b>0&&b!==1&&(f[b-2]="",m.value[b-2].focus())},B=b=>{p.errors.otp="";const z=b.clipboardData.getData("text");z.length===6&&/^\d{6}$/.test(z)&&z.split("").forEach((I,Y)=>f[Y]=I),setTimeout(()=>{m.value[5].focus()},10)};return(b,z)=>(o(),l("div",Ad,[a.value?(o(),l(ce,{key:0},[r("h4",Zd,[q(" You’re now following "),r("span",Gd,h(e.creatorData.name),1)]),x(ye,{onClick:k,class:"w-full font-cr-bold xs:font-cr-medium h-12 px-8 text-pageTheme border-2 hover:bg-pageTheme05 border-solid border-pageTheme rounded-full mt-4"},{default:F(()=>[q(h(b.$t("lang.header.following")),1)]),_:1})],64)):(o(),l(ce,{key:1},[n.value?(o(),l("div",Qd,[r("div",Jd,[x(oa,{class:"mx-auto"}),r("div",e1,h(b.$t("lang.header.check_your_inbox")),1),r("div",t1,h(b.$t("lang.header.follow_success",{email:t(p).email})),1),r("div",a1,[(o(),l(ce,null,we(6,I=>Qe(r("input",{key:I,"onUpdate:modelValue":Y=>f[I-1]=Y,ref_for:!0,ref_key:"otpInputs",ref:m,onInput:Y=>E(I),onKeydown:[Y=>U(I,Y),et(ft(M,["prevent"]),["enter"])],onPaste:B,placeholder:"0",class:N(["w-10 h-12 text-center placeholder-grey71/50 text-dark bg-dark/5 border-dark/10 focus:bg-white focus:border-dark outline-none shadow-none focus:ring-0",(I===1?"rounded-l-lg":"")+(I===3?"mr-2 rounded-r-lg":"")+(I===4?"ml-2 rounded-l-lg":"")+(I===6?"rounded-r-lg":"")]),type:"text",maxlength:"1"},null,42,r1),[[Wt,f[I-1]]])),64))]),t(p).errors.otp?(o(),D(gt,{key:0,class:"my-2",message:b.$t(t(p).errors.otp)},null,8,["message"])):d("",!0),x(ye,{onClick:M,disabled:u.value,class:"w-full h-12 mt-6 font-cr-bold text-themeTextColor tw-theme-color-rounded-full"},{default:F(()=>[q(h(b.$t("lang.common.confirm")),1)]),_:1},8,["disabled"])])])):(o(),l("div",qd,[r("h4",Yd,[q(" Follow "),r("span",Kd,h(e.creatorData.name),1)]),x(vt,{placeholder:"Name or @yoursocial (optional)",class:"bg-dark/5 w-full rounded-lg mt-6"}),x(vt,{placeholder:"Enter your email",hasError:t(p).errors.email,modelValue:t(p).email,"onUpdate:modelValue":z[0]||(z[0]=I=>t(p).email=I),onInput:z[1]||(z[1]=I=>t(p).errors.email=""),onKeydown:et(ft(M,["prevent"]),["enter"]),class:N(["bg-dark/5 w-full mt-6 rounded-lg",t(p).errors.email?"":"border-transparent"])},null,8,["hasError","modelValue","onKeydown","class"]),t(p).errors.email?(o(),D(gt,{key:0,class:"my-2",message:b.$t(t(p).errors.email)},null,8,["message"])):d("",!0),r("div",Xd,[e.creatorData.own_page?(o(),D(kt,{key:0,class:"w-1/2 py-3 bottom-14",tooltipText:"You cannot follow yourself.",arrowPosition:"center"})):d("",!0),x(ye,{onClick:M,disabled:u.value,class:N([e.creatorData.own_page?"pointer-events-none opacity-80 cursor-not-allowed":"","w-full font-cr-bold xs:font-cr-medium h-12 px-8 text-themeTextColor tw-theme-color-rounded-full mt-4"])},{default:F(()=>[q(h(b.$t("lang.header.follow")),1)]),_:1},8,["disabled","class"])])]))],64))]))}};const l1=["aria-hidden"],s1={class:"tw-payment-widget minxl:w-125 xs:mt-4"},n1={class:"w-full"},i1={class:"tw-page-content-sidebar minxl:w-125 maxxs:mt-11 calcWSection xs:!mt-4 flex-shrink-0"},d1={class:"tw-feature-box xs:bg-transparent xs:p-0 xs:flex xs:flex-col"},u1={__name:"HomeLayout",props:["creator_data","featured_extras","featured_wishlists","goal","goal_v1","featured_posts","current_user_data","membership_levels","membership_settings","subscription","notification","timeline_item"],setup(e){const c=e,a=dt().props.has_discount;wt();let n={},u=s(0),m=s([]),f=0,k=s(!1),p=s(0),$=0,S=s("homeWidget"),w=s(!1),T=s(!1),y=s(!1),M=s(),E=s({}),U=s(0),B=s(!1),b=s(""),z=s(!1),I=s(!1),Y=[],ie=s(""),se=s(""),ee=s(null),he=s(!1),re=s(""),ge=s(""),C=s(null),V=s(null),Q=s(!1),X=s(!1);Oe(()=>{Te.IsBrowser&&(window.addEventListener("scroll",W),i.checkIsTab()||Rt.fixedWidget(".tw-payment-widget",".tw-page-content-sidebar"));let L=i.getCookieValue("cart-"+c.creator_data.data.project_id)&&JSON.parse(i.getCookieValue("cart-"+c.creator_data.data.project_id)).rewardIds.length?JSON.parse(i.getCookieValue("cart-"+c.creator_data.data.project_id)):"";L?(n=L,u.value=L.totalAmount,m.value=L.rewardIds,f=L.cart_id,$=L.rewardsCount,L.discount=L.discount):n={cart_id:0,totalAmount:0,rewardIds:[],rewardsCount:0,details:[],discount:[]}});const _=L=>{X.value=L},W=()=>{B.value=window.top.scrollY>840&&U.value===0},ve=ke(()=>i.checkIsSmallDevice()&&!c.creator_data.data.membership_enabled),le=(L,O,ae)=>{L=="support"?(w.value=!0,E.value=O,X.value?se.value={psp_currency:O.psp_currency,exchange_rate_id:O.exchange_rate_id,psp_amount:O.psp_amount,membership_amount:O.amount}:se.value={profile_full_name_type:O.name_type,psp_currency:O.psp_currency,exchange_rate_id:O.exchange_rate_id,psp_amount:O.psp_amount,amount:O.amount}):(T.value=!0,M.value=O),S.value=ae},me=L=>{U.value=L,B.value=L===0},fe=(L,O)=>{I.value=!0,ie=L,se=O},Ce=L=>{b.value=L,z.value=!0,i.manualUrlChange(Se.extraSingle(L.id))},P=(L,O,ae)=>{let be={reward_id:ae.reward_id,project_id:c.creator_data.data.project_id,cart_id:f,quantity:O=="add"?1:0,discounted:!1};axios.post("api/v1/rewards/cart",be).then(v=>{if(v.data.cart_id){if(f=v.data.cart_id,O=="add"){u.value+=ae.price_converted,m.value.push(ae.reward_id),p.value=1,$+=1;let j={id:ae.reward_id,totalPrice:ae.price_converted,quantity:1};n.details.push(j)}else{let j,G;n.details.forEach(g=>{g.id==ae.reward_id&&(j=g.totalPrice,G=g.quantity)}),u.value-=j,$-=G,p.value=-1,m.value=m.value.filter(g=>g!==ae.reward_id),n.details=n.details.filter(g=>g.id!==ae.reward_id)}n.cart_id=v.data.cart_id,n.totalAmount=u.value,n.rewardIds=m.value,n.rewardsCount=$,n.discount=n.discount,i.setCookieValue("cart-"+c.creator_data.data.project_id,JSON.stringify(n))}}).catch(v=>{v.response&&console.log(v.response.data.errors)}),setTimeout(()=>{p.value=0},200)},Z=async()=>{if(k.value=!0,u.value>0)try{const L=await tt.getAmountToPayMultiCurrency(c.creator_data.data.slug,u.value);L.data.psp_amount&&(ie={feature_type:da.EXTRAS,coffee_count:1,total_amount:L.data.psp_amount_with_fee,total_amount_currency:L.data.psp_currency,total_amount_converted:L.data.psp_amount_with_fee,details:Y},se={reward_amount_total:L.data.amount,psp_currency:L.data.psp_currency,exchange_rate_id:L.data.exchange_rate_id,psp_amount:L.data.psp_amount,reward_ids:m.value,reward_details:Y},I.value=!0,k.value=!1)}catch{k.value=!1}else u.value==0&&(ie={coffee_count:1,total_amount:0,total_amount_currency:c.creator_data.data.currency,total_amount_converted:u.value,details:Y},se={reward_amount_total:u.value,reward_ids:m.value,reward_details:Y},I.value=!0),k.value=!1},ne=()=>{z.value=!1,i.manualUrlChange(Se.creatorPage())},de=()=>{Te.IsBrowser&&i.mountComponentFromDiffPage(".open-edit-profile-modal")},Me=(L,O)=>{y.value=!0,C.value=L??null,V.value=O??null},xe=L=>{y.value=!1,ee.value=L},De=(L,O="",ae=!1)=>{re.value=L,ge.value=O,Q.value=ae,he.value=!0},H=()=>{w.value=!1,i.getParamsValueFromUrl("status")&&i.removeParamsFromUrl("status")},A=ke(()=>y.value||he.value||T.value&&c.creator_data.data.membership_enabled||w.value||z.value||I.value);let te=s(!1);const _e=L=>{te.value=L};return(L,O)=>(o(),D(Nt,{creatorData:e.creator_data.data,fromPage:"home",isPopUpOpen:t(te)||A.value,onSetIsPopUpOpen:_e},{default:F(()=>{var ae,be,v,j;return[r("div",{"aria-hidden":t(te)||A.value,class:"mx-auto my-0 minsm:justify-between maxmd:justify-center minxs:flex flex-row-reverse minxl:w-[1012px] minsm:w-[900px] minxs:w-[750px] xl:gap-x-3 xl:px-9 lg:gap-x-0 lg:!px-0 xs:mt-4"},[r("div",s1,[r("div",n1,[(ae=e.creator_data)!=null&&ae.data.is_payout_connected?(o(),D(Sr,{key:1,creatorData:e.creator_data,currentUserData:e.current_user_data,membershipLevels:e.membership_levels,subscription:e.subscription?e.subscription.data:"",notification:e.notification,featuredExtras:e.featured_extras,membershipSettings:e.membership_settings,goal:e.goal,rewardIds:t(m),recordedVideoData:(be=t(ee))!=null&&be.notif_id?"":t(ee),onChosenMonthlySupportValue:_,onOpenVideoPlayModal:De,onRemoveVideo:xe,onToggleVideoRecorderModal:Me,onTriggerOpenExtraModal:Ce,onTriggerAddToCart:P,onHideFloatingButtonOnMobile:me,onOpenPaymentModal:le},null,8,["creatorData","currentUserData","membershipLevels","subscription","notification","featuredExtras","membershipSettings","goal","rewardIds","recordedVideoData"])):(o(),D(o1,{key:0,creatorData:e.creator_data.data,currentUserData:e.current_user_data},null,8,["creatorData","currentUserData"])),e.goal_v1&&!t(i).checkIsMobile()?(o(),D(_t,{key:2,goal:e.goal_v1.data,creatorData:e.creator_data,current_user_data:e.current_user_data},null,8,["goal","creatorData","current_user_data"])):d("",!0)])]),r("div",i1,[r("div",d1,[x(_a,{creator_data:e.creator_data,onTriggerEditModal:de,class:"mb-6 xs-tw-feature-box xs:mt-4 xs:mb-0 xs:order-2"},null,8,["creator_data"]),x(Fd,{class:"xs-tw-feature-box xs:order-1",creator_data:e.creator_data.data,current_user_data:e.current_user_data,notification:e.notification,timeline_item:e.timeline_item,recordedVideoData:(v=t(ee))!=null&&v.notif_id?t(ee):"",onToggleVideoRecorderModal:Me,onOpenVideoPlayModal:De},null,8,["creator_data","current_user_data","notification","timeline_item","recordedVideoData"])]),e.featured_posts.data.length>0?(o(),D(Pa,{key:0,class:"mt-3 xs:mt-4",featured_posts:e.featured_posts.data,creatorData:e.creator_data,current_user_data:e.current_user_data,onOpenPaymentModal:le},null,8,["featured_posts","creatorData","current_user_data"])):d("",!0)]),e.goal_v1&&t(i).checkIsMobile()?(o(),D(_t,{key:0,goal:e.goal_v1.data,creatorData:e.creator_data,current_user_data:e.current_user_data},null,8,["goal","creatorData","current_user_data"])):d("",!0)],8,l1),ve.value&&((j=e.creator_data)!=null&&j.data.is_payout_connected)?(o(),D(Nd,{key:0,creatorData:e.creator_data,showFloatingButtons:t(B),onOpenPaymentModal:le},null,8,["creatorData","showFloatingButtons"])):d("",!0),t(z)?(o(),D(Qt,{key:1,onClose:ne,onTriggerPaymentModal:fe,creatorData:e.creator_data.data,current_user_data:e.current_user_data,extra:t(b),extra_purchase:t(b).extra_purchase},null,8,["creatorData","current_user_data","extra","extra_purchase"])):d("",!0),t(I)?(o(),D(ia,{key:2,onClosePayModal:O[0]||(O[0]=G=>pe(I)?I.value=!1:I=!1),onAddToCart:P,payDetails:t(ie),hasDiscount:t(a),additionalPayload:t(se),creatorData:e.creator_data.data,current_user_data:e.current_user_data},null,8,["payDetails","hasDiscount","additionalPayload","creatorData","current_user_data"])):d("",!0),x(Je,{name:"slide-fade"},{default:F(()=>[Qe(x(Jt,{extrasCount:t($),totalAmount:t(u),extraInCart:t(p),cart_id:t(f),creatorData:e.creator_data.data,getAmountProcessing:t(k),onOpenCartPayModal:Z},null,8,["extrasCount","totalAmount","extraInCart","cart_id","creatorData","getAmountProcessing"]),[[ot,e.featured_extras.data.length>0&&t($)>0]])]),_:1}),t(w)?(o(),D(ta,{key:3,creatorData:e.creator_data.data,currentUser:e.current_user_data,fromPage:t(S),payData:t(E),additionalPayload:t(se),chosenMonthlySupport:t(X),onClose:O[1]||(O[1]=G=>H()),class:"onetimePaymentModal"},null,8,["creatorData","currentUser","fromPage","payData","additionalPayload","chosenMonthlySupport"])):d("",!0),t(T)&&e.creator_data.data.membership_enabled?(o(),D(ra,{key:4,onClose:O[2]||(O[2]=G=>pe(T)?T.value=!1:T=!1),fromPage:"homeWidget",yearlyEnabled:e.membership_settings.data.membership_yearly_enabled,selectedLevel:t(M),currentUser:e.current_user_data,creatorData:e.creator_data.data,subscribedLevelId:e.subscription?e.subscription.data.membership_level.id:"",subscriptionId:e.subscription?e.subscription.data.id:""},null,8,["yearlyEnabled","selectedLevel","currentUser","creatorData","subscribedLevelId","subscriptionId"])):d("",!0),t(y)?(o(),D(Lo,{key:5,current_user_data:e.current_user_data,creator_data:e.creator_data.data,videoNotifId:t(C),videoMessageType:t(V),onClose:O[3]||(O[3]=G=>pe(y)?y.value=!1:y=!1),onGetVideoClip:xe},null,8,["current_user_data","creator_data","videoNotifId","videoMessageType"])):d("",!0),t(he)?(o(),D(Ks,{key:6,videoCommentUrl:t(re),videoMeta:t(ge),current_user_data:e.current_user_data,isSupportNote:t(Q),onClose:O[4]||(O[4]=G=>{pe(he)?he.value=!1:he=!1})},null,8,["videoCommentUrl","videoMeta","current_user_data","isSupportNote"])):d("",!0)]}),_:1},8,["creatorData","isPopUpOpen"]))}},Mu=Le(u1,[["__scopeId","data-v-f5a33079"]]);export{Mu as default};
